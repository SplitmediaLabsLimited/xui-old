var internal;!function(t){var n;!function(t){var n=function(){function t(t){t.rgb&&this.setRgb(t.rgb),t.irgb&&this.setIrgb(t.irgb),t.bgr&&this.setBgr(t.bgr),t.ibgr&&this.setIbgr(t.ibgr)}return t.prototype.getRgb=function(){return this.rgb},t.prototype.setRgb=function(t){this.rgb=t.replace(/^#/,""),this.irgb=parseInt(this.rgb,16),this.bgr=[this.rgb.substring(4,6),this.rgb.substring(2,4),this.rgb.substring(0,2)].join(""),this.ibgr=parseInt(this.bgr,16)},t.prototype.getBgr=function(){return this.bgr},t.prototype.setBgr=function(t){this.setRgb([t.substring(4,6),t.substring(2,4),t.substring(0,2)].join(""))},t.prototype.getIrgb=function(){return this.irgb},t.prototype.setIrgb=function(t){for(var n=t.toString(16);n.length<6;)n="0"+n;this.setRgb(n)},t.prototype.getIbgr=function(){return this.ibgr},t.prototype.setIbgr=function(t){for(var n=t.toString(16);n.length<6;)n="0"+n;this.setBgr(n)},t}();t.Color=n}(n=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var n;!function(t){var n=function(){function t(t){this.setX(t.x),this.setY(t.y),this.setZ(t.z)}return t.prototype.getX=function(){return this.x},t.prototype.setX=function(t){this.x=t},t.prototype.getY=function(){return this.y},t.prototype.setY=function(t){this.y=t},t.prototype.getZ=function(){return this.z},t.prototype.setZ=function(t){this.z=t},t}();t.Point=n}(n=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var n;!function(t){var n=function(){function t(){}return t.prototype.getTop=function(){return this.top},t.prototype.setTop=function(t){this.top=t,void 0!==this.bottom?this.setHeight(Math.abs(this.top-this.bottom)):void 0!==this.height&&this.setBottom(this.top+this.height)},t.prototype.getLeft=function(){return this.left},t.prototype.setLeft=function(t){this.left=t,void 0!==this.right?this.setWidth(Math.abs(this.right-this.left)):void 0!==this.width&&this.setRight(this.left+this.width)},t.prototype.getRight=function(){return this.right},t.prototype.setRight=function(t){this.right=t,void 0!==this.left?this.setWidth(Math.abs(this.right-this.left)):void 0!==this.width&&this.setLeft(this.right-this.width)},t.prototype.getBottom=function(){return this.bottom},t.prototype.setBottom=function(t){this.bottom=t,void 0!==this.top?this.setHeight(Math.abs(this.top-this.bottom)):void 0!==this.height&&this.setTop(this.bottom-this.height)},t.prototype.getWidth=function(){return this.width},t.prototype.setWidth=function(t){this.width=t,void 0!==this.right?this.setLeft(this.right-this.width):void 0!==this.left&&this.setRight(this.left+this.width)},t.prototype.getHeight=function(){return this.height},t.prototype.setHeight=function(t){this.height=t,void 0!==this.top?this.setBottom(this.top+this.height):void 0!==this.bottom&&this.setTop(this.bottom-this.height)},t.parse=function(n){var e=n.split(","),i=new t;return 2===e.length&&(i.width=Number(e[0]),i.height=Number(e[1])),i},t}();t.Rectangle=n}(n=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var n;!function(t){var n=function(){function t(t){this.callbacks=t}return t.prototype.next=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];if(this.callbacks.length>0){var e=this.callbacks.shift();t.unshift(this.next.bind(this)),e.apply(this,t)}},t.sync=function(){for(var n=[],e=0;e<arguments.length;e++)n[e-0]=arguments[e];var i=new t(n);return i.next(),i},t}();t.Thread=n}(n=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var n;!function(t){var n=function(){function t(n){var e="";void 0===n.value&&(n.value="");for(var i in n)t.RESERVED_ATTRIBUTES.test(i)||void 0===n[i]||(e+=[" ",i,"='",n[i],"'"].join(""));void 0===n.children&&(n.children=[]);for(var o=0,r=n.children;o<r.length;o++){var s=r[o];n.value+=new t(s).toString()}this.xml=["<",n.tag,e,">",n.value,"</",n.tag,">"].join("")}return t.prototype.toString=function(){return this.xml},t.parseJSON=function(n){return new t(n)},t.encode=function(t){return t.replace(/[&<>'']/g,function(t){return"&"+{"&":"amp","<":"lt",">":"gt","'":"quot",'"':"#39"}[t]+";"})},t.RESERVED_ATTRIBUTES=/^(children|tag|value)$/i,t}();t.XML=n}(n=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var n;!function(t){var n=function(){function n(e){if(void 0!==e){var i=e;e instanceof t.XML&&(i=e.toString()),i=i.replace(/<([^\s>]+)([^>]+)\/>/g,function(t,n,e){return["<",n,e,"></",n,">"].join("")});var o=document.createElement("div");o.innerHTML=i;var r=function s(t){var e=new n;e.tag=t.tagName.toLowerCase();for(var i=0;i<t.attributes.length;i++){var o=t.attributes[i];e[o.name]=o.value}e.children=[];for(var r=0;r<t.childNodes.length;r++){var a=t.childNodes[r];a instanceof HTMLElement&&e.children.push(s(a))}return void 0===e.value&&0===e.children.length&&(delete e.children,e.value=t.textContent),e}(o);return r=r.children[0]}}return n.parse=function(t){return new n(t)},n}();t.JSON=n}(n=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){function n(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=null,r=!1;return n.length>0&&(o=n[n.length-1],o instanceof Function?n.pop():o=null),console.log(['internal.exec("',t,'") ',JSON.stringify(n)].join(" ")),window.external&&window.external[t]&&window.external[t]instanceof Function&&(r=window.external[t].apply(this,n)),null!==o&&(e[r]=o),r}var e={};t.exec=n,window.OnAsyncCallback=function(t,n){var i=e[t];i instanceof Function&&i.call(this,decodeURIComponent(n))},window.OnSceneLoad=function(t,n){document.dispatchEvent(new CustomEvent("scene-load",{detail:{view:t,scene:n}}))},window.SetConfiguration=function(t){document.dispatchEvent(new CustomEvent("set-configuration",{config:t}))},window.SetBackGroundColor=function(t){document.dispatchEvent(new CustomEvent("set-background-color",{color:t}))},window.SetVolume=function(t){document.dispatchEvent(new CustomEvent("set-volume",{volume:t}))},window.OnDialogResult=function(t){document.dispatchEvent(new CustomEvent("dialog-result",{detail:{result:t}}))}}(internal||(internal={}));var internal;!function(t){var n=function(){function t(){}return t.initialize=function(){t._initialized||(t._isHtml=window.external&&void 0===window.external.AttachVideoItem,t._isConfig=window.external&&void 0!==window.external.AttachVideoItem&&void 0!==window.external.GetViewId&&void 0!==window.external.GetViewId(),t._isScript=window.external&&void 0!==window.external.AttachVideoItem&&void 0!==window.external.GetViewId&&void 0===window.external.GetViewId(),t._initialized=!0)},t.isSourceHtml=function(){return t._isHtml},t.isSourceConfig=function(){return t._isConfig},t.isScriptPlugin=function(){return t._isScript},t}();t.Environment=n,n.initialize()}(internal||(internal={}));var internal;!function(t){var n=t.utils,e=function(){function e(){}return e.get=function(n){return new Promise(function(e){t.exec("AppGetPropertyAsync",n,e)})},e.getAsList=function(t){return new Promise(function(i){e.get(t).then(function(t){var e=n.JSON.parse(t),o=[];e.children.length>0&&(o=e.children),i(o)})})},e.getGlobalProperty=function(n){return t.exec("GetGlobalProperty",n)},e.set=function(n,e){return new Promise(function(i){t.exec("AppSetPropertyAsync",n,e,function(t){i("0"===t?!1:!0)})})},e.callDll=function(){var n=[].slice.call(arguments);return n.unshift("CallDll"),t.exec.apply(this,n)},e.callFunc=function(n,e){return new Promise(function(i){t.exec("AppCallFuncAsync",n,e,function(t){i(t)})})},e.postMessage=function(n){for(var e=this,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return new Promise(function(o){i.unshift(n),i.unshift("PostMessageToParent"),i.push(function(t){o(t)}),t.exec.apply(e,i)})},e.POSTMESSAGE_CLOSE="1",e.POSTMESSAGE_SIZE="2",e}();t.App=e}(internal||(internal={}));var internal;!function(t){var n=function(){function n(){}return n.attach=function(n,e){t.exec("SearchVideoItem",n,e)},n.get=function(n,e){return new Promise(function(i){t.exec("GetLocalPropertyAsync"+("1"===String(e)?"":"2"),n,function(t){i(t)})})},n.set=function(n,e,i){t.exec("SetLocalPropertyAsync"+("1"===String(i)?"":"2"),n,e)},n.callFunc=function(n,e){t.exec("CallInner",n,e)},n}();t.Item=n}(internal||(internal={}));var internal;!function(t){function n(){t.Environment.isSourceHtml()&&t.exec("GetLocalPropertyAsync","prop:BrowserConfiguration",function(n){var e=JSON.parse(decodeURIComponent(n));if(console.log(e),null===e&&(e={}),void 0===e.configUrl)for(var i=document.getElementsByTagName("meta"),o=i.length-1;o>=0;o--)if("config-url"===i[o].name){e.configUrl=i[o].content,t.exec("SetBrowserProperty","Configuration",JSON.stringify(e));break}})}t.init=n}(internal||(internal={})),internal.init();var xui;!function(t){var n;!function(t){var n=internal.utils,e=internal.App,i=function(){function t(t){this.defaultConsole=!1,this.defaultMultimedia=!1,this.defaultCommunication=!1,t=t||{},this.id=t.id,this.name=t.name,this.adapter=t.adapter,this.adapterdev=t.adapterdev,this.guid=t.guid,this.dataflow=t.dataflow,this.state=t.state,this.defaultConsole=t.defaultConsole,this.defaultMultimedia=t.defaultMultimedia,this.defaultCommunication=t.defaultCommunication,this.level=t.level,this.enable=t.enable,this.hwlevel=t.hwlevel}return t.prototype.getId=function(){return this.id},t.prototype.getName=function(){return this.name},t.prototype.getAdapterName=function(){return this.adapter},t.prototype.getAdapterDescription=function(){return this.adapterdev},t.prototype.getGuid=function(){return this.guid},t.prototype.getDataFlow=function(){return this.dataflow},t.prototype.getState=function(){return this.state},t.prototype.isDefaultConsole=function(){return this.defaultConsole},t.prototype.isDefaultMultimedia=function(){return this.defaultMultimedia},t.prototype.isDefaultCommunication=function(){return this.defaultCommunication},t.prototype.getLevel=function(){return this.level},t.prototype.setLevel=function(t){return this.level=t,this},t.prototype.isEnabled=function(){return this.enable},t.prototype.setEnabled=function(t){return this.enable=t,this},t.prototype.getSystemLevel=function(){return this.hwlevel},t.prototype.setSystemLevel=function(t){return this.hwlevel=t,this},t.prototype.isSystemEnabled=function(){return this.hwenable},t.prototype.setSystemEnabled=function(t){return this.hwenable=t,this},t.prototype.getDelay=function(){return this.delay},t.prototype.setDelay=function(t){return this.delay=t,this},t.prototype.toString=function(){var t=new n.JSON;return t.tag="dev",t.id=this.getId(),t.level=this.getLevel(),t.enable=this.isEnabled()?1:0,t.hwlevel=this.getSystemLevel(),t.hwenable=this.isSystemEnabled()?1:0,t.delay=this.getDelay(),n.XML.parseJSON(t).toString()},t.list=function(n){return n=n||{dataflow:"all",state:"all"},n.dataflow=n.dataflow||"all",n.state=n.state||"all",new Promise(function(i){e.getAsList("wasapienum").then(function(e){var o=[];e.map(function(e){var i=!/^all$/i.test(n.dataflow)&&n.dataflow!==e.dataflow,r=!/^all$/i.test(n.state)&&n.state!==e.state;i||r||o.push(t.parse(e))}),i(o)})})},t.parse=function(n){var e=new t({id:n.id,name:n.name,adapter:n.adapter,adapterdev:n.adapterdev,dataflow:n.dataflow,state:n.state,guid:n.dsoundguid,defaultCommunication:"1"===n.defaultcommunication,defaultConsole:"1"===n.defaultconsole,defaultMultimedia:"1"===n.defaultmultimedia});return e.setLevel(Number(n.level)).setEnabled("1"===n.enable).setSystemLevel(Number(n.hwlevel)).setSystemEnabled("1"===n.hwenable).setDelay(Number(n.delay)),e},t.STATE_ACTIVE="Active",t.DATAFLOW_RENDER="Render",t.DATAFLOW_CAPTURE="Capture",t}();t.Audio=i}(n=t.system||(t.system={}))}(xui||(xui={}));var xui;!function(t){var n;!function(n){var e=internal.utils.Rectangle,i=t.system.Audio,o=internal.App,r=internal.utils.JSON,s=internal.utils.XML,a=function(){function t(){}return t.callDll=function(){return o.callDll.apply(this,arguments)},t.getFrametime=function(){return new Promise(function(t){t(o.get("frametime"))})},t.getResolution=function(){return new Promise(function(t){o.get("resolution").then(function(n){t(e.parse(n))})})},t.getViewport=function(){return new Promise(function(t){o.get("viewport").then(function(n){t(e.parse(n))})})},t.getVersion=function(){return new Promise(function(t){t(o.get("version"))})},t.getFramesRendered=function(){return new Promise(function(t){t(o.get("version"))})},t.getAudioDevices=function(){return new Promise(function(t){o.getAsList("microphonedev2").then(function(n){t(n.map(function(t){return i.parse(t)}))})})},t.setAudioDevices=function(t){var n="";if(Array.isArray(t))for(var e=0;e<t.length;++e)n+=t[e].toString();n="<devices>"+n+"</devices>",o.set("microphonedev2",n)},t.getAudioGain=function(){return new Promise(function(t){o.get("microphonegain").then(function(n){t(r.parse(n))})})},t.setAudioGain=function(t){t.tag="configuration",o.set("microphonegain",s.parseJSON(t).toString())},t.newDialog=function(t){void 0!==t&&""!==t&&o.callFunc("newdialog",t)},t.newAutoDialog=function(t){void 0!==t&&""!==t&&o.callFunc("newautodialog",t)},t.resizeDialog=function(t,n){internal.exec("CloseDialog")},t.resizeSelf=function(t,n){o.postMessage(o.POSTMESSAGE_SIZE,t,n)},t.closeSelf=function(){o.postMessage(o.POSTMESSAGE_CLOSE)},t.getTransition=function(){return new Promise(function(t){o.get("transitionid").then(function(n){t(n)})})},t.setTransition=function(t){o.set("transitionid",t)},t.getTransitionTime=function(){return new Promise(function(t){o.get("transitiontime").then(function(n){t(Number(n))})})},t.setTransitionTime=function(t){o.set("transitiontime",t.toString())},t.TRANSITION_CLOCK="clock",t.TRANSITION_COLLAPSE="collapse",t.TRANSITION_MOVE_BOTTOM="move_bottom",t.TRANSITION_MOVE_LEFT="move_left",t.TRANSITION_MOVE_LEFT_RIGHT="move_left_right",t.TRANSITION_MOVE_RIGHT="move_right",t.TRANSITION_MOVE_TOP="move_top",t.TRANSITION_FAN="fan",t.TRANSITION_HOLE="hole",t.TRANSITION_WAVE="wave",t}();n.App=a}(n=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var n;!function(t){var n=internal.App,e=function(){function t(t){this.name=t.name,this.stat=t.stat,this.channel=t.channel}return t.prototype.getStreamDrops=function(){var t=this;return new Promise(function(e){n.get("streamdrops:"+t.name).then(function(t){var n=t.split(","),i=n[0]||"0",o=n[1]||"0";e({dropped:i,rendered:o})})})},t.prototype.getStreamTime=function(){var t=this;return new Promise(function(e){n.get("streamtime:"+t.name).then(function(t){var n=parseInt(t)/10;e(String(n))})})},t}();t.Channel=e}(n=t.core||(t.core={}))}(xui||(xui={}));