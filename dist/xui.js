var internal;!function(t){var e;!function(t){var e=function(){function t(t){t.rgb&&this.setRgb(t.rgb),t.irgb&&this.setIrgb(t.irgb),t.bgr&&this.setBgr(t.bgr),t.ibgr&&this.setIbgr(t.ibgr)}return t.prototype.getRgb=function(){return this.rgb},t.prototype.setRgb=function(t){this.rgb=t.replace(/^#/,""),this.irgb=parseInt(this.rgb,16),this.bgr=[this.rgb.substring(4,6),this.rgb.substring(2,4),this.rgb.substring(0,2)].join(""),this.ibgr=parseInt(this.bgr,16)},t.prototype.getBgr=function(){return this.bgr},t.prototype.setBgr=function(t){this.setRgb([t.substring(4,6),t.substring(2,4),t.substring(0,2)].join(""))},t.prototype.getIrgb=function(){return this.irgb},t.prototype.setIrgb=function(t){for(var e=t.toString(16);e.length<6;)e="0"+e;this.setRgb(e)},t.prototype.getIbgr=function(){return this.ibgr},t.prototype.setIbgr=function(t){for(var e=t.toString(16);e.length<6;)e="0"+e;this.setBgr(e)},t}();t.Color=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function t(t){this.setX(t.x),this.setY(t.y),this.setZ(t.z)}return t.prototype.getX=function(){return this.x},t.prototype.setX=function(t){this.x=t},t.prototype.getY=function(){return this.y},t.prototype.setY=function(t){this.y=t},t.prototype.getZ=function(){return this.z},t.prototype.setZ=function(t){this.z=t},t}();t.Point=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.getTop=function(){return this.top},t.prototype.setTop=function(t){this.top=t,void 0!==this.bottom?this.setHeight(Math.abs(this.top-this.bottom)):void 0!==this.height&&this.setBottom(this.top+this.height)},t.prototype.getLeft=function(){return this.left},t.prototype.setLeft=function(t){this.left=t,void 0!==this.right?this.setWidth(Math.abs(this.right-this.left)):void 0!==this.width&&this.setRight(this.left+this.width)},t.prototype.getRight=function(){return this.right},t.prototype.setRight=function(t){this.right=t,void 0!==this.left?this.setWidth(Math.abs(this.right-this.left)):void 0!==this.width&&this.setLeft(this.right-this.width)},t.prototype.getBottom=function(){return this.bottom},t.prototype.setBottom=function(t){this.bottom=t,void 0!==this.top?this.setHeight(Math.abs(this.top-this.bottom)):void 0!==this.height&&this.setTop(this.bottom-this.height)},t.prototype.getWidth=function(){return this.width},t.prototype.setWidth=function(t){this.width=t,void 0!==this.right?this.setLeft(this.right-this.width):void 0!==this.left&&this.setRight(this.left+this.width)},t.prototype.getHeight=function(){return this.height},t.prototype.setHeight=function(t){this.height=t,void 0!==this.top?this.setBottom(this.top+this.height):void 0!==this.bottom&&this.setTop(this.bottom-this.height)},t.parse=function(e){var n=e.split(","),i=new t;return 2===n.length&&(i.width=Number(n[0]),i.height=Number(n[1])),i},t}();t.Rectangle=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function t(t){this.callbacks=t}return t.prototype.next=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(this.callbacks.length>0){var n=this.callbacks.shift();t.unshift(this.next.bind(this)),n.apply(this,t)}},t.sync=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var i=new t(e);return i.next(),i},t}();t.Thread=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function t(e){var n="";void 0===e.value&&(e.value="");for(var i in e)t.RESERVED_ATTRIBUTES.test(i)||void 0===e[i]||(n+=[" ",i,"='",e[i],"'"].join(""));void 0===e.children&&(e.children=[]);for(var o=0,r=e.children;o<r.length;o++){var s=r[o];e.value+=new t(s).toString()}this.xml=["<",e.tag,n,">",e.value,"</",e.tag,">"].join("")}return t.prototype.toString=function(){return this.xml},t.parseJSON=function(e){return new t(e)},t.encode=function(t){return t.replace(/[&<>'']/g,function(t){return"&"+{"&":"amp","<":"lt",">":"gt","'":"quot",'"':"#39"}[t]+";"})},t.RESERVED_ATTRIBUTES=/^(children|tag|value)$/i,t}();t.XML=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function e(n){if(void 0!==n){var i=n;n instanceof t.XML&&(i=n.toString()),i=i.replace(/<([^\s>]+)([^>]+)\/>/g,function(t,e,n){return["<",e,n,"></",e,">"].join("")});var o=document.createElement("div");o.innerHTML=i;var r=function s(t){var n=new e;n.tag=t.tagName.toLowerCase();for(var i=0;i<t.attributes.length;i++){var o=t.attributes[i];n[o.name]=o.value}n.children=[];for(var r=0;r<t.childNodes.length;r++){var a=t.childNodes[r];a instanceof HTMLElement&&n.children.push(s(a))}return void 0===n.value&&0===n.children.length&&(delete n.children,n.value=t.textContent),n}(o);return r=r.children[0]}}return e.parse=function(t){return new e(t)},e}();t.JSON=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){function e(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=null,r=!1;return e.length>0&&(o=e[e.length-1],o instanceof Function?e.pop():o=null),console.log(['internal.exec("',t,'") ',JSON.stringify(e)].join(" ")),window.external&&window.external[t]&&window.external[t]instanceof Function&&(r=window.external[t].apply(this,e)),null!==o&&(n[r]=o),r}var n={};t.exec=e,window.OnAsyncCallback=function(t,e){var i=n[t];i instanceof Function&&i.call(this,decodeURIComponent(e))},window.OnSceneLoad=function(t,e){document.dispatchEvent(new CustomEvent("scene-load",{detail:{view:t,scene:e}}))},window.SetConfiguration=function(t){document.dispatchEvent(new CustomEvent("set-configuration",{config:t}))},window.SetBackGroundColor=function(t){document.dispatchEvent(new CustomEvent("set-background-color",{color:t}))},window.SetVolume=function(t){document.dispatchEvent(new CustomEvent("set-volume",{volume:t}))},window.OnDialogResult=function(t){document.dispatchEvent(new CustomEvent("dialog-result",{detail:{result:t}}))}}(internal||(internal={}));var internal;!function(t){var e=function(){function t(){}return t.initialize=function(){t._initialized||(t._isHtml=window.external&&void 0===window.external.AttachVideoItem,t._isConfig=window.external&&void 0!==window.external.AttachVideoItem&&void 0!==window.external.GetViewId&&void 0!==window.external.GetViewId(),t._isScript=window.external&&void 0!==window.external.AttachVideoItem&&void 0!==window.external.GetViewId&&void 0===window.external.GetViewId(),t._initialized=!0)},t.isSourceHtml=function(){return t._isHtml},t.isSourceConfig=function(){return t._isConfig},t.isScriptPlugin=function(){return t._isScript},t}();t.Environment=e,e.initialize()}(internal||(internal={}));var internal;!function(t){var e=t.utils,n=function(){function n(){}return n.get=function(e){return new Promise(function(n){t.exec("AppGetPropertyAsync",e,n)})},n.getAsList=function(t){return new Promise(function(i){n.get(t).then(function(t){var n=e.JSON.parse(t),o=[];n.children.length>0&&(o=n.children),i(o)})})},n.getGlobalProperty=function(e){return t.exec("GetGlobalProperty",e)},n.set=function(e,n){return new Promise(function(i){t.exec("AppSetPropertyAsync",e,n,function(t){i("0"===t?!1:!0)})})},n.callDll=function(){var e=[].slice.call(arguments);return e.unshift("CallDll"),t.exec.apply(this,e)},n.callFunc=function(e,n){return new Promise(function(i){t.exec("AppCallFuncAsync",e,n,function(t){i(t)})})},n.postMessage=function(e){for(var n=this,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return new Promise(function(o){i.unshift(e),i.unshift("PostMessageToParent"),i.push(function(t){o(t)}),t.exec.apply(n,i)})},n.POSTMESSAGE_CLOSE="1",n.POSTMESSAGE_SIZE="2",n}();t.App=n}(internal||(internal={}));var internal;!function(t){var e=function(){function e(t){var t=t||{};this.name=t.name,this.value=t.item,this.id=t.id,this.sceneID=t.sceneID,this.viewID=t.viewID}return e.attach=function(e,n){t.exec("SearchVideoItem",e,n)},e.get=function(e,n){return new Promise(function(i){t.exec("GetLocalPropertyAsync"+("1"===String(n)?"":"2"),e,function(t){i(t)})})},e.set=function(e,n,i){t.exec("SetLocalPropertyAsync"+("1"===String(i)?"":"2"),e,n)},e.callFunc=function(e,n){t.exec("CallInner",e,n)},e.setBaseID=function(t){e.baseID=t},e}();t.Item=e}(internal||(internal={}));var internal;!function(t){function e(){t.Environment.isSourceHtml()&&(t.exec("GetLocalPropertyAsync","prop:BrowserConfiguration",function(e){var n=JSON.parse(decodeURIComponent(e));if(null===n&&(n={}),void 0===n.configUrl)for(var i=document.getElementsByTagName("meta"),o=i.length-1;o>=0;o--)if("config-url"===i[o].name){n.configUrl=i[o].content,t.exec("SetBrowserProperty","Configuration",JSON.stringify(n));break}}),t.exec("GetLocalPropertyAsync","prop:BrowserConfiguration",function(e){t.Item.setBaseID(decodeURIComponent(e))}))}t.init=e}(internal||(internal={})),internal.init();var xui;!function(t){var e;!function(t){var e=internal.utils,n=internal.App,i=function(){function t(t){this.defaultConsole=!1,this.defaultMultimedia=!1,this.defaultCommunication=!1,t=t||{},this.id=t.id,this.name=t.name,this.adapter=t.adapter,this.adapterdev=t.adapterdev,this.guid=t.guid,this.dataflow=t.dataflow,this.state=t.state,this.defaultConsole=t.defaultConsole,this.defaultMultimedia=t.defaultMultimedia,this.defaultCommunication=t.defaultCommunication,this.level=t.level,this.enable=t.enable,this.hwlevel=t.hwlevel}return t.prototype.getId=function(){return this.id},t.prototype.getName=function(){return this.name},t.prototype.getAdapterName=function(){return this.adapter},t.prototype.getAdapterDescription=function(){return this.adapterdev},t.prototype.getGuid=function(){return this.guid},t.prototype.getDataFlow=function(){return this.dataflow},t.prototype.getState=function(){return this.state},t.prototype.isDefaultConsole=function(){return this.defaultConsole},t.prototype.isDefaultMultimedia=function(){return this.defaultMultimedia},t.prototype.isDefaultCommunication=function(){return this.defaultCommunication},t.prototype.getLevel=function(){return this.level},t.prototype.setLevel=function(t){return this.level=t,this},t.prototype.isEnabled=function(){return this.enable},t.prototype.setEnabled=function(t){return this.enable=t,this},t.prototype.getSystemLevel=function(){return this.hwlevel},t.prototype.setSystemLevel=function(t){return this.hwlevel=t,this},t.prototype.isSystemEnabled=function(){return this.hwenable},t.prototype.setSystemEnabled=function(t){return this.hwenable=t,this},t.prototype.getDelay=function(){return this.delay},t.prototype.setDelay=function(t){return this.delay=t,this},t.prototype.toString=function(){var t=new e.JSON;return t.tag="dev",t.id=this.getId(),t.level=this.getLevel(),t.enable=this.isEnabled()?1:0,t.hwlevel=this.getSystemLevel(),t.hwenable=this.isSystemEnabled()?1:0,t.delay=this.getDelay(),e.XML.parseJSON(t).toString()},t.list=function(e){return e=e||{dataflow:"all",state:"all"},e.dataflow=e.dataflow||"all",e.state=e.state||"all",new Promise(function(i){n.getAsList("wasapienum").then(function(n){var o=[];n.map(function(n){var i=!/^all$/i.test(e.dataflow)&&e.dataflow!==n.dataflow,r=!/^all$/i.test(e.state)&&e.state!==n.state;i||r||o.push(t.parse(n))}),i(o)})})},t.parse=function(e){var n=new t({id:e.id,name:e.name,adapter:e.adapter,adapterdev:e.adapterdev,dataflow:e.dataflow,state:e.state,guid:e.dsoundguid,defaultCommunication:"1"===e.defaultcommunication,defaultConsole:"1"===e.defaultconsole,defaultMultimedia:"1"===e.defaultmultimedia});return n.setLevel(Number(e.level)).setEnabled("1"===e.enable).setSystemLevel(Number(e.hwlevel)).setSystemEnabled("1"===e.hwenable).setDelay(Number(e.delay)),n},t.STATE_ACTIVE="Active",t.DATAFLOW_RENDER="Render",t.DATAFLOW_CAPTURE="Capture",t}();t.Audio=i}(e=t.system||(t.system={}))}(xui||(xui={}));var xui;!function(t){var e;!function(e){var n=internal.utils.Rectangle,i=t.system.Audio,o=internal.App,r=internal.utils.JSON,s=internal.utils.XML,a=function(){function t(){}return t.callDll=function(){return o.callDll.apply(this,arguments)},t.getFrametime=function(){return new Promise(function(t){t(o.get("frametime"))})},t.getResolution=function(){return new Promise(function(t){o.get("resolution").then(function(e){t(n.parse(e))})})},t.getViewport=function(){return new Promise(function(t){o.get("viewport").then(function(e){t(n.parse(e))})})},t.getVersion=function(){return new Promise(function(t){t(o.get("version"))})},t.getFramesRendered=function(){return new Promise(function(t){t(o.get("version"))})},t.getAudioDevices=function(){return new Promise(function(t){o.getAsList("microphonedev2").then(function(e){t(e.map(function(t){return i.parse(t)}))})})},t.setAudioDevices=function(t){var e="";if(Array.isArray(t))for(var n=0;n<t.length;++n)e+=t[n].toString();e="<devices>"+e+"</devices>",o.set("microphonedev2",e)},t.getAudioGain=function(){return new Promise(function(t){o.get("microphonegain").then(function(e){t(r.parse(e))})})},t.setAudioGain=function(t){t.tag="configuration",o.set("microphonegain",s.parseJSON(t).toString())},t.newDialog=function(t){void 0!==t&&""!==t&&o.callFunc("newdialog",t)},t.newAutoDialog=function(t){void 0!==t&&""!==t&&o.callFunc("newautodialog",t)},t.closeDialog=function(t,e){internal.exec("CloseDialog")},t.resizeSelf=function(t,e){o.postMessage(o.POSTMESSAGE_SIZE,t,e)},t.closeSelf=function(){o.postMessage(o.POSTMESSAGE_CLOSE)},t.getTransition=function(){return new Promise(function(t){o.get("transitionid").then(function(e){t(e)})})},t.setTransition=function(t){o.set("transitionid",t)},t.getTransitionTime=function(){return new Promise(function(t){o.get("transitiontime").then(function(e){t(Number(e))})})},t.setTransitionTime=function(t){o.set("transitiontime",t.toString())},t.TRANSITION_CLOCK="clock",t.TRANSITION_COLLAPSE="collapse",t.TRANSITION_MOVE_BOTTOM="move_bottom",t.TRANSITION_MOVE_LEFT="move_left",t.TRANSITION_MOVE_LEFT_RIGHT="move_left_right",t.TRANSITION_MOVE_RIGHT="move_right",t.TRANSITION_MOVE_TOP="move_top",t.TRANSITION_FAN="fan",t.TRANSITION_HOLE="hole",t.TRANSITION_WAVE="wave",t}();e.App=a}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.App,n=function(){function t(t){this.name=t.name,this.stat=t.stat,this.channel=t.channel}return t.prototype.getStreamDrops=function(){var t=this;return new Promise(function(n){e.get("streamdrops:"+t.name).then(function(t){var e=t.split(","),i=parseInt(e[0])||0,o=parseInt(e[1])||0;n({dropped:i,rendered:o})})})},t.prototype.getStreamTime=function(){var t=this;return new Promise(function(n){e.get("streamtime:"+t.name).then(function(t){var e=parseInt(t)/10;n(e)})})},t}();t.Channel=n}(e=t.core||(t.core={}))}(xui||(xui={}));