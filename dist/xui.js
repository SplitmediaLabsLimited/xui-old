var internal;!function(t){var e;!function(t){var e=function(){function t(t){t.rgb&&this.setRgb(t.rgb),t.irgb&&this.setIrgb(t.irgb),t.bgr&&this.setBgr(t.bgr),t.ibgr&&this.setIbgr(t.ibgr)}return t.prototype.getRgb=function(){return this.rgb},t.prototype.setRgb=function(t){this.rgb=t.replace(/^#/,""),this.irgb=parseInt(this.rgb,16),this.bgr=[this.rgb.substring(4,6),this.rgb.substring(2,4),this.rgb.substring(0,2)].join(""),this.ibgr=parseInt(this.bgr,16)},t.prototype.getBgr=function(){return this.bgr},t.prototype.setBgr=function(t){this.setRgb([t.substring(4,6),t.substring(2,4),t.substring(0,2)].join(""))},t.prototype.getIrgb=function(){return this.irgb},t.prototype.setIrgb=function(t){for(var e=t.toString(16);e.length<6;)e="0"+e;this.setRgb(e)},t.prototype.getIbgr=function(){return this.ibgr},t.prototype.setIbgr=function(t){for(var e=t.toString(16);e.length<6;)e="0"+e;this.setBgr(e)},t}();t.Color=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function t(t){this.setX(t.x),this.setY(t.y),this.setZ(t.z)}return t.prototype.getX=function(){return this.x},t.prototype.setX=function(t){this.x=t},t.prototype.getY=function(){return this.y},t.prototype.setY=function(t){this.y=t},t.prototype.getZ=function(){return this.z},t.prototype.setZ=function(t){this.z=t},t}();t.Point=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.getTop=function(){return this.top},t.prototype.setTop=function(t){this.top=t,void 0!==this.bottom?this.setHeight(Math.abs(this.top-this.bottom)):void 0!==this.height&&this.setBottom(this.top+this.height)},t.prototype.getLeft=function(){return this.left},t.prototype.setLeft=function(t){this.left=t,void 0!==this.right?this.setWidth(Math.abs(this.right-this.left)):void 0!==this.width&&this.setRight(this.left+this.width)},t.prototype.getRight=function(){return this.right},t.prototype.setRight=function(t){this.right=t,void 0!==this.left?this.setWidth(Math.abs(this.right-this.left)):void 0!==this.width&&this.setLeft(this.right-this.width)},t.prototype.getBottom=function(){return this.bottom},t.prototype.setBottom=function(t){this.bottom=t,void 0!==this.top?this.setHeight(Math.abs(this.top-this.bottom)):void 0!==this.height&&this.setTop(this.bottom-this.height)},t.prototype.getWidth=function(){return this.width},t.prototype.setWidth=function(t){this.width=t,void 0!==this.right?this.setLeft(this.right-this.width):void 0!==this.left&&this.setRight(this.left+this.width)},t.prototype.getHeight=function(){return this.height},t.prototype.setHeight=function(t){this.height=t,void 0!==this.top?this.setBottom(this.top+this.height):void 0!==this.bottom&&this.setTop(this.bottom-this.height)},t.parse=function(e){var n=e.split(","),i=new t;return 4===n.length&&(i.top=Number(n[0]),i.left=Number(n[1]),i.right=Number(n[2]),i.bottom=Number(n[3])),2===n.length&&(i.width=Number(n[0]),i.height=Number(n[1])),i},t.prototype.toString=function(t){var e=t||":left,:top,:right,:bottom";return e=e.replace(":left",String(this.left)),e=e.replace(":top",String(this.top)),e=e.replace(":right",String(this.right)),e=e.replace(":bottom",String(this.bottom)),e=e.replace(":width",String(this.width)),e=e.replace(":height",String(this.height))},t}();t.Rectangle=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function t(t){this.callbacks=t}return t.prototype.next=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(this.callbacks.length>0){var n=this.callbacks.shift();t.unshift(this.next.bind(this)),n.apply(this,t)}},t.sync=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var i=new t(e);return i.next(),i},t}();t.Thread=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function t(e){var n="";void 0===e.value&&(e.value="");for(var i in e)t.RESERVED_ATTRIBUTES.test(i)||void 0===e[i]||(n+=[" ",i,"='",e[i],"'"].join(""));void 0===e.children&&(e.children=[]);for(var o=0,r=e.children;o<r.length;o++){var s=r[o];e.value+=new t(s).toString()}this.xml=["<",e.tag,n,">",e.value,"</",e.tag,">"].join("")}return t.prototype.toString=function(){return this.xml},t.parseJSON=function(e){return new t(e)},t.encode=function(t){return t.replace(/[&<>'']/g,function(t){return"&"+{"&":"amp","<":"lt",">":"gt","'":"quot",'"':"#39"}[t]+";"})},t.RESERVED_ATTRIBUTES=/^(children|tag|value)$/i,t}();t.XML=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function e(n){if(void 0!==n&&""!==n){var i=n;n instanceof t.XML&&(i=n.toString()),i=i.replace(/<([^\s>]+)([^>]+)\/>/g,function(t,e,n){return["<",e,n,"></",e,">"].join("")});var o=document.createElement("div");o.innerHTML=i;var r=function s(t){var n=new e;n.tag=t.tagName.toLowerCase();for(var i=0;i<t.attributes.length;i++){var o=t.attributes[i];n[o.name]=o.value}n.children=[];for(var r=0;r<t.childNodes.length;r++){var a=t.childNodes[r];a instanceof HTMLElement&&n.children.push(s(a))}return void 0===n.value&&0===n.children.length&&(delete n.children,n.value=t.textContent),n}(o);return r=r.children[0]}}return e.parse=function(t){return new e(t)},e}();t.JSON=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){function e(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=null,r=!1;return e.length>0&&(o=e[e.length-1],o instanceof Function?e.pop():o=null),console.log(['internal.exec("',t,'") ',JSON.stringify(e)].join(" ")),window.external&&window.external[t]&&window.external[t]instanceof Function&&(r=window.external[t].apply(this,e)),null!==o&&(n[r]=o),r}var n={};t.exec=e,window.OnAsyncCallback=function(t,e){var i=n[t];i instanceof Function&&i.call(this,decodeURIComponent(e))},window.OnSceneLoad=function(t,e){document.dispatchEvent(new CustomEvent("scene-load",{detail:{view:t,scene:e}}))},window.SetConfiguration=function(t){document.dispatchEvent(new CustomEvent("set-configuration",{config:t}))},window.SetBackGroundColor=function(t){document.dispatchEvent(new CustomEvent("set-background-color",{color:t}))},window.SetVolume=function(t){document.dispatchEvent(new CustomEvent("set-volume",{volume:t}))},window.OnDialogResult=function(t){document.dispatchEvent(new CustomEvent("dialog-result",{detail:{result:t}}))}}(internal||(internal={}));var internal;!function(t){var e=function(){function t(){}return t.initialize=function(){t._initialized||(t._isHtml=window.external&&void 0!==window.external.GetConfiguration,t._isConfig=window.external&&void 0===window.external.GetConfiguration&&void 0!==window.external.GetViewId&&void 0!==window.external.GetViewId(),t._isScript=window.external&&void 0===window.external.GetConfiguration&&void 0!==window.external.GetViewId&&void 0===window.external.GetViewId(),t._initialized=!0)},t.isSourceHtml=function(){return t._isHtml},t.isSourceConfig=function(){return t._isConfig},t.isScriptPlugin=function(){return t._isScript},t}();t.Environment=e,e.initialize()}(internal||(internal={}));var internal;!function(t){var e=t.utils,n=function(){function n(){}return n.get=function(e){return new Promise(function(n){t.exec("AppGetPropertyAsync",e,n)})},n.getAsList=function(t){return new Promise(function(i){n.get(t).then(function(t){var n=e.JSON.parse(t),o=[];n.children&&n.children.length>0&&(o=n.children),i(o)})})},n.getGlobalProperty=function(e){return t.exec("GetGlobalProperty",e)},n.set=function(e,n){return new Promise(function(i){t.exec("AppSetPropertyAsync",e,n,function(t){i("0"===t?!1:!0)})})},n.callDll=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=[].slice.call(arguments);return o.unshift("CallDll"),t.exec.apply(this,o)},n.callFunc=function(e,n){return new Promise(function(i){t.exec("AppCallFuncAsync",e,n,function(t){i(t)})})},n.postMessage=function(e){for(var n=this,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return new Promise(function(o){i.unshift(e),i.unshift("PostMessageToParent"),i.push(function(t){o(t)}),t.exec.apply(n,i)})},n.POSTMESSAGE_CLOSE="1",n.POSTMESSAGE_SIZE="2",n}();t.App=n}(internal||(internal={}));var internal;!function(t){var e=function(){function e(t){var t=t||{};this.name=t.name,this.value=t.item,this.id=t.id,this.sceneID=t.sceneID,this.viewID=t.viewID}return e.attach=function(e,n,i){t.Environment.isScriptPlugin()?t.exec("SearchVideoItem",e,String(n)):t.exec("AttachVideoItem"+("2"===String(i)?"2":""),e,String(n))},e.get=function(e,n){return new Promise(function(i){t.exec("GetLocalPropertyAsync"+("2"===String(n)?"2":""),e,function(t){i(t)})})},e.set=function(e,n,i){t.exec("SetLocalPropertyAsync"+("2"===String(i)?"2":""),e,n)},e.callFunc=function(e,n){t.exec("CallInner",e,n)},e.setBaseID=function(t){e.baseID=t},e}();t.Item=e}(internal||(internal={}));var internal;!function(t){function e(){t.Environment.isSourceHtml()&&(t.exec("GetLocalPropertyAsync","prop:BrowserConfiguration",function(e){var n=JSON.parse(decodeURIComponent(e));if(null===n&&(n={}),void 0===n.configUrl)for(var i=document.getElementsByTagName("meta"),o=i.length-1;o>=0;o--)if("config-url"===i[o].name){n.configUrl=i[o].content,t.exec("SetBrowserProperty","Configuration",JSON.stringify(n));break}}),t.exec("GetLocalPropertyAsync","prop:BrowserConfiguration",function(e){t.Item.setBaseID(decodeURIComponent(e))}))}t.init=e}(internal||(internal={})),internal.init();var xui;!function(t){var e;!function(t){var e=internal.utils,n=internal.App,i=function(){function t(t){this.defaultConsole=!1,this.defaultMultimedia=!1,this.defaultCommunication=!1,t=t||{},this.id=t.id,this.name=t.name,this.adapter=t.adapter,this.adapterdev=t.adapterdev,this.guid=t.guid,this.dataflow=t.dataflow,this.state=t.state,this.defaultConsole=t.defaultConsole,this.defaultMultimedia=t.defaultMultimedia,this.defaultCommunication=t.defaultCommunication,this.level=t.level,this.enable=t.enable,this.hwlevel=t.hwlevel}return t.prototype.getId=function(){return this.id},t.prototype.getName=function(){return this.name},t.prototype.getAdapterName=function(){return this.adapter},t.prototype.getAdapterDescription=function(){return this.adapterdev},t.prototype.getGuid=function(){return this.guid},t.prototype.getDataFlow=function(){return this.dataflow},t.prototype.getState=function(){return this.state},t.prototype.isDefaultConsole=function(){return this.defaultConsole},t.prototype.isDefaultMultimedia=function(){return this.defaultMultimedia},t.prototype.isDefaultCommunication=function(){return this.defaultCommunication},t.prototype.getLevel=function(){return this.level},t.prototype.setLevel=function(t){return this.level=t,this},t.prototype.isEnabled=function(){return this.enable},t.prototype.setEnabled=function(t){return this.enable=t,this},t.prototype.getSystemLevel=function(){return this.hwlevel},t.prototype.setSystemLevel=function(t){return this.hwlevel=t,this},t.prototype.isSystemEnabled=function(){return this.hwenable},t.prototype.setSystemEnabled=function(t){return this.hwenable=t,this},t.prototype.getDelay=function(){return this.delay},t.prototype.setDelay=function(t){return this.delay=t,this},t.prototype.toString=function(){var t=new e.JSON;return t.tag="dev",t.id=this.getId(),t.level=this.getLevel(),t.enable=this.isEnabled()?1:0,t.hwlevel=this.getSystemLevel(),t.hwenable=this.isSystemEnabled()?1:0,t.delay=this.getDelay(),e.XML.parseJSON(t).toString()},t.list=function(e){return e=e||{dataflow:"all",state:"all"},e.dataflow=e.dataflow||"all",e.state=e.state||"all",new Promise(function(i){n.getAsList("wasapienum").then(function(n){var o=[];n.map(function(n){var i=!/^all$/i.test(e.dataflow)&&e.dataflow!==n.dataflow,r=!/^all$/i.test(e.state)&&e.state!==n.state;i||r||o.push(t.parse(n))}),i(o)})})},t.parse=function(e){var n=new t({id:e.id,name:e.name,adapter:e.adapter,adapterdev:e.adapterdev,dataflow:e.dataflow,state:e.state,guid:e.dsoundguid,defaultCommunication:"1"===e.defaultcommunication,defaultConsole:"1"===e.defaultconsole,defaultMultimedia:"1"===e.defaultmultimedia});return n.setLevel(Number(e.level)).setEnabled("1"===e.enable).setSystemLevel(Number(e.hwlevel)).setSystemEnabled("1"===e.hwenable).setDelay(Number(e.delay)),n},t.STATE_ACTIVE="Active",t.DATAFLOW_RENDER="Render",t.DATAFLOW_CAPTURE="Capture",t}();t.Audio=i}(e=t.system||(t.system={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.App,n=function(){function t(t){void 0!==t&&this.setPid(t)}return t.prototype.getPid=function(){return this.pid},t.prototype.setPid=function(t){this.pid=t;var n=t.toString();this.detail=e.callDll("xsplit.GetProcessDetails",n),this.modules=e.callDll("xsplit.GetProcessModules",n),this.hwnds=e.callDll("xsplit.GetProcessWindowsList",n)},t.prototype.getDetail=function(){return void 0===this.detail?"":this.detail},t.prototype.getHwnds=function(){return""===this.hwnds?[]:this.hwnds.split(",").map(function(t){return Number(t)})},t.prototype.getModules=function(){return void 0===this.modules?[]:this.modules.split(",").filter(function(t){return""!==t})},t}();t.Process=n}(e=t.system||(t.system={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.utils.Rectangle,n=internal.utils.JSON,i=internal.utils.XML,o=function(){function t(){}return t.prototype.getPid=function(){return this.pid},t.prototype.getHandle=function(){return this.handle},t.prototype.getWindowHandle=function(){return this.hwnd},t.prototype.getGapiType=function(){return this.gapitype},t.prototype.getResolution=function(){return e.parse(this.width+","+this.height)},t.prototype.getFlags=function(){return this.flags},t.prototype.getWindowName=function(){return this.wndname},t.prototype.getLastFrameTimestamp=function(){return this.lastframets},t.parse=function(e){var n=new t;return n.pid=void 0!==e.pid?parseInt(e.pid):void 0,n.handle=void 0!==e.handle?parseInt(e.handle):void 0,n.hwnd=void 0!==e.hwnd?parseInt(e.hwnd):void 0,n.gapitype=e.gapitype,n.width=void 0!==e.width?parseInt(e.width):void 0,n.height=void 0!==e.height?parseInt(e.height):void 0,n.flags=e.flags,n.wndname=e.wndname,n.lastframets=void 0!==e.lastframets?parseInt(e.lastframets):void 0,n},t.prototype.toXML=function(){var t=new n;return t.tag="src",t.pid=this.pid,t.handle=this.handle,t.hwnd=this.hwnd,t.gapitype=this.gapitype,t.width=this.width,t.height=this.height,t.flags=this.flags,t.wndname=this.wndname,t.lastframets=this.lastframets,i.parseJSON(t)},t}();t.Game=o}(e=t.system||(t.system={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item,n=internal.utils.Rectangle,i=function(){function t(){}return t.prototype.isKeepAspectRatio=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:keep_ar").then(function(t){n("1"===t)})})},t.prototype.setKeepAspectRatio=function(t){e.attach(this.id,this.viewID),e.set("prop:keep_ar",t?"1":"0")},t.prototype.isPositionLocked=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:lockmove").then(function(t){n("1"===t)})})},t.prototype.setPositionLocked=function(t){e.attach(this.id,this.viewID),e.set("prop:lockmove",t?"1":"0")},t.prototype.isEnhanceResizeEnabled=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:mipmaps").then(function(t){n("1"===t)})})},t.prototype.setEnhanceResizeEnabled=function(t){e.attach(this.id,this.viewID),e.set("prop:mipmaps",t?"1":"0")},t.prototype.isPixelAlignmentEnabled=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:pixalign").then(function(t){n("1"===t)})})},t.prototype.setPixelAlignmentEnabled=function(t){e.attach(this.id,this.viewID),e.set("prop:pixalign",t?"1":"0")},t.prototype.getPosition=function(){var t=this;return new Promise(function(i){e.attach(t.id,t.viewID),e.get("prop:pos").then(function(e){t.position=n.parse(e),i(t.position)})})},t.prototype.setPosition=function(t){e.attach(this.id,this.viewID),this.position=t,e.set("prop:pos",t.toString())},t}();t.ItemLayout=i}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item,n=internal.utils.Color,i=function(){function t(){}return t.prototype.getTransparency=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:alpha").then(function(t){n(Number(t))})})},t.prototype.setTransparency=function(t){e.attach(this.id,this.viewID),t=0>t?0:t>255?255:t,e.set("prop:alpha",String(t))},t.prototype.getBrightness=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:cc_brightness").then(function(t){n(Number(t))})})},t.prototype.setBrightness=function(t){e.attach(this.id,this.viewID),t=-100>t?-100:t>100?100:t,e.set("prop:cc_brightness",String(t))},t.prototype.getContrast=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:cc_contrast").then(function(t){n(Number(t))})})},t.prototype.setContrast=function(t){e.attach(this.id,this.viewID),t=-100>t?-100:t>100?100:t,e.set("prop:cc_contrast",String(t))},t.prototype.getHue=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:cc_hue").then(function(t){n(Number(t))})})},t.prototype.setHue=function(t){e.attach(this.id,this.viewID),t=-180>t?-180:t>180?180:t,e.set("prop:cc_hue",String(t))},t.prototype.getSaturation=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:cc_saturation").then(function(t){n(Number(t))})})},t.prototype.setSaturation=function(t){e.attach(this.id,this.viewID),t=-100>t?-100:t>100?100:t,e.set("prop:cc_saturation",String(t))},t.prototype.getBorderColor=function(){var t=this;return new Promise(function(i){e.attach(t.id,t.viewID),e.get("prop:border").then(function(t){var e=Number(t)-2147483648,o=new n;o.setIbgr(e),i(o)})})},t.prototype.setBorderColor=function(t){e.attach(this.id,this.viewID),e.set("prop:border",String(t.getIbgr()-2147483648))},t}();t.ItemColor=i}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item,n=function(){function t(){}return t.prototype.getVolume=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:volume").then(function(t){n(Number(t))})})},t.prototype.setVolume=function(t){e.attach(this.id,this.viewID),t=0>t?0:t>100?100:t,e.set("prop:volume",String(t))},t.prototype.isMuted=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:mute").then(function(t){n("1"===t)})})},t.prototype.setMuted=function(t){e.attach(this.id,this.viewID),e.set("prop:mute",t?"1":"0")},t}();t.ItemAudio=n}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item,n=function(){function t(){}return t.prototype.isWindowTracking=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:ScrCapTrackWindowTitle").then(function(t){n("0"===t)})})},t.prototype.setWindowTracking=function(t){e.attach(this.id,this.viewID),e.set("prop:ScrCapTrackWindowTitle",t?"0":"1")},t}();t.ItemWindow=n}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item,n=function(){function t(){}return t.prototype.getCuePoints=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:CuePoints").then(function(t){var e,i;e=t.split(","),i=e.map(function(t){return Number(t)/10}),n(i)})})},t}();t.ItemVideo=n}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item,n=internal.utils.Color;!function(t){t[t.KEY=0]="KEY",t[t.COLOR=1]="COLOR",t[t.RGB=2]="RGB"}(t.ChromaTypes||(t.ChromaTypes={}));t.ChromaTypes;!function(t){t[t.RED=0]="RED",t[t.GREEN=1]="GREEN",t[t.BLUE=2]="BLUE"}(t.ChromaPrimaryColors||(t.ChromaPrimaryColors={}));t.ChromaPrimaryColors;!function(t){t[t.NONE=0]="NONE",t[t.LOW=1]="LOW",t[t.HIGH=2]="HIGH"}(t.ChromaAntiAlias||(t.ChromaAntiAlias={}));var i=(t.ChromaAntiAlias,function(){function t(){}return t.prototype.isChromaEnabled=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:key_chromakey").then(function(t){n("1"===t)})})},t.prototype.setChromaEnabled=function(t){e.attach(this.id,this.viewID),e.set("prop:key_chromakey",t?"1":"0")},t.prototype.getChromaBrightness=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:key_chromabr").then(function(t){n(Number(t))})})},t.prototype.setChromaBrightness=function(t){e.attach(this.id,this.viewID),t=0>t?0:t>255?255:t,e.set("prop:key_chromabr",String(t))},t.prototype.getChromaSaturation=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:key_chromasat").then(function(t){n(Number(t))})})},t.prototype.setChromaSaturation=function(t){e.attach(this.id,this.viewID),t=0>t?0:t>255?255:t,e.set("prop:key_chromasat",String(t))},t.prototype.getChromaHue=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:key_chromahue").then(function(t){n(Number(t))})})},t.prototype.setChromaHue=function(t){e.attach(this.id,this.viewID),t=-180>t?-180:t>180?180:t,e.set("prop:key_chromahue",String(t))},t.prototype.getChromaType=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:key_chromakeytype").then(function(t){n(Number(t))})})},t.prototype.setChromaType=function(t){e.attach(this.id,this.viewID),t=0>t?0:t>2?2:t,e.set("prop:key_chromakeytype",String(t))},t.prototype.getChromaColor=function(){var t=this;return new Promise(function(i){e.attach(t.id,t.viewID),e.get("prop:key_colorrgb").then(function(t){var e=new n;e.setBgr(t),i(e)})})},t.prototype.setChromaColor=function(t){e.attach(this.id,this.viewID),e.set("prop:key_colorrgb",t.getBgr())},t.prototype.getChromaPrimaryColor=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:key_chromargbkeyprimary").then(function(t){n(Number(t))})})},t.prototype.setChromaPrimaryColor=function(t){e.attach(this.id,this.viewID),t=0>t?0:t>2?2:t,e.set("prop:key_chromargbkeyprimary",String(t))},t.prototype.getChromaBalance=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:key_chromargbkeybalance").then(function(t){n(Number(t))})})},t.prototype.setChromaBalance=function(t){e.attach(this.id,this.viewID),t=0>t?0:t>255?255:t,e.set("prop:key_chromargbkeybalance",String(t))},t.prototype.getChromaAntiAlias=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:key_antialiasing").then(function(t){n(Number(t))})})},t.prototype.setChromaAntiAlias=function(t){e.attach(this.id,this.viewID),t=0>t?0:t>2?2:t,e.set("prop:key_antialiasing",String(t))},t.prototype.getChromaThreshold=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:key_chromarang").then(function(t){n(Number(t))})})},t.prototype.setChromaThreshold=function(t){e.attach(this.id,this.viewID),t=0>t?0:t>255?255:t,e.set("prop:key_chromarang",String(t))},t.prototype.getChromaThresholdAA=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:key_chromaranga").then(function(t){n(Number(t))})})},t.prototype.setChromaThresholdAA=function(t){e.attach(this.id,this.viewID),t=0>t?0:t>255?255:t,e.set("prop:key_chromaranga",String(t))},t}());t.ItemChroma=i}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item;!function(t){t[t.NOTHING=0]="NOTHING",t[t.REWIND=1]="REWIND",t[t.LOOP=2]="LOOP",t[t.HIDE=3]="HIDE"}(t.PlaybackEndAction||(t.PlaybackEndAction={}));var n=(t.PlaybackEndAction,function(){function t(){}return t.prototype.getPlaybackStartPos=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:InPoint").then(function(t){n(Number(t)/10)})})},t.prototype.setPlaybackStartPos=function(t){e.attach(this.id,this.viewID),t=0>t?0:t,e.set("prop:InPoint",String(10*t))},t.prototype.getPlaybackEndPos=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:OutPoint").then(function(t){n(Number(t)/10)})})},t.prototype.setPlaybackEndPos=function(t){e.attach(this.id,this.viewID),t=0>t?0:t,e.set("prop:OutPoint",String(10*t))},t.prototype.getPlaybackEndAction=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:OpWhenFinished").then(function(t){n(Number(t))})})},t.prototype.setPlaybackEndAction=function(t){e.attach(this.id,this.viewID),e.set("prop:OpWhenFinished",String(t))},t.prototype.getPlaybackDuration=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("sync:duration").then(function(t){n(Number(t))})})},t.prototype.setPlaybackDuration=function(t){e.attach(this.id,this.viewID),e.set("sync:duration",String(t))},t}());t.ItemPlayback=n}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){function e(t,e){e.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(n){"constructor"!==n&&(t.prototype[n]=e.prototype[n])})})}var n=internal.Item,i=internal.utils.JSON,o=internal.utils.XML;!function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t.FILE=1]="FILE",t[t.LIVE=2]="LIVE",t[t.TEXT=3]="TEXT",t[t.BITMAP=4]="BITMAP",t[t.SCREEN=5]="SCREEN",t[t.FLASHFILE=6]="FLASHFILE",t[t.GAMESOURCE=7]="GAMESOURCE",t[t.HTML=8]="HTML"}(t.ItemTypes||(t.ItemTypes={}));var r=t.ItemTypes,s=function(){function t(t){t=t?t:{},this.name=t.name,this.id=t.id,this.sceneID=t.sceneID,this.viewID=t.viewID,this.value=t.value,this.keepLoaded=t.keeploaded}return t.prototype.setName=function(t){n.attach(this.id,this.viewID),this.name=t,n.set("prop:name",this.name)},t.prototype.getName=function(){var t=this;return new Promise(function(e){n.attach(t.id,t.viewID),n.get("prop:name").then(function(n){t.name=n,e(n)})})},t.prototype.getValue=function(){var t=this;return new Promise(function(e){n.attach(t.id,t.viewID),n.get("prop:item").then(function(n){n="null"===n?"":n,t.value=i.parse(n),e(t.value)})})},t.prototype.setValue=function(t){n.attach(this.id,this.viewID);var e="string"==typeof t?t:o.parseJSON(t).toString();this.value=i.parse(e),n.set("prop:item",e)},t.prototype.getKeepLoaded=function(){var t=this;return new Promise(function(e){n.attach(t.id,t.viewID),n.get("prop:keeploaded").then(function(n){t.keepLoaded="1"===n,e(t.keepLoaded)})})},t.prototype.setKeepLoaded=function(t){n.attach(this.id,this.viewID),this.keepLoaded=t,n.set("prop:keeploaded",this.keepLoaded?"1":"0")},t.prototype.getType=function(){var t=this;return new Promise(function(e){n.attach(t.id,t.viewID),n.get("prop:type").then(function(n){t.type=r[r[Number(n)]],e(t.type)})})},t.prototype.getID=function(){var t=this;return new Promise(function(e){n.attach(t.id,t.viewID),n.get("prop:id").then(function(n){t.id=n,e(t.id)})})},t.prototype.getSceneID=function(){var t=this;return new Promise(function(e){e(t.sceneID)})},t.prototype.getViewID=function(){var t=this;return new Promise(function(e){e(t.viewID)})},t.prototype.toXML=function(){var t;return t.tag="item",t.pos_left=this.position.getLeft()||.25,t.pos_top=this.position.getTop()||.25,t.pos_right=this.position.getRight()||.25,t.pos_bottom=this.position.getBottom()||.25,t.name=this.name,t.item=this.value,t.type=this.type,o.parseJSON(t)},t}();t.Item=s,e(s,[t.ItemLayout,t.ItemColor,t.ItemAudio,t.ItemWindow,t.ItemVideo,t.ItemChroma,t.ItemPlayback])}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(e){var n=internal.App,i=t.core.Item,o=function(){function t(t){this.id=t.id,this.viewID=t.viewID}return t.prototype.getID=function(){return this.id},t.prototype.getViewID=function(){return this.viewID},t.prototype.getItems=function(){var t=this;return new Promise(function(e){n.getAsList("presetconfig:"+t.id).then(function(n){var o=[];if(Array.isArray(n))for(var r=0;r<n.length;r++){n[r].sceneID=t.id,n[r].viewID=parseInt(t.viewID);var s=new i(n[r]);o.push(s)}e(o)})})},t.prototype.isEmpty=function(){var t=this;return new Promise(function(e){n.get("presetisempty:"+t.id).then(function(t){e("1"===t)})})},t.prototype.getName=function(){var t=this;return new Promise(function(e){n.get("presetname:"+t.id).then(function(t){e(t)})})},t}();e.Scene=o}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(e){var n,i=internal.App,o=t.core.Scene;!function(t){t[t.MAIN=0]="MAIN",t[t.PREVIEW=1]="PREVIEW"}(n||(n={}));var r=function(){function t(t){this.id=t||0}return t.prototype.getViewID=function(){return this.id},t.prototype.getScenes=function(){var t=this;return new Promise(function(e){i.get("presetcount").then(function(n){for(var i=[],r=parseInt(n)-1;r>=0;r--)i.unshift(new o({id:r,viewID:t.id}));e(i)})})},t.prototype.getScenesCount=function(){return new Promise(function(t){i.get("presetcount").then(function(e){t(e)})})},t.prototype.setActiveScene=function(t){"object"==typeof t?i.set("preset",t.getID().toString()):"number"==typeof t&&i.set("preset",t.toString())},t.prototype.getActiveScene=function(){var t=this;return new Promise(function(e){i.get("preset:"+t.id).then(function(n){var i=new o({id:n,viewID:t.id});e(i)})})},t.prototype.getScene=function(t){var e=this;return new Promise(function(n){n(new o({id:t,viewID:e.id}))})},t.MAIN=new t(n.MAIN),t.PREVIEW=new t(n.PREVIEW),t}();e.View=r}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(e){var n=t.core.Scene,i=function(){function t(t){this.currentScene=new n({id:t.currentScene,viewID:"1"}),this.version=t.version,this.sceneDetails=t.placements,this.global=t.global}return t.prototype.toXML=function(){},t}();e.Presentation=i}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(e){function n(t){return new Promise(function(e){s.getAsList("presetconfig:"+t.getID()).then(function(e){return t.items=e,t}).then(function(t){t.getName().then(function(n){t.name=n,e(t)})})})}function i(){return new Promise(function(t){s.getAsList("presetconfig").then(function(e){t(e[e.length-1])})})}var o=internal.utils.Rectangle,r=t.system.Audio,s=internal.App,a=internal.utils.JSON,u=internal.utils.XML,c=t.core.Presentation,h=t.core.View,p=function(){function t(){}return t.callDll=function(){return s.callDll.apply(this,arguments)},t.getFrametime=function(){return new Promise(function(t){s.get("frametime").then(function(e){t(e)})})},t.getResolution=function(){return new Promise(function(t){s.get("resolution").then(function(e){t(o.parse(e))})})},t.getViewport=function(){return new Promise(function(t){s.get("viewport").then(function(e){t(o.parse(e))})})},t.getVersion=function(){return new Promise(function(t){t(s.get("version"))})},t.getFramesRendered=function(){return new Promise(function(t){t(s.get("version"))})},t.getAudioDevices=function(){return new Promise(function(t){s.getAsList("microphonedev2").then(function(e){t(e.map(function(t){return r.parse(t)}))})})},t.setAudioDevices=function(t){var e="";if(Array.isArray(t))for(var n=0;n<t.length;++n)e+=t[n].toString();e="<devices>"+e+"</devices>",s.set("microphonedev2",e)},t.getAudioGain=function(){return new Promise(function(t){s.get("microphonegain").then(function(e){t(a.parse(e))})})},t.setAudioGain=function(t){t.tag="configuration",s.set("microphonegain",u.parseJSON(t).toString())},t.newDialog=function(t){void 0!==t&&""!==t&&s.callFunc("newdialog",t)},t.newAutoDialog=function(t){void 0!==t&&""!==t&&s.callFunc("newautodialog",t)},t.closeDialog=function(t,e){internal.exec("CloseDialog")},t.resizeSelf=function(t,e){s.postMessage(s.POSTMESSAGE_SIZE,t,e)},t.closeSelf=function(){s.postMessage(s.POSTMESSAGE_CLOSE)},t.getTransition=function(){return new Promise(function(t){s.get("transitionid").then(function(e){t(e)})})},t.setTransition=function(t){s.set("transitionid",t)},t.getTransitionTime=function(){return new Promise(function(t){s.get("transitiontime").then(function(e){t(Number(e))})})},t.setTransitionTime=function(t){s.set("transitiontime",t.toString())},t.getCurrentPresentation=function(){
return new Promise(function(e){var o,r,s,a,u;h.MAIN.getActiveScene().then(function(e){return o=e,t.getVersion()}).then(function(t){return r=t,h.MAIN.getScenes()}).then(function(t){return Promise.all(t.map(function(t,e,i){return e!==i.length-1?n(t):Promise.resolve(t)}))}).then(function(t){return a=t,i()}).then(function(t){u=t,s=new c({currentScene:o.getID(),version:r,placements:a,global:u}),e(s)})})},t.TRANSITION_CLOCK="clock",t.TRANSITION_COLLAPSE="collapse",t.TRANSITION_MOVE_BOTTOM="move_bottom",t.TRANSITION_MOVE_LEFT="move_left",t.TRANSITION_MOVE_LEFT_RIGHT="move_left_right",t.TRANSITION_MOVE_RIGHT="move_right",t.TRANSITION_MOVE_TOP="move_top",t.TRANSITION_FAN="fan",t.TRANSITION_HOLE="hole",t.TRANSITION_WAVE="wave",t}();e.App=p}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.App,n=function(){function t(t){this.name=t.name,this.stat=t.stat,this.channel=t.channel}return t.prototype.getStreamDrops=function(){var t=this;return new Promise(function(n){e.get("streamdrops:"+t.name).then(function(t){var e=t.split(","),i=Number(e[0])||0,o=Number(e[1])||0;n({dropped:i,rendered:o})})})},t.prototype.getStreamTime=function(){var t=this;return new Promise(function(n){e.get("streamtime:"+t.name).then(function(t){var e=Number(t)/10;n(e)})})},t}();t.Channel=n}(e=t.core||(t.core={}))}(xui||(xui={})),function(){"use strict";function t(){}function e(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function n(t){return function(){return this[t].apply(this,arguments)}}var i=t.prototype,o=this,r=o.EventEmitter;i.getListeners=function(t){var e,n,i=this._getEvents();if(t instanceof RegExp){e={};for(n in i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n])}else e=i[t]||(i[t]=[]);return e},i.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},i.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},i.addListener=function(t,n){var i,o=this.getListenersAsObject(t),r="object"==typeof n;for(i in o)o.hasOwnProperty(i)&&-1===e(o[i],n)&&o[i].push(r?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,n){var i,o,r=this.getListenersAsObject(t);for(o in r)r.hasOwnProperty(o)&&(i=e(r[o],n),-1!==i&&r[o].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,n){var i,o,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)r.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(o=e[i])&&("function"==typeof o?r.call(this,i,o):s.call(this,i,o));return this},i.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if(t instanceof RegExp)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(t,e){var n,i,o,r,s=this.getListenersAsObject(t);for(o in s)if(s.hasOwnProperty(o))for(i=s[o].length;i--;)n=s[o][i],n.once===!0&&this.removeListener(t,n.listener),r=n.listener.apply(this,e||[]),r===this._getOnceReturnValue()&&this.removeListener(t,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},i.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return o.EventEmitter=r,t},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:o.EventEmitter=t}.call(this),function(){"use strict";var t,e=function(){window.addEventListener("message",function(t){try{var e=JSON.parse(t.data)}catch(n){return}switch(e.event){case"set-language":case"set-selected-tab":this.emit(e.event,e.value);break;case"async-callback":this.emit(e.event,{asyncId:e.value.asyncId,result:e.value.result});break;case"config-load":this.emit(e.event)}}.bind(this)),t=this};e.prototype=Object.create(EventEmitter.prototype),e.getInstance=function(){return void 0===t&&(t=new e),t},e.RenderMode={HIDDEN:"hidden",EMBEDDED:"embedded",FULLSCREEN:"full"},e.prototype._notify=function(t){window.parent.postMessage(JSON.stringify(t),"*")},e.prototype.setRenderMode=function(t){this._notify({event:"set-mode",value:t})},e.prototype.setTabOrder=function(t){this._notify({event:"set-tab-order",value:JSON.stringify(t)})},e.prototype.declareCustomTabs=function(t){this._notify({event:"set-custom-tabs",value:JSON.stringify(t)})},e.prototype.resizeConfig=function(t,e){internal.exec("SetDialogSize",t,e),this._notify({event:"resize",value:JSON.stringify({width:t,height:e})})},e.prototype.closeConfig=function(){internal.exec("Close")},void 0===window.xui&&(window.xui={}),void 0===window.xui.config&&(window.xui.config={}),window.xui.config.ConfigWindow=e,window.addEventListener("load",function(){window.xui.config.ConfigWindow.getInstance()._notify({event:"load"})}),delete window.EventEmitter}();