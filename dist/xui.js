var internal;!function(e){var t;!function(e){var t=function(){function e(e){e.rgb&&this.setRgb(e.rgb),e.irgb&&this.setIrgb(e.irgb),e.bgr&&this.setBgr(e.bgr),e.ibgr&&this.setIbgr(e.ibgr)}return e.prototype.getRgb=function(){return this.rgb},e.prototype.setRgb=function(e){this.rgb=e.replace(/^#/,""),this.irgb=parseInt(this.rgb,16),this.bgr=[this.rgb.substring(4,6),this.rgb.substring(2,4),this.rgb.substring(0,2)].join(""),this.ibgr=parseInt(this.bgr,16)},e.prototype.getBgr=function(){return this.bgr},e.prototype.setBgr=function(e){this.setRgb([e.substring(4,6),e.substring(2,4),e.substring(0,2)].join(""))},e.prototype.getIrgb=function(){return this.irgb},e.prototype.setIrgb=function(e){for(var t=e.toString(16);t.length<6;)t="0"+t;this.setRgb(t)},e.prototype.getIbgr=function(){return this.ibgr},e.prototype.setIbgr=function(e){for(var t=e.toString(16);t.length<6;)t="0"+t;this.setBgr(t)},e}();e.Color=t}(t=e.utils||(e.utils={}))}(internal||(internal={}));var internal;!function(e){var t;!function(e){var t=function(){function e(e){this.setX(e.x),this.setY(e.y),this.setZ(e.z)}return e.prototype.getX=function(){return this.x},e.prototype.setX=function(e){this.x=e},e.prototype.getY=function(){return this.y},e.prototype.setY=function(e){this.y=e},e.prototype.getZ=function(){return this.z},e.prototype.setZ=function(e){this.z=e},e}();e.Point=t}(t=e.utils||(e.utils={}))}(internal||(internal={}));var internal;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.getTop=function(){return this.top},e.prototype.setTop=function(e){this.top=e,void 0!==this.bottom?this.setHeight(Math.abs(this.top-this.bottom)):void 0!==this.height&&this.setBottom(this.top+this.height)},e.prototype.getLeft=function(){return this.left},e.prototype.setLeft=function(e){this.left=e,void 0!==this.right?this.setWidth(Math.abs(this.right-this.left)):void 0!==this.width&&this.setRight(this.left+this.width)},e.prototype.getRight=function(){return this.right},e.prototype.setRight=function(e){this.right=e,void 0!==this.left?this.setWidth(Math.abs(this.right-this.left)):void 0!==this.width&&this.setLeft(this.right-this.width)},e.prototype.getBottom=function(){return this.bottom},e.prototype.setBottom=function(e){this.bottom=e,void 0!==this.top?this.setHeight(Math.abs(this.top-this.bottom)):void 0!==this.height&&this.setTop(this.bottom-this.height)},e.prototype.getWidth=function(){return this.width},e.prototype.setWidth=function(e){this.width=e,void 0!==this.right?this.setLeft(this.right-this.width):void 0!==this.left&&this.setRight(this.left+this.width)},e.prototype.getHeight=function(){return this.height},e.prototype.setHeight=function(e){this.height=e,void 0!==this.top?this.setBottom(this.top+this.height):void 0!==this.bottom&&this.setTop(this.bottom-this.height)},e.parse=function(t){var n=t.split(","),i=new e;return 4===n.length&&(i.setTop(Number(n[0])),i.setLeft(Number(n[1])),i.setRight(Number(n[2])),i.setBottom(Number(n[3]))),2===n.length&&(i.setWidth(Number(n[0])),i.setHeight(Number(n[1]))),i},e.prototype.toString=function(e){var t=e||":left,:top,:right,:bottom";return t=t.replace(":left",String(this.left)),t=t.replace(":top",String(this.top)),t=t.replace(":right",String(this.right)),t=t.replace(":bottom",String(this.bottom)),t=t.replace(":width",String(this.width)),t=t.replace(":height",String(this.height))},e}();e.Rectangle=t}(t=e.utils||(e.utils={}))}(internal||(internal={}));var internal;!function(e){var t;!function(e){var t=function(){function e(e){this.callbacks=e}return e.prototype.next=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(this.callbacks.length>0){var n=this.callbacks.shift();e.unshift(this.next.bind(this)),n.apply(this,e)}},e.sync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var i=new e(t);return i.next(),i},e}();e.Thread=t}(t=e.utils||(e.utils={}))}(internal||(internal={}));var internal;!function(e){var t;!function(e){var t=function(){function e(t){var n="";void 0===t.value&&(t.value="");for(var i in t)e.RESERVED_ATTRIBUTES.test(i)||void 0===t[i]||(n+=[" ",i,"='",t[i],"'"].join(""));void 0===t.children&&(t.children=[]);for(var r=0,o=t.children;r<o.length;r++){var a=o[r];t.value+=new e(a).toString()}this.xml=["<",t.tag,n,">",t.value,"</",t.tag,">"].join("")}return e.prototype.toString=function(){return this.xml},e.parseJSON=function(t){return new e(t)},e.encode=function(e){return e.replace(/[&<>'']/g,function(e){return"&"+{"&":"amp","<":"lt",">":"gt","'":"quot",'"':"#39"}[e]+";"})},e.RESERVED_ATTRIBUTES=/^(children|tag|value)$/i,e}();e.XML=t}(t=e.utils||(e.utils={}))}(internal||(internal={}));var internal;!function(e){var t;!function(e){var t=function(){function t(n){if(void 0!==n&&""!==n){var i=n;n instanceof e.XML&&(i=n.toString()),i=i.replace(/<([^\s>]+)([^>]+)\/>/g,function(e,t,n){return["<",t,n,"></",t,">"].join("")});var r=document.createElement("div");r.innerHTML=i;var o=function a(e){var n=new t;n.tag=e.tagName.toLowerCase();for(var i=0;i<e.attributes.length;i++){var r=e.attributes[i];n[r.name]=r.value}n.children=[];for(var o=0;o<e.childNodes.length;o++){var s=e.childNodes[o];s instanceof HTMLElement&&n.children.push(a(s))}return void 0===n.value&&0===n.children.length&&(delete n.children,n.value=e.textContent),n}(r);return o=o.children[0]}}return t.parse=function(e){return new t(e)},t}();e.JSON=t}(t=e.utils||(e.utils={}))}(internal||(internal={}));var internal;!function(e){var t;!function(e){function t(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(n){"constructor"!==n&&(e.prototype[n]=t.prototype[n])})})}e.applyMixins=t}(t=e.utils||(e.utils={}))}(internal||(internal={}));var internal;!function(e){function t(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var r=null,o=!1;return t.length>0&&(r=t[t.length-1],r instanceof Function?t.pop():r=null),console.log(['internal.exec("',e,'") ',JSON.stringify(t)].join(" ")),window.external&&window.external[e]&&window.external[e]instanceof Function&&(o=window.external[e].apply(this,t)),null!==r&&(n[o]=r),o}var n={};e.exec=t,window.OnAsyncCallback=function(e,t){var i=n[e];i instanceof Function&&i.call(this,decodeURIComponent(t))},window.OnSceneLoad=function(e,t){document.dispatchEvent(new CustomEvent("scene-load",{detail:{view:e,scene:t}}))},window.SetConfiguration=function(e){document.dispatchEvent(new CustomEvent("set-configuration",{config:e}))},window.SetBackGroundColor=function(e){document.dispatchEvent(new CustomEvent("set-background-color",{color:e}))},window.SetVolume=function(e){document.dispatchEvent(new CustomEvent("set-volume",{volume:e}))},window.OnDialogResult=function(e){document.dispatchEvent(new CustomEvent("dialog-result",{detail:{result:e}}))}}(internal||(internal={}));var internal;!function(e){var t=function(){function e(){}return e.initialize=function(){e._initialized||(e._isHtml=window.external&&void 0!==window.external.GetConfiguration,e._isConfig=window.external&&void 0===window.external.GetConfiguration&&void 0!==window.external.GetViewId&&void 0!==window.external.GetViewId(),e._isScript=window.external&&void 0===window.external.GetConfiguration&&void 0!==window.external.GetViewId&&void 0===window.external.GetViewId(),e._initialized=!0)},e.isSourceHtml=function(){return e._isHtml},e.isSourceConfig=function(){return e._isConfig},e.isScriptPlugin=function(){return e._isScript},e}();e.Environment=t,t.initialize()}(internal||(internal={}));var internal;!function(e){var t=e.utils,n=function(){function n(){}return n.get=function(t){return new Promise(function(n){e.exec("AppGetPropertyAsync",t,n)})},n.getAsList=function(e){return new Promise(function(i){n.get(e).then(function(e){var n=t.JSON.parse(e),r=[];n.children&&n.children.length>0&&(r=n.children),i(r)})})},n.getGlobalProperty=function(t){return e.exec("GetGlobalProperty",t)},n.set=function(t,n){return new Promise(function(i){e.exec("AppSetPropertyAsync",t,n,function(e){i("0"===e?!1:!0)})})},n.callDll=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=[].slice.call(arguments);return r.unshift("CallDll"),e.exec.apply(this,r)},n.callFunc=function(t,n){return new Promise(function(i){e.exec("AppCallFuncAsync",t,n,function(e){i(e)})})},n.postMessage=function(t){for(var n=this,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return new Promise(function(r){i.unshift(t),i.unshift("PostMessageToParent"),i.push(function(e){r(e)}),e.exec.apply(n,i)})},n.POSTMESSAGE_CLOSE="1",n.POSTMESSAGE_SIZE="2",n}();e.App=n}(internal||(internal={}));var internal;!function(e){var t=function(){function t(e){var e=e||{};this.name=e.name,this.value=e.item,this.id=e.id,this.sceneID=e.sceneID,this.viewID=e.viewID}return t.attach=function(n,i){return e.Environment.isScriptPlugin()?t.cacheItemID(n):t.cacheItemID(n,i)},t.cacheItemID=function(n,i){var r=t.itemSlotMap.indexOf(n);return-1===r&&(r=++t.lastSlot%t.MAX_SLOTS,t.islockedSourceSlot&&0===r&&++r,t.lastSlot=r,t.itemSlotMap[r]=n,void 0===i?e.exec("SearchVideoItem"+("0"===String(r)?"":r+1),n):e.exec("AttachVideoItem"+("0"===String(r)?"":r+1),n,String(i))),r},t.lockSourceSlot=function(e){void 0!==e?(t.islockedSourceSlot=!0,t.itemSlotMap[0]=e):(t.islockedSourceSlot=!1,t.itemSlotMap[0]="")},t.get=function(t,n){return void 0===n&&(n=0),new Promise(function(i){e.exec("GetLocalPropertyAsync"+("0"===String(n)?"":n+1),t,function(e){i(e)})})},t.set=function(t,n,i){void 0===i&&(i=0),e.exec("SetLocalPropertyAsync"+("0"===String(i)?"":i+1),t,n)},t.callFunc=function(t,n){e.exec("CallInner",t,n)},t.setBaseID=function(e){t.baseID=e},t.getBaseID=function(){return t.baseID},t.MAX_SLOTS=2,t.lastSlot=t.MAX_SLOTS-1,t.itemSlotMap=[],t.islockedSourceSlot=!1,t}();e.Item=t}(internal||(internal={}));var internal;!function(e){function t(e){window.internal.persistConfig=e}function n(){return new Promise(function(n){e.Environment.isSourceHtml()?e.exec("GetLocalPropertyAsync","prop:BrowserConfiguration",function(i){var r=JSON.parse(decodeURIComponent(i));if(null===r&&(r={}),void 0===r.configUrl)for(var o=document.getElementsByTagName("meta"),a=o.length-1;a>=0;a--)if("config-url"===o[a].name){r.configUrl=o[a].content,e.exec("SetBrowserProperty","Configuration",JSON.stringify(r)),t(r);break}n()}):n()})}function i(){return new Promise(function(t){e.Environment.isSourceHtml()||e.Environment.isSourceConfig()?e.exec("GetLocalPropertyAsync","prop:id",function(n){var i=decodeURIComponent(n);e.Item.setBaseID(i),e.Environment.isSourceHtml()&&e.Item.lockSourceSlot(i),t()}):t()})}function r(){var t=e.initPromises=[];t.push(n()),t.push(i())}e.persistConfig=t,e.init=r}(internal||(internal={})),internal.init();var xui;!function(e){var t;!function(e){var t=internal.utils,n=internal.App,i=function(){function e(e){this.defaultConsole=!1,this.defaultMultimedia=!1,this.defaultCommunication=!1,e=e||{},this.id=e.id,this.name=e.name,this.adapter=e.adapter,this.adapterdev=e.adapterdev,this.guid=e.guid,this.dataflow=e.dataflow,this.state=e.state,this.defaultConsole=e.defaultConsole,this.defaultMultimedia=e.defaultMultimedia,this.defaultCommunication=e.defaultCommunication,this.level=e.level,this.enable=e.enable,this.hwlevel=e.hwlevel}return e.prototype.getId=function(){return this.id},e.prototype.getName=function(){return this.name},e.prototype.getAdapterName=function(){return this.adapter},e.prototype.getAdapterDescription=function(){return this.adapterdev},e.prototype.getGuid=function(){return this.guid},e.prototype.getDataFlow=function(){return this.dataflow},e.prototype.getState=function(){return this.state},e.prototype.isDefaultConsole=function(){return this.defaultConsole},e.prototype.isDefaultMultimedia=function(){return this.defaultMultimedia},e.prototype.isDefaultCommunication=function(){return this.defaultCommunication},e.prototype.getLevel=function(){return this.level},e.prototype.setLevel=function(e){return this.level=e,this},e.prototype.isEnabled=function(){return this.enable},e.prototype.setEnabled=function(e){return this.enable=e,this},e.prototype.getSystemLevel=function(){return this.hwlevel},e.prototype.setSystemLevel=function(e){return this.hwlevel=e,this},e.prototype.isSystemEnabled=function(){return this.hwenable},e.prototype.setSystemEnabled=function(e){return this.hwenable=e,this},e.prototype.getDelay=function(){return this.delay},e.prototype.setDelay=function(e){return this.delay=e,this},e.prototype.toString=function(){var e=new t.JSON;return e.tag="dev",e.id=this.getId(),e.level=this.getLevel(),e.enable=this.isEnabled()?1:0,e.hwlevel=this.getSystemLevel(),e.hwenable=this.isSystemEnabled()?1:0,e.delay=this.getDelay(),t.XML.parseJSON(e).toString()},e.list=function(t){return t=t||{dataflow:"all",state:"all"},t.dataflow=t.dataflow||"all",t.state=t.state||"all",new Promise(function(i){n.getAsList("wasapienum").then(function(n){var r=[];n.map(function(n){var i=!/^all$/i.test(t.dataflow)&&t.dataflow!==n.dataflow,o=!/^all$/i.test(t.state)&&t.state!==n.state;i||o||r.push(e.parse(n))}),i(r)})})},e.parse=function(t){var n=new e({id:t.id,name:t.name,adapter:t.adapter,adapterdev:t.adapterdev,dataflow:t.dataflow,state:t.state,guid:t.dsoundguid,defaultCommunication:"1"===t.defaultcommunication,defaultConsole:"1"===t.defaultconsole,defaultMultimedia:"1"===t.defaultmultimedia});return n.setLevel(Number(t.level)).setEnabled("1"===t.enable).setSystemLevel(Number(t.hwlevel)).setSystemEnabled("1"===t.hwenable).setDelay(Number(t.delay)),n},e.STATE_ACTIVE="Active",e.DATAFLOW_RENDER="Render",e.DATAFLOW_CAPTURE="Capture",e}();e.AudioDevice=i}(t=e.system||(e.system={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=internal.utils.JSON,n=internal.utils.XML,i=function(){function e(e){e=e||{},this.name=e.name,this.disp=e.disp}return e.parse=function(t){var n=new e({name:t.name,disp:t.disp});return n},e.prototype.toXML=function(){var e=new t;return e.tag="dev",e.name=this.name,e.disp=this.disp,n.parseJSON(e)},e}();e.VideoDevice=i}(t=e.system||(e.system={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=internal.App,n=function(){function e(e){void 0!==e&&this.setPid(e)}return e.prototype.getPid=function(){return this.pid},e.prototype.setPid=function(e){this.pid=e;var n=e.toString();this.detail=t.callDll("xsplit.GetProcessDetails",n),this.modules=t.callDll("xsplit.GetProcessModules",n),this.hwnds=t.callDll("xsplit.GetProcessWindowsList",n)},e.prototype.getDetail=function(){return void 0===this.detail?"":this.detail},e.prototype.getHwnds=function(){return""===this.hwnds?[]:this.hwnds.split(",").map(function(e){return Number(e)})},e.prototype.getModules=function(){return void 0===this.modules?[]:this.modules.split(",").filter(function(e){return""!==e})},e}();e.Process=n}(t=e.system||(e.system={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=internal.utils.Rectangle,n=internal.utils.JSON,i=internal.utils.XML,r=function(){function e(){}return e.prototype.getPid=function(){return this.pid},e.prototype.getHandle=function(){return this.handle},e.prototype.getWindowHandle=function(){return this.hwnd},e.prototype.getGapiType=function(){return this.gapitype},e.prototype.getResolution=function(){return t.parse(this.width+","+this.height)},e.prototype.getFlags=function(){return this.flags},e.prototype.getWindowName=function(){return this.wndname},e.prototype.getLastFrameTimestamp=function(){return this.lastframets},e.parse=function(t){var n=new e;return n.pid=void 0!==t.pid?parseInt(t.pid):void 0,n.handle=void 0!==t.handle?parseInt(t.handle):void 0,n.hwnd=void 0!==t.hwnd?parseInt(t.hwnd):void 0,n.gapitype=t.gapitype,n.width=void 0!==t.width?parseInt(t.width):void 0,n.height=void 0!==t.height?parseInt(t.height):void 0,n.flags=t.flags,n.wndname=t.wndname,n.lastframets=void 0!==t.lastframets?parseInt(t.lastframets):void 0,n},e.prototype.toXML=function(){var e=new n;return e.tag="src",e.pid=this.pid,e.handle=this.handle,e.hwnd=this.hwnd,e.gapitype=this.gapitype,e.width=this.width,e.height=this.height,e.flags=this.flags,e.wndname=this.wndname,e.lastframets=this.lastframets,i.parseJSON(e)},e}();e.Game=r}(t=e.system||(e.system={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=internal.App;!function(e){e[e.HIDE=0]="HIDE",e[e.SHOWNORMAL=1]="SHOWNORMAL",e[e.SHOWMINIMIZED=2]="SHOWMINIMIZED",e[e.MAXIMIZE=3]="MAXIMIZE",e[e.SHOWNOACTIVATE=4]="SHOWNOACTIVATE",e[e.SHOW=5]="SHOW",e[e.MINIMIZE=6]="MINIMIZE",e[e.SHOWMINNOACTIVE=7]="SHOWMINNOACTIVE",e[e.SHOWNA=8]="SHOWNA",e[e.RESTORE=9]="RESTORE"}(e.WindowState||(e.WindowState={}));var n=(e.WindowState,function(){function e(){}return Object.defineProperty(e.prototype,"hwnd",{get:function(){return this._hwnd},set:function(e){this._hwnd=Number(e),this._pid=Number(t.callDll("xsplit.GetWindowProcessId",String(this._hwnd))),this._title=t.callDll("xsplit.GetWindowTitle",String(this._hwnd)),this._state=Number(t.callDll("xsplit.GetWindowState",String(this._hwnd))),this._detail=t.callDll("xsplit.GetProcessDetails",String(this._pid))},enumerable:!0,configurable:!0}),e.prototype.getPID=function(){return this._pid},e.prototype.getTitle=function(){return this._title},e.prototype.getState=function(){return this._state},e.prototype.getDetail=function(){return this._detail},e.parse=function(t){var n=new e;return t.hwnd&&(n.hwnd=t.hwnd),n},e}());e.Window=n}(t=e.system||(e.system={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=function(){function e(e){this.file=e}return e.prototype.toString=function(){return this.file},e}();e.File=t;var n=function(){function e(e){this.url=e}return e.prototype.toString=function(){return this.url},e}();e.URL=n}(t=e.system||(e.system={}))}(xui||(xui={}));var xui;!function(e){var t;!function(t){var n=internal.App,i=e.system.Window;!function(e){e[e.RENDER=1]="RENDER",e[e.CAPTURE=2]="CAPTURE",e[e.ALL=3]="ALL"}(t.AudioDeviceDataflow||(t.AudioDeviceDataflow={}));var r=t.AudioDeviceDataflow;!function(e){e[e.ACTIVE=1]="ACTIVE",e[e.DISABLED=2]="DISABLED",e[e.UNPLUGGED=4]="UNPLUGGED",e[e.NOTPRESENT=8]="NOTPRESENT",e[e.ALL=15]="ALL"}(t.AudioDeviceState||(t.AudioDeviceState={}));var o=t.AudioDeviceState,a=function(){function e(){}return e.getAudioDevices=function(e,i){return void 0===e&&(e=r.ALL),void 0===i&&(i=o.ALL),new Promise(function(a){n.getAsList("wasapienum").then(function(n){var s=[];if(void 0!==n)for(var u=0;u<n.length;u++){var c=n[u],h=o[String(c.state).toUpperCase().replace(/\s+/g,"")];if((h&i)===h){var l=r[String(c.dataflow).toUpperCase()];(l&e)===l&&s.push(t.AudioDevice.parse(c))}}a(s)})})},e.getVideoDevices=function(){return new Promise(function(e){n.getAsList("dshowenum:vsrc").then(function(n){var i=[];if(void 0!==n)for(var r=0;r<n.length;r++)/XSplit/gi.test(n[r].name)||i.push(t.VideoDevice.parse(n[r]));e(i)})})},e.getGames=function(){return new Promise(function(e){n.getAsList("gsenum").then(function(n){var i=[];if(void 0!==n)for(var r=0;r<n.length;r++)i.push(t.Game.parse(n[r]));e(i)})})},e.getProcesses=function(){return new Promise(function(e){for(var i=(n.callDll("xsplit.EnumProcesses")||"").split(","),r=[],o=0;o<i.length;o++)r.push(new t.Process(Number(i[o])));e(r)})},e.getVisibleWindows=function(){return new Promise(function(e){for(var t=(n.callDll("xsplit.EnumParentWindows")||"").split(","),r=[],o=0;o<t.length;o++)r.push(i.parse({hwnd:Number(t[o])}));e(r)})},e.getActiveWindow=function(){return Promise.resolve(i.parse({hwnd:Number(n.callDll("xsplit.GetForegroundWindow"))}))},e}();t.System=a}(t=e.system||(e.system={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=internal.Item,n=internal.utils.JSON,i=internal.utils.XML;!function(e){e[e.UNDEFINED=0]="UNDEFINED",e[e.FILE=1]="FILE",e[e.LIVE=2]="LIVE",e[e.TEXT=3]="TEXT",e[e.BITMAP=4]="BITMAP",e[e.SCREEN=5]="SCREEN",e[e.FLASHFILE=6]="FLASHFILE",e[e.GAMESOURCE=7]="GAMESOURCE",e[e.HTML=8]="HTML"}(e.ItemTypes||(e.ItemTypes={}));var r=e.ItemTypes,o=function(){function e(e){e=e?e:{},this.name=e.name,this.id=e.id,this.sceneID=e.sceneID,this.viewID=e.viewID,this.value=e.value,this.keepLoaded=e.keeploaded}return e.prototype.setName=function(e){var n=t.attach(this.id,this.viewID);this.name=e,t.set("prop:name",this.name,n)},e.prototype.getName=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:name",i).then(function(t){e.name=t,n(t)})})},e.prototype.getValue=function(){var e=this;return new Promise(function(r){var o=t.attach(e.id,e.viewID);t.get("prop:item",o).then(function(t){t="null"===t?"":t,""===t&&(e.value="",r(t));try{e.value=i.parseJSON(n.parse(t)),r(e.value)}catch(o){e.value=t,r(t)}r(e.value)})})},e.prototype.setValue=function(e){var i=t.attach(this.id,this.viewID),r="string"==typeof e?e:e.toString();"string"!=typeof e&&(this.value=n.parse(r)),t.set("prop:item",r,i)},e.prototype.getKeepLoaded=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:keeploaded",i).then(function(t){e.keepLoaded="1"===t,n(e.keepLoaded)})})},e.prototype.setKeepLoaded=function(e){var n=t.attach(this.id,this.viewID);this.keepLoaded=e,t.set("prop:keeploaded",this.keepLoaded?"1":"0",n)},e.prototype.getType=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:type",i).then(function(t){e.type=r[r[Number(t)]],n(e.type)})})},e.prototype.getID=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:id",i).then(function(t){e.id=t,n(e.id)})})},e.prototype.getSceneID=function(){var e=this;return new Promise(function(t){t(Number(e.sceneID)+1)})},e.prototype.getViewID=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:viewid",i).then(function(t){e.viewID=Number(t),n(e.viewID)})})},e.prototype.toXML=function(){var e=new n;return e.tag="item",void 0===this.position?(e.pos_left=e.pos_top=.25,e.pos_right=e.pos_bottom=.75):(e.pos_left=this.position.getLeft()||.25,e.pos_top=this.position.getTop()||.25,e.pos_right=this.position.getRight()||.25,e.pos_bottom=this.position.getBottom()||.25),e.name=this.name,e.item=this.value,e.type=this.type,i.parseJSON(e)},e.getCurrentSource=function(){var n=new e({id:t.getBaseID(),viewID:0});return n},e}();e.Item=o}(t=e.core||(e.core={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=internal.Item,n=internal.utils.Rectangle,i=function(){function e(){}return e.prototype.isKeepAspectRatio=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:keep_ar",i).then(function(e){n("1"===e)})})},e.prototype.setKeepAspectRatio=function(e){var n=t.attach(this.id,this.viewID);t.set("prop:keep_ar",e?"1":"0",n)},e.prototype.isPositionLocked=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:lockmove",i).then(function(e){n("1"===e)})})},e.prototype.setPositionLocked=function(e){var n=t.attach(this.id,this.viewID);t.set("prop:lockmove",e?"1":"0",n)},e.prototype.isEnhanceResizeEnabled=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:mipmaps",i).then(function(e){n("1"===e)})})},e.prototype.setEnhanceResizeEnabled=function(e){var n=t.attach(this.id,this.viewID);t.set("prop:mipmaps",e?"1":"0",n)},e.prototype.isPixelAlignmentEnabled=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:pixalign",i).then(function(e){n("1"===e)})})},e.prototype.setPixelAlignmentEnabled=function(e){var n=t.attach(this.id,this.viewID);t.set("prop:pixalign",e?"1":"0",n)},e.prototype.getPosition=function(){var e=this;return new Promise(function(i){var r=t.attach(e.id,e.viewID);t.get("prop:pos",r).then(function(t){e.position=n.parse(t),i(e.position)})})},e.prototype.setPosition=function(e){var n=t.attach(this.id,this.viewID);this.position=e,t.set("prop:pos",e.toString(),n)},e}();internal.utils.applyMixins(e.Item,[i])}(t=e.core||(e.core={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=internal.Item,n=internal.utils.Color,i=function(){function e(){}return e.prototype.getTransparency=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:alpha",i).then(function(e){n(Number(e))})})},e.prototype.setTransparency=function(e){var n=t.attach(this.id,this.viewID);e=0>e?0:e>255?255:e,t.set("prop:alpha",String(e),n)},e.prototype.getBrightness=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:cc_brightness",i).then(function(e){n(Number(e))})})},e.prototype.setBrightness=function(e){var n=t.attach(this.id,this.viewID);e=-100>e?-100:e>100?100:e,t.set("prop:cc_brightness",String(e),n)},e.prototype.getContrast=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:cc_contrast",i).then(function(e){n(Number(e))})})},e.prototype.setContrast=function(e){var n=t.attach(this.id,this.viewID);e=-100>e?-100:e>100?100:e,t.set("prop:cc_contrast",String(e),n)},e.prototype.getHue=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:cc_hue",i).then(function(e){n(Number(e))})})},e.prototype.setHue=function(e){var n=t.attach(this.id,this.viewID);e=-180>e?-180:e>180?180:e,t.set("prop:cc_hue",String(e),n)},e.prototype.getSaturation=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:cc_saturation",i).then(function(e){n(Number(e))})})},e.prototype.setSaturation=function(e){var n=t.attach(this.id,this.viewID);e=-100>e?-100:e>100?100:e,t.set("prop:cc_saturation",String(e),n)},e.prototype.getBorderColor=function(){var e=this;return new Promise(function(i){var r=t.attach(e.id,e.viewID);t.get("prop:border",r).then(function(e){var t=Number(e)-2147483648,r=new n;r.setIbgr(t),i(r)})})},e.prototype.setBorderColor=function(e){var n=t.attach(this.id,this.viewID);t.set("prop:border",String(e.getIbgr()-2147483648),n)},e}();internal.utils.applyMixins(e.Item,[i])}(t=e.core||(e.core={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=internal.Item,n=function(){function e(){}return e.prototype.getVolume=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:volume",i).then(function(e){n(Number(e))})})},e.prototype.setVolume=function(e){var n=t.attach(this.id,this.viewID);e=0>e?0:e>100?100:e,t.set("prop:volume",String(e),n)},e.prototype.isMuted=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:mute",i).then(function(e){n("1"===e)})})},e.prototype.setMuted=function(e){var n=t.attach(this.id,this.viewID);t.set("prop:mute",e?"1":"0",n)},e}();internal.utils.applyMixins(e.Item,[n])}(t=e.core||(e.core={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=internal.Item,n=function(){function e(){}return e.prototype.isWindowTracking=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:ScrCapTrackWindowTitle",i).then(function(e){n("0"===e)})})},e.prototype.setWindowTracking=function(e){var n=t.attach(this.id,this.viewID);t.set("prop:ScrCapTrackWindowTitle",e?"0":"1",n)},e}();internal.utils.applyMixins(e.Item,[n])}(t=e.core||(e.core={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=internal.Item,n=function(){function e(){}return e.prototype.getCuePoints=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:CuePoints",i).then(function(e){var t,i;t=e.split(","),i=t.map(function(e){return Number(e)/10}),n(i)})})},e}();internal.utils.applyMixins(e.Item,[n])}(t=e.core||(e.core={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=internal.Item,n=internal.utils.Color;!function(e){e[e.KEY=0]="KEY",e[e.COLOR=1]="COLOR",e[e.RGB=2]="RGB"}(e.ChromaTypes||(e.ChromaTypes={}));e.ChromaTypes;!function(e){e[e.RED=0]="RED",e[e.GREEN=1]="GREEN",e[e.BLUE=2]="BLUE"}(e.ChromaPrimaryColors||(e.ChromaPrimaryColors={}));e.ChromaPrimaryColors;!function(e){e[e.NONE=0]="NONE",e[e.LOW=1]="LOW",e[e.HIGH=2]="HIGH"}(e.ChromaAntiAlias||(e.ChromaAntiAlias={}));var i=(e.ChromaAntiAlias,function(){function e(){}return e.prototype.isChromaEnabled=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:key_chromakey",i).then(function(e){n("1"===e)})})},e.prototype.setChromaEnabled=function(e){var n=t.attach(this.id,this.viewID);t.set("prop:key_chromakey",e?"1":"0",n)},e.prototype.getChromaBrightness=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:key_chromabr",i).then(function(e){n(Number(e))})})},e.prototype.setChromaBrightness=function(e){var n=t.attach(this.id,this.viewID);e=0>e?0:e>255?255:e,t.set("prop:key_chromabr",String(e),n)},e.prototype.getChromaSaturation=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:key_chromasat",i).then(function(e){n(Number(e))})})},e.prototype.setChromaSaturation=function(e){var n=t.attach(this.id,this.viewID);e=0>e?0:e>255?255:e,t.set("prop:key_chromasat",String(e),n)},e.prototype.getChromaHue=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:key_chromahue",i).then(function(e){n(Number(e))})})},e.prototype.setChromaHue=function(e){var n=t.attach(this.id,this.viewID);e=-180>e?-180:e>180?180:e,t.set("prop:key_chromahue",String(e),n)},e.prototype.getChromaType=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:key_chromakeytype",i).then(function(e){n(Number(e))})})},e.prototype.setChromaType=function(e){var n=t.attach(this.id,this.viewID);e=0>e?0:e>2?2:e,t.set("prop:key_chromakeytype",String(e),n)},e.prototype.getChromaColor=function(){var e=this;return new Promise(function(i){var r=t.attach(e.id,e.viewID);t.get("prop:key_colorrgb",r).then(function(e){var t=new n;t.setBgr(e),i(t)})})},e.prototype.setChromaColor=function(e){var n=t.attach(this.id,this.viewID);t.set("prop:key_colorrgb",e.getBgr(),n)},e.prototype.getChromaPrimaryColor=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:key_chromargbkeyprimary",i).then(function(e){n(Number(e))})})},e.prototype.setChromaPrimaryColor=function(e){var n=t.attach(this.id,this.viewID);e=0>e?0:e>2?2:e,t.set("prop:key_chromargbkeyprimary",String(e),n)},e.prototype.getChromaBalance=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:key_chromargbkeybalance",i).then(function(e){n(Number(e))})})},e.prototype.setChromaBalance=function(e){var n=t.attach(this.id,this.viewID);e=0>e?0:e>255?255:e,t.set("prop:key_chromargbkeybalance",String(e),n)},e.prototype.getChromaAntiAlias=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:key_antialiasing",i).then(function(e){n(Number(e))})})},e.prototype.setChromaAntiAlias=function(e){var n=t.attach(this.id,this.viewID);e=0>e?0:e>2?2:e,t.set("prop:key_antialiasing",String(e),n)},e.prototype.getChromaThreshold=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:key_chromarang",i).then(function(e){n(Number(e))})})},e.prototype.setChromaThreshold=function(e){var n=t.attach(this.id,this.viewID);e=0>e?0:e>255?255:e,t.set("prop:key_chromarang",String(e),n)},e.prototype.getChromaThresholdAA=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:key_chromaranga",i).then(function(e){n(Number(e))})})},e.prototype.setChromaThresholdAA=function(e){var n=t.attach(this.id,this.viewID);e=0>e?0:e>255?255:e,t.set("prop:key_chromaranga",String(e),n)},e}());internal.utils.applyMixins(e.Item,[i])}(t=e.core||(e.core={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=internal.Item;!function(e){e[e.NOTHING=0]="NOTHING",e[e.REWIND=1]="REWIND",e[e.LOOP=2]="LOOP",e[e.HIDE=3]="HIDE"}(e.PlaybackEndAction||(e.PlaybackEndAction={}));var n=(e.PlaybackEndAction,function(){function e(){}return e.prototype.getPlaybackStartPos=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);

t.get("prop:InPoint",i).then(function(e){n(Number(e)/10)})})},e.prototype.setPlaybackStartPos=function(e){var n=t.attach(this.id,this.viewID);e=0>e?0:e,t.set("prop:InPoint",String(10*e),n)},e.prototype.getPlaybackEndPos=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:OutPoint",i).then(function(e){n(Number(e)/10)})})},e.prototype.setPlaybackEndPos=function(e){var n=t.attach(this.id,this.viewID);e=0>e?0:e,t.set("prop:OutPoint",String(10*e),n)},e.prototype.getPlaybackEndAction=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("prop:OpWhenFinished",i).then(function(e){n(Number(e))})})},e.prototype.setPlaybackEndAction=function(e){var n=t.attach(this.id,this.viewID);t.set("prop:OpWhenFinished",String(e),n)},e.prototype.getPlaybackDuration=function(){var e=this;return new Promise(function(n){var i=t.attach(e.id,e.viewID);t.get("sync:duration",i).then(function(e){n(Number(e))})})},e.prototype.setPlaybackDuration=function(e){var n=t.attach(this.id,this.viewID);t.set("sync:duration",String(e),n)},e}());internal.utils.applyMixins(e.Item,[n])}(t=e.core||(e.core={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=internal.Item,n=internal.Environment,i=function(){function e(){}return e.prototype.loadConfig=function(){var e=this;return new Promise(function(n){t.attach(e.id,e.viewID),t.get("prop:BrowserConfiguration").then(function(e){var t=window.JSON.parse(e),i=internal.persistConfig;for(var r in i)delete t[r];n(t)})})},e.prototype.saveConfig=function(e){var t=internal.persistConfig;for(var i in t)e.key=t.key;if(!n.isSourceHtml())throw new Error("Only the source HTML itself may save configuration. Consider applyConfig() instead.");internal.exec("SetBrowserProperty","Configuration",window.JSON.stringify(e))},e.prototype.applyConfig=function(e){t.set("prop:BrowserConfiguration",window.JSON.stringify(e))},e}();internal.utils.applyMixins(e.Item,[i])}(t=e.core||(e.core={}))}(xui||(xui={}));var xui;!function(e){var t;!function(t){var n=internal.App,i=e.core.Item,r=internal.utils.JSON,o=internal.Item,a=internal.Environment,s=e.system.VideoDevice,u=e.system.Game,c=e.system.File,h=e.system.URL,l=internal.utils.XML,p=function(){function p(e){this.id=e.id,this.viewID=e.viewID}return p.prototype.getID=function(){return this.id},p.prototype.getViewID=function(){return this.viewID},p.prototype.getItems=function(){var e=this;return new Promise(function(t){n.getAsList("presetconfig:"+e.id).then(function(n){var r=[];if(Array.isArray(n))for(var o=0;o<n.length;o++){n[o].sceneID=e.id,n[o].viewID=parseInt(e.viewID);var a=new i(n[o]);r.push(a)}t(r)})})},p.prototype.isEmpty=function(){var e=this;return new Promise(function(t){n.get("presetisempty:"+e.id).then(function(e){t("1"===e)})})},p.prototype.getName=function(){var e=this;return new Promise(function(t){n.get("presetname:"+e.id).then(function(e){t(e)})})},p.get=function(t){return new Promise(function(s){var u,c=new i({id:o.getBaseID()});if(void 0===t)if(a.isSourceHtml()){var h;c.getViewID().then(function(e){return u=Number(e),n.get("presetconfig:-1")}).then(function(t){return h=r.parse(t),new e.core.View(u).getScenes({name:h.name})}).then(function(e){s(e[0])})}else e.core.View.MAIN.getActiveScene().then(function(e){s(e)});else a.isSourceHtml()?c.getViewID().then(function(n){return u=Number(n),new e.core.View(u).getScene(t)}).then(function(e){s(e)}):e.core.View.MAIN.getScene(t).then(function(e){s(e)})})},p.prototype.add=function(e){e instanceof s?this.addVideoDevice(e):e instanceof u?this.addGame(e):e instanceof c?this.addFile(e):e instanceof h?this.addUrl(e):this.addScreen()},p.prototype.addVideoDevice=function(e){if(void 0!==e){var r=new i({value:l.encode(e.disp.toUpperCase()),name:e.name,type:t.ItemTypes.LIVE});n.callFunc("additem",r.toXML().toString())}},p.prototype.addGame=function(e){if(void 0!==e){var r=new i({name:e.getWindowName()+" ("+e.getGapiType()+")",value:l.encode(e.toXML().toString()),type:t.ItemTypes.GAMESOURCE});n.callFunc("additem",r.toXML().toString())}},p.prototype.addFile=function(e){if(void 0!==e){var r=new i({value:e.toString(),name:e.toString(),type:t.ItemTypes.FILE});n.callFunc("additem",r.toXML().toString())}},p.prototype.addScreen=function(){n.callFunc("addscreen","")},p.prototype.addUrl=function(e){if(void 0!==e){var r=new i({value:e.toString(),name:e.toString(),type:t.ItemTypes.HTML});n.callFunc("additem",r.toXML().toString())}},p.prototype.removeSource=function(e){void 0!==e&&n.callFunc("removesrc",e.id)},p}();t.Scene=p}(t=e.core||(e.core={}))}(xui||(xui={}));var xui;!function(e){var t;!function(t){var n,i=internal.App,r=e.core.Scene;!function(e){e[e.MAIN=0]="MAIN",e[e.PREVIEW=1]="PREVIEW"}(n||(n={}));var o=function(){function e(e){this.id=e||0}return e.prototype.getViewID=function(){return this.id},e.prototype.getScenes=function(e){var t=this;return e=e?e:{},new Promise(function(n){var o=[],a=new RegExp(e.name,"gi");i.getAsList("presetconfig").then(function(i){for(var s=0;s<i.length;s++)"global"!==i[s].tag&&(e.name&&a.test(i[s].name)||e.id===s+1||0===Object.keys(e).length)&&o.push(new r({id:s,viewID:t.id}));n(o)})})},e.prototype.getScenesCount=function(){return new Promise(function(e){i.get("presetcount").then(function(t){e(t)})})},e.prototype.setActiveScene=function(e){"object"==typeof e?i.set("preset",e.getID().toString()):"number"==typeof e&&i.set("preset",e.toString())},e.prototype.getActiveScene=function(){var e=this;return new Promise(function(t){i.get("preset:"+e.id).then(function(n){var i=new r({id:n,viewID:e.id});t(i)})})},e.prototype.getScene=function(e){var t=this;return new Promise(function(n){n(new r({id:e,viewID:t.id}))})},e.prototype.searchItems=function(e){var t=this,n=/^{[A-F0-9-]*}$/i.test(e),i=[];if(n){var r=!1;return new Promise(function(n){t.getScenes().then(function(t){t.forEach(function(t,o,a){r||t.getItems().then(function(t){r=t.some(function(t){return t.id===e?(i.push(t),n(i),!0):!1}),o===a.length-1&&n(i)})})})})}return new Promise(function(n){t.getScenes().then(function(t){return Promise.all(t.map(function(t){return new Promise(function(n){t.getItems().then(function(t){return 0!==t.length?Promise.all(t.map(function(t){return new Promise(function(n){t.getName().then(function(n){return n.match(e)?(i.push(t),""):t.getValue()}).then(function(r){r.toString().match(e)&&i.push(t),n()})})})).then(function(){n()}):void n()})})})).then(function(){n(i)})})})},e.MAIN=new e(n.MAIN),e.PREVIEW=new e(n.PREVIEW),e}();t.View=o}(t=e.core||(e.core={}))}(xui||(xui={}));var xui;!function(e){var t;!function(t){var n=e.core.Scene,i=internal.utils.JSON,r=internal.utils.XML,o=function(){function e(e){this.currentScene=new n({id:e.currentScene,viewID:"1"}),this.version=e.version,this.sceneDetails=e.placements,this.global=e.global}return e.prototype.toXML=function(){var e=new i;e.tag="configuration",e.cur=this.currentScene.getID(),e.Version=this.version,e.children=[];for(var t=0;t<this.sceneDetails.length;t++){var n=(this.sceneDetails[t],{});n.tag="placement",n.name=this.sceneDetails[t].name,n.defpos=this.sceneDetails[t].defpos;for(var o=this.sceneDetails[t].items,a=0;a<o.length;a++){var s=o[a].item;void 0!==s&&(o[a].item=r.encode(s)),o[a].name=r.encode(o[a].name)}n.children=o,e.children.push(n)}var u={};u.tag="global";var c=this.global.children;if(void 0!==c){for(var h=0;h<c.length;h++)c[h].id=r.encode(c[h].id);u.children=c,e.children.push(u)}return r.parseJSON(e)},e}();t.Presentation=o}(t=e.core||(e.core={}))}(xui||(xui={}));var xui;!function(e){var t;!function(t){function n(e){var t=e.getID();return new Promise(function(n){a.get("presetconfig:"+t).then(function(e){return s.parse(e)}).then(function(t){return e.defpos=t.defpos,e.items=void 0!==t.children?t.children:[],e.getName()}).then(function(t){e.name=t,n(e)})})}function i(){return new Promise(function(e){a.getAsList("presetconfig").then(function(t){e(t[t.length-1])})})}var r=internal.utils.Rectangle,o=e.system.AudioDevice,a=internal.App,s=internal.utils.JSON,u=internal.utils.XML,c=e.core.Presentation,h=e.core.View,l=function(){function e(){}return e.prototype.callDll=function(){return a.callDll.apply(this,arguments)},e.prototype.getFrametime=function(){return new Promise(function(e){a.get("frametime").then(function(t){e(t)})})},e.prototype.getResolution=function(){return new Promise(function(e){a.get("resolution").then(function(t){e(r.parse(t))})})},e.prototype.getViewport=function(){return new Promise(function(e){a.get("viewport").then(function(t){e(r.parse(t))})})},e.prototype.getVersion=function(){return new Promise(function(e){e(a.get("version"))})},e.prototype.getFramesRendered=function(){return new Promise(function(e){e(a.get("version"))})},e.prototype.getAudioDevices=function(){return new Promise(function(e){a.getAsList("microphonedev2").then(function(t){e(t.map(function(e){return o.parse(e)}))})})},e.prototype.setAudioDevices=function(e){var t="";if(Array.isArray(e))for(var n=0;n<e.length;++n)t+=e[n].toString();t="<devices>"+t+"</devices>",a.set("microphonedev2",t)},e.prototype.getAudioGain=function(){return new Promise(function(e){a.get("microphonegain").then(function(t){e(s.parse(t))})})},e.prototype.setAudioGain=function(e){e.tag="configuration",a.set("microphonegain",u.parseJSON(e).toString())},e.prototype.newDialog=function(e){void 0!==e&&""!==e&&a.callFunc("newdialog",e)},e.prototype.newAutoDialog=function(e){void 0!==e&&""!==e&&a.callFunc("newautodialog",e)},e.prototype.closeDialog=function(){internal.exec("CloseDialog")},e.prototype.getTransition=function(){return new Promise(function(e){a.get("transitionid").then(function(t){e(t)})})},e.prototype.setTransition=function(e){a.set("transitionid",e)},e.prototype.getTransitionTime=function(){return new Promise(function(e){a.get("transitiontime").then(function(t){e(Number(t))})})},e.prototype.setTransitionTime=function(e){a.set("transitiontime",e.toString())},e.prototype.getCurrentPresentation=function(){var e=this;return new Promise(function(t){var r,o,a,s,u;h.MAIN.getActiveScene().then(function(t){return r=t,e.getVersion()}).then(function(e){return o=e,h.MAIN.getScenes()}).then(function(e){return Promise.all(e.map(function(e,t,i){return t!==i.length?n(e):Promise.resolve(e)}))}).then(function(e){return s=e,i()}).then(function(e){u=e,a=new c({currentScene:r.getID(),version:o,placements:s,global:u}),t(a)})})},e.prototype.load=function(e){e instanceof c?a.callFunc("loadpresets",e.toXML().toString()):/\.bpres$/i.test(e)&&a.callFunc("loadpresets",e)},e.prototype.save=function(e){a.callFunc("savepresets",e)},e.prototype.clearPresentation=function(){a.callFunc("newpresets","")},e.TRANSITION_CLOCK="clock",e.TRANSITION_COLLAPSE="collapse",e.TRANSITION_MOVE_BOTTOM="move_bottom",e.TRANSITION_MOVE_LEFT="move_left",e.TRANSITION_MOVE_LEFT_RIGHT="move_left_right",e.TRANSITION_MOVE_RIGHT="move_right",e.TRANSITION_MOVE_TOP="move_top",e.TRANSITION_FAN="fan",e.TRANSITION_HOLE="hole",e.TRANSITION_WAVE="wave",e}();t.App=l}(t=e.core||(e.core={}))}(xui||(xui={}));var xui;!function(e){var t;!function(e){var t=internal.App,n=function(){function e(e){this.name=e.name,this.stat=e.stat,this.channel=e.channel}return e.prototype.getStreamDrops=function(){var e=this;return new Promise(function(n){t.get("streamdrops:"+e.name).then(function(e){var t=e.split(","),i=Number(t[0])||0,r=Number(t[1])||0;n({dropped:i,rendered:r})})})},e.prototype.getStreamTime=function(){var e=this;return new Promise(function(n){t.get("streamtime:"+e.name).then(function(e){var t=Number(e)/10;n(t)})})},e}();e.Channel=n}(t=e.core||(e.core={}))}(xui||(xui={})),function(e){"use strict";e=e||{},"function"==typeof define&&define.amd?define(function(){return e}):window.di=e,"version"in e||(e.version="1.1.3");var t=function(e){this.__name="DependencyResolverException",this.__stack=null,this.__message=e||"A dependency resolver exception has occurred.";var t,n,i;if("undefined"!=typeof navigator&&-1!==navigator.userAgent.indexOf("Chrome")||"undefined"==typeof navigator){if(t=(new Error).stack.split("\n"),t&&t.length>2){for(i=[],n=2;n<t.length;n++)t[n]&&i.push(t[n].trim());this.stack=i.join("\n")}}else if("undefined"!=typeof navigator&&-1!==navigator.userAgent.indexOf("Firefox")){if(t=(new Error).stack.split("\n"),t&&t.length>1){for(i=[],n=1;n<t.length;n++)t[n]&&i.push("at "+t[n].trim().replace("@"," (")+")");this.stack=i.join("\n")}}else if("undefined"!=typeof navigator&&-1!==navigator.userAgent.indexOf("Trident"))try{throw new Error}catch(r){if("stack"in r){if(t=r.stack.split("\n"),t&&t.length>2){for(i=[],n=2;n<t.length;n++)t[n]&&i.push(t[n].trim());this.stack=i.join("\n")}}else this.stack=""}else{var r=new Error;this.stack="stack"in r?r.stack:""}Object.defineProperty(this,"__name",{enumerable:!1}),Object.defineProperty(this,"__message",{enumerable:!1}),Object.defineProperty(this,"__stack",{enumerable:!1}),Object.seal(this)};t.prototype=Object.create(Object.prototype,{name:{get:function(){return this.__name},set:function(e){this.__name=e},enumerable:!0},message:{get:function(){return this.__message},set:function(e){this.__message=e},enumerable:!0},stack:{get:function(){return this.__stack},set:function(e){this.__stack=e},enumerable:!0},toString:{value:function(){var e=this.name+": "+this.message;return this.stack&&(e+="\n	"+this.stack.replace(/\n/g,"\n	")),e},enumerable:!0}}),Object.seal(t),Object.seal(t.prototype),e.DependencyResolverException=t;var n=function(e){if(this.__name=null,this.__type=null,this.__parameters=null,e)for(var n in e){if(!(n in this))throw new t("Class 'InstanceFactoryOptions' doesn't have a property '"+n+"'");this[n]=e[n]}Object.defineProperty(this,"__name",{enumerable:!1}),Object.defineProperty(this,"__type",{enumerable:!1}),Object.defineProperty(this,"__parameters",{enumerable:!1}),Object.seal(this)};n.prototype=Object.create(Object.prototype,{name:{get:function(){return this.__name},set:function(e){this.__name=e},enumerable:!0},type:{get:function(){return this.__type},set:function(e){this.__type=e},enumerable:!0},parameters:{get:function(){return this.__parameters},set:function(e){this.__parameters=e},enumerable:!0},toString:{value:function(){return"[object InstanceFactoryOptions]"},enumerable:!0}}),Object.seal(n),Object.seal(n.prototype),e.InstanceFactoryOptions=n;var i=Object.create(Object.prototype,{create:{value:function(e){},enumerable:!0},toString:{value:function(){return"[object IInstanceFactory]"},enumerable:!0}});Object.freeze(i),e.IInstanceFactory=i;var r=function(){Object.seal(this)};r.prototype=Object.create(Object.prototype,{create:{value:function(e){if(!e)throw new t("Parameter 'options' is not set");if("type"in e&&!e.type)throw new t("Factory can't create object, because type is not set");if("function"!=typeof e.type)throw new t("Factory can't create object, because given type is not a function");if(e.type===Number||e.type===Date||e.type===Boolean||e.type===String||e.type===Array||e.type===Function||e.type===RegExp)throw new t("Basic type can not be instantiated using a factory");var n=null;return e.parameters&&e.parameters.length>0?(n=Object.create(e.type.prototype),e.type.apply(n,e.parameters)):n=new e.type,n},enumerable:!0},toString:{value:function(){return"[object InstanceFactory]"},enumerable:!0}}),Object.seal(r),Object.seal(r.prototype),e.InstanceFactory=r;var o=Object.create(Object.prototype,{transform:{value:function(e){},enumerable:!0},toString:{value:function(){return"[object INameTransformer]"},enumerable:!0}});Object.freeze(o),e.INameTransformer=o;var a=function(){Object.seal(this)};a.prototype=Object.create(Object.prototype,{transform:{value:function(e){if(!e)throw new t("Parameter 'name' is not passed to the method 'transform'");return e},enumerable:!0},toString:{value:function(){return"[object NameTransformer]"},enumerable:!0}}),Object.seal(a),Object.seal(a.prototype),e.NameTransformer=a;var s=Object.create(Object.prototype,{isAutowired:{get:function(){},enumerable:!0},autowired:{value:function(e){},enumerable:!0},register:{value:function(e){},enumerable:!0},as:{value:function(e){},enumerable:!0},instance:{value:function(e){},enumerable:!0},asSingleton:{value:function(){},enumerable:!0},withConstructor:{value:function(){},enumerable:!0},param:{value:function(e){},enumerable:!0},withProperties:{value:function(e){},enumerable:!0},prop:{value:function(e){},enumerable:!0},val:{value:function(e){},enumerable:!0},ref:{value:function(e){},enumerable:!0},setFactory:{value:function(e){},enumerable:!0},create:{value:function(){},enumerable:!0},inject:{value:function(e,t){},enumerable:!0},contains:{value:function(e){},enumerable:!0},resolve:{value:function(e){},enumerable:!0},getDefaultFactory:{value:function(){},enumerable:!0},setDefaultFactory:{value:function(e){},enumerable:!0},getNameTransformer:{value:function(){},enumerable:!0},setNameTransformer:{value:function(e){},enumerable:!0},getRegistration:{value:function(e){},enumerable:!0},dispose:{value:function(){},enumerable:!0},toString:{value:function(){return"[object IDependencyResolver]"},enumerable:!0}});Object.freeze(s),e.IDependencyResolver=s;var u=function(e){this.__parent=e,this.__defaultFactory=null,this.__nameTransformer=null,this.__autowired=!1,this.__container=null,this.__registration=null,this.__withProperties=!1,this.__withConstructor=!1,this.__parameter=null,this.__property=null,this.__function=null,e&&(this.__autowired=e.isAutowired),Object.defineProperty(this,"__parent",{enumerable:!1}),Object.defineProperty(this,"__defaultFactory",{enumerable:!1}),Object.defineProperty(this,"__nameTransformer",{enumerable:!1}),Object.defineProperty(this,"__autowired",{enumerable:!1}),Object.defineProperty(this,"__container",{enumerable:!1}),Object.defineProperty(this,"__registration",{enumerable:!1}),Object.defineProperty(this,"__withProperties",{enumerable:!1}),Object.defineProperty(this,"__withConstructor",{enumerable:!1}),Object.defineProperty(this,"__parameter",{enumerable:!1}),Object.defineProperty(this,"__property",{enumerable:!1}),Object.defineProperty(this,"__function",{enumerable:!1}),Object.seal(this)};u.prototype=Object.create(Object.prototype,{isAutowired:{get:function(){return this.__autowired},enumerable:!0},autowired:{value:function(e){if((void 0===e||null===e)&&(e=!0),"boolean"!=typeof e)throw new t("Parameter 'value' passed to the method 'autowired' has to be a 'boolean'");return this.__autowired=e,this},enumerable:!0},register:{value:function(e){if(!e)throw new t("Parameter 'name' is not passed to the method 'register'");if("string"!=typeof e)throw new t("Parameter 'name' passed to the method 'register' has to be a 'string'");return this.__container||(this.__container=Object.create(null)),this.__registration={name:e,singleton:!1,type:null,instance:null,factory:null,dependencies:null},e in this.__container?(this.__container[e]instanceof Array||(this.__container[e]=[this.__container[e]]),this.__container[e].push(this.__registration)):this.__container[e]=this.__registration,this.__withConstructor=!1,this.__withProperties=!1,this.__parameter=null,this.__property=null,this},enumerable:!0},as:{value:function(e){if(!this.__registration)throw new t("Registration's name is not defined");if(!e)throw new t("Parameter 'type' is not passed to the method 'as' for registration '"+this.__registration.name+"'");if("function"!=typeof e)throw new t("Parameter 'type' passed to the method 'as' has to be a 'function' for registration '"+this.__registration.name+"'");return this.__registration.instance=null,this.__registration.type=e,this.__registration.singleton=!1,this.__registration.dependencies={parameters:[],properties:[],functions:[]},this.__withConstructor=!1,this.__withProperties=!1,this.__parameter=null,this.__property=null,this.__function=null,this},enumerable:!0},instance:{value:function(e){if(!this.__registration)throw new t("Registration's name is not defined");if(null===e||void 0===e)throw new t("Parameter 'instance' is not passed to the method 'instance' for registration '"+this.__registration.name+"'");return this.__registration.instance=e,this.__registration.type=null,this.__registration.factory=null,this.__registration.singleton=!0,this.__registration.dependencies=null,this.__withConstructor=!1,this.__withProperties=!1,this.__parameter=null,this.__property=null,this.__function=null,this},enumerable:!0},asSingleton:{value:function(){if(!this.__registration)throw new t("Registration's name is not defined");if(!this.__registration.type)throw new t("Type is not set for registration '"+this.__registration.name+"'");return this.__registration.singleton=!0,this.__withConstructor=!1,this.__withProperties=!1,this.__parameter=null,this.__property=null,this.__function=null,this},enumerable:!0},withConstructor:{value:function(){if(!this.__registration)throw new t("Registration's name is not defined");if(!this.__registration.type)throw new t("Type is not set for registration '"+this.__registration.name+"'");return this.__withConstructor=!0,this.__withProperties=!1,this.__parameter=null,this.__property=null,this.__function=null,this},enumerable:!0},param:{value:function(e){if(!this.__registration)throw new t("Registration's name is not defined");if(!this.__registration.type)throw new t("Type is not set for registration '"+this.__registration.name+"'");var n,i=null,r=null;if(this.__withConstructor){if(i=this.__registration.dependencies.parameters,this.__autowired&&(void 0===e||null===e))throw new t("Parameter 'name' has to be passed to the method, when dependency container has option 'autowired' enabled");r=this.__findParameter(e,i,this.__registration)}else{if(!this.__withProperties)throw new t("Invocation of method 'withConstructor' or 'withProperties' is missing for registration '"+this.__registration.name+"'");if(!this.__function)throw new t("Function is not defined");i=this.__function.parameters,r=this.__findParameter(e,this.__function.parameters,this.__registration)}return r||(r={index:n,name:e,value:void 0,reference:void 0},i.push(r)),this.__parameter=r,this.__property=null,this},enumerable:!0},withProperties:{value:function(){if(!this.__registration)throw new t("Registration's name is not defined");if(!this.__registration.type)throw new t("Type is not set for registration '"+this.__registration.name+"'");return this.__withProperties=!0,this.__withConstructor=!1,this.__parameter=null,this.__property=null,this.__function=null,this},enumerable:!0},prop:{value:function(e){if(!this.__registration)throw new t("Registration's name is not defined");if(!e)throw new t("Parameter 'name' is not passed to the method 'prop' for registration '"+this.__registration.name+"'");if("string"!=typeof e)throw new t("Parameter 'name' passed to the method 'prop' has to be a 'string' for registration '"+this.__registration.name+"'");if(!this.__registration.type)throw new t("Type is not set for registration '"+this.__registration.name+"'");if(!this.__withProperties)throw new t("Invocation of method 'withProperties' is missing for registration '"+this.__registration.name+"'");for(var n=this.__registration.dependencies.properties,i=null,r=0;r<n.length;r++)if(n[r].name===e){i=n[r];break}return i||(i={name:e,value:void 0,reference:void 0},n.push(i)),this.__parameter=null,this.__property=i,this.__function=null,this},enumerable:!0},func:{value:function(e){if(!this.__registration)throw new t("Registration's name is not defined");if(!e)throw new t("Parameter 'name' is not passed to the method 'func' for registration '"+this.__registration.name+"'");if("string"!=typeof e)throw new t("Parameter 'name' passed to the method 'func' has to be a 'string' for registration '"+this.__registration.name+"'");if(!this.__registration.type)throw new t("Type is not set for registration '"+this.__registration.name+"'");if(!this.__withProperties)throw new t("Invocation of method 'withProperties' is missing for registration '"+this.__registration.name+"'");for(var n=this.__registration.dependencies.functions,i=null,r=0;r<n.length;r++)if(n[r].name===e){i=n[r];break}return i||(i={name:e,parameters:[]},n.push(i)),this.__parameter=null,this.__property=null,this.__function=i,this},enumerable:!0},val:{value:function(e){if(!this.__registration)throw new t("Registration's name is not defined");if(null===e||void 0===e)throw new t("Parameter 'instance' is not passed to the method 'val'");if(!this.__withProperties&&!this.__withConstructor)throw new t("Invocation of method withConstructor' or 'withProperties' is missing");if(this.__withConstructor&&!this.__parameter)throw new t("Parameter is not defined");if(this.__withProperties&&!this.__parameter&&!this.__property)throw new t("Parameter or property is not defined");return this.__parameter?(this.__parameter.value=e,this.__parameter.reference=void 0):this.__property&&(this.__property.value=e,this.__property.reference=void 0),this},enumerable:!0},ref:{value:function(e){if(!this.__registration)throw new t("Registration's name is not defined");if(!e)throw new t("Parameter 'name' is not passed to the method 'ref' for registration '"+this.__registration.name+"'");if("string"!=typeof e)throw new t("Parameter 'name' passed to the method 'ref' has to be a 'string' for registration '"+this.__registration.name+"'");if(!this.__withProperties&&!this.__withConstructor)throw new t("Invocation of method 'withConstructor' or 'withProperties' is missing for registration '"+this.__registration.name+"'");if(this.__withConstructor&&!this.__parameter)throw new t("Parameter is not defined");if(this.__withProperties&&!this.__parameter&&!this.__property)throw new t("Parameter or property is not defined");if(!this.contains(e))throw new t("Type or instance is not registered with name '"+e+"'");return this.__parameter?(this.__parameter.value=void 0,this.__parameter.reference=e):this.__property&&(this.__property.value=void 0,this.__property.reference=e),this},enumerable:!0},setFactory:{value:function(e){if(!this.__registration)throw new t("Registration's name is not defined");if(!e)throw new t("Parameter 'factory' is not passed to the method 'setFactory");if("function"!=typeof e&&"object"!=typeof e)throw new t("Parameter 'factory' passed to the method 'setFactory' has to be a 'function' or 'object'");if("object"==typeof e&&!("create"in e))throw new t("Factory's instance passed to the method 'setFactory' has to have a method 'create'");if(!this.__registration.type)throw new t("Type is not set for registration '"+this.__registration.name);return this.__registration.factory=e,this.__withConstructor=!1,this.__withProperties=!1,this.__parameter=null,this.__property=null,this.__function=null,this},enumerable:!0},create:{value:function(){return new u(this)},enumerable:!0},inject:{value:function(e){if(!e)throw new t("Parameter 'func' is not passed to method 'inject'");var n,i=[],r={resolving:[]};if(e instanceof Array){if(0===e.length)throw new t("The array passed to the method 'inject' can't be empty");for(n=0;n<e.length-1;n++)i.push(e[n]);if(e=e[e.length-1],"function"!=typeof e)throw new t("The last item of the array passed to the method 'inject' has to be a 'function'");for(n=0;n<i.length;n++)"string"==typeof i[n]&&this.contains(i[n])&&(i[n]=this.__resolve(i[n],r));e.apply(null,i)}else{var o=null;if(2===arguments.length&&"string"==typeof arguments[1]){var a=arguments[1];if(!this.contains(a))throw new t("Type with name '"+a+"' is not registered");o=this.getRegistration(a)}var s;if("function"==typeof e){if(o)i=this.__getConstructorParameters(o,r);else{var u=this.__getFunctionArguments(e);for(n=0;n<u.length;n++)s=this.__resolveDependencyName(u[n]),i.push(this.contains(s)?this.__resolve(s,r):null)}e.apply(null,i)}else{if("object"!=typeof e)throw new t("Invalid parameter has been passed to the method 'inject'");if(o)this.__setProperties(e,o,r),this.__invokeFunctions(e,o,r);else{for(var c in e)s=this.__resolveDependencyName(c),this.contains(s)&&i.push({name:c,value:this.__resolve(s,r)});if(i.length>0)for(n=0;n<i.length;n++)e[i[n].name]=i[n].value}}}return this},enumerable:!0},contains:{value:function(e){if(!e)throw new t("Parameter 'name' is not passed to the method 'contains'");if("string"!=typeof e)throw new t("Parameter 'name' passed to the  has to be a 'string'");var n=!1;if(this.__container&&e in this.__container&&(n=!0),!n&&this.__parent){if(!("contains"in this.__parent))throw new t("Dependency resolver's parent doesn't have a method 'contains'");n=this.__parent.contains(e)}return n},enumerable:!0},resolve:{value:function(e){return this.__resolve(e,{resolving:[]})},enumerable:!0},getDefaultFactory:{value:function(){var e=null;if(this.__defaultFactory)e=this.__defaultFactory;else if(this.__parent){if(!("getDefaultFactory"in this.__parent))throw new t("Dependency resolver's parent doesn't have a method 'getDefaultFactory'");e=this.__parent.getDefaultFactory()}else e=new r;return e},enumerable:!0},setDefaultFactory:{value:function(e){if(!e)throw new t("Parameter 'factory' is not passed to the method 'setDefaultFactory");if("function"!=typeof e&&"object"!=typeof e)throw new t("Parameter 'factory' passed to the method 'setDefaultFactory' has  to be a 'function' or 'object'");if("object"==typeof e&&!("create"in e))throw new t("Factory's instance passed to the method 'setDefaultFactory' has to have a method 'create'");return this.__defaultFactory=e,this},enumerable:!0},getNameTransformer:{value:function(){var e=null;if(this.__nameTransformer)e=this.__nameTransformer;else if(this.__parent){if(!("getNameTransformer"in this.__parent))throw new t("Dependency resolver's parent doesn't have a method 'getNameTransformer'");e=this.__parent.getNameTransformer()}else e=new a;return e},enumerable:!0},setNameTransformer:{value:function(e){if(!e)throw new t("Parameter 'transformer' is not passed to the method 'setNameTransformer'");if("function"!=typeof e&&"object"!=typeof e)throw new t("Parameter 'transformer' passed to the method 'setNameTransformer' has to be a 'function' or 'object'");if("object"==typeof e&&!("transform"in e))throw new t("Trabsformers's instance passed to the method 'setNameTransformer' has to have a method 'transform'");return this.__nameTransformer=e,this},enumerable:!0},getRegistration:{value:function(e){var n=null;if(this.__container&&e in this.__container)n=this.__container[e];else if(this.__parent){if(!("getRegistration"in this.__parent))throw new t("Dependency resolver's parent doesn't have a method 'getRegistration'");n=this.__parent.getRegistration(e)}return n},enumerable:!0},dispose:{value:function(){var e=null,t=0;if(this.__container)for(var n in this.__container)if(this.__container[n]instanceof Array){var i=this.__container[n];for(t=0;t<i.length;t++)e=i[t],e.instance&&"dispose"in e.instance&&e.instance.dispose(),e.instance=null,e.factory=null}else e=this.__container[n],e.instance&&"dispose"in e.instance&&e.instance.dispose(),e.instance=null,e.factory=null;this.__parent=null,this.__defaultFactory=null,this.__nameTransformer=null,this.__autowired=!1,this.__container=null,this.__registration=null,this.__withProperties=!1,this.__withConstructor=!1,this.__parameter=null,this.__property=null,this.__function=null},enumerable:!0},toString:{value:function(){return"[object DependencyResolver]"},enumerable:!0},__getFunctionArguments:{value:function(e){if(e&&"function"==typeof e&&"toString"in e){var t=null,n=e.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/);if(n&&n.length>1&&(t=n[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"")),t)return t.split(",")}return[]}},__resolve:{value:function(e,n){if(!e)throw new t("Parameter 'name' is not passed to the method 'resolve'");if("string"!=typeof e)throw new t("Parameter 'name' passed to the method 'resolve' has to be a 'string'");if(h&&console&&"log"in console){for(var i="-> '"+e+"'",r=0;r<n.resolving.length;r++)i="  "+i;console.log(i)}if(!this.contains(e))throw new t("Type or instance with name '"+e+"' is not registered");var o=n.resolving.indexOf(e);if(-1!==o)throw new t("Can not resolve circular dependency '"+e+"'");n.resolving.push(e);var a=null,s=this.getRegistration(e);

if(s instanceof Array){a=[];for(var u=0;u<s.length;u++)a.push(this.__resolveInstance(s[u],n))}else a=this.__resolveInstance(s,n);return o=n.resolving.indexOf(e),o>-1&&n.resolving.splice(o,1),a}},__resolveInstance:{value:function(e,n){var i=null;if(null!==e.instance&&void 0!==e.instance)i=e.instance;else if(i=this.__createInstance(e,n),this.__setProperties(i,e,n),this.__invokeFunctions(i,e,n),i&&e.singleton&&(e.instance=i),!i)throw new t("Failed to resolve instance by name '"+e.name+"'");return i}},__resolveDependencyName:{value:function(e){var n=this.getNameTransformer();if(e="function"==typeof n?n(e):n.transform(e),!e)throw new t("Failed to resolve dependency name");return e}},__createInstance:{value:function(e,i){var r,o=this.__getConstructorParameters(e,i),a=new n({name:e.name,type:e.type,parameters:o}),s=null;if(s=e.factory?e.factory:this.getDefaultFactory(),!s)throw new t("Default factory is not defined");return r="function"==typeof s?s.call(null,a):s.create(a)}},__getConstructorParameters:{value:function(e,n){var i=[];if(e&&e.dependencies){var r,o,a,s,u;if(this.__autowired){s=this.__getFunctionArguments(e.type);var c;for(r=0;r<s.length;r++)c=this.__resolveDependencyName(s[r]),i.push(this.contains(c)?this.__resolve(c,n):null)}for(r=0;r<e.dependencies.parameters.length;r++)if(o=e.dependencies.parameters[r],a=void 0!==o.value?o.value:void 0!==o.reference?this.__resolve(o.reference,n):null,void 0!==o.index&&null!==o.index)i[o.index]=a;else if(o.name){if(s||(s=this.__getFunctionArguments(e.type)),u=s.indexOf(o.name),-1===u)throw new t("Constructor in registration '"+e.name+"' doesn't have defined parameter '"+o.name+"'");i[u]=a}else i.push(a)}return i}},__hasProperty:{value:function(e,t){var n=!1;if(e.dependencies)for(var i,r=0;r<e.dependencies.properties.length;r++)if(i=e.dependencies.properties[r],i.name===t){n=!0;break}return n}},__findParameter:{value:function(e,n,i){var r=null;if(null!==e&&void 0!==e&&null!==i)if("number"==typeof e){if(index=e,e=void 0,index<0)throw new t("Parameter 'name' passed to the method 'param' is out of range for registration '"+i.name+"'");index<n.length&&(r=n[index])}else{if("string"!=typeof e)throw new t("Parameter 'name' passed to the method 'param' has to be a 'number' or a 'string' for registration '"+i.name+"'");for(var o=0;o<n.length;o++)if(n[o].name===e){r=n[o];break}}return r}},__setProperties:{value:function(e,n,i){if(n.dependencies){if(this.__autowired)for(var r in e){var o=this.__resolveDependencyName(r);!this.__hasProperty(n,r)&&this.contains(o)&&(e[r]=this.__resolve(o,i))}for(var a=0;a<n.dependencies.properties.length;a++){var s=n.dependencies.properties[a];if(!(s.name in e))throw new t("Resolved object '"+n.name+"' doesn't have property '"+s.name+"'");void 0!==s.value?e[s.name]=s.value:void 0!==s.reference&&(e[s.name]=this.__resolve(s.reference,i))}}}},__invokeFunctions:{value:function(e,n,i){if(n.dependencies){var r,o,a,s;for(r=0;r<n.dependencies.functions.length;r++){var u=n.dependencies.functions[r];if(!(u.name in e))throw new t("Resolved object '"+n.name+"' doesn't have function '"+u.name+"'");var c=[];for(o=0;o<u.parameters.length;o++)if(a=u.parameters[o],s=void 0!==a.value?a.value:void 0!==a.reference?this.__resolve(a.reference,i):null,void 0!==a.index&&null!==a.index)c[a.index]=s;else if(a.name){if(args||(args=this.__getFunctionArguments(e[u.name])),index=args.indexOf(a.name),-1===index)throw new t("Function doesn't have defined parameter '"+a.name+"'");c[index]=s}else c.push(s);e[u.name].apply(e,c)}}}}}),Object.seal(u),Object.seal(u.prototype),e.DependencyResolver=u;var c=null,h=!1;Object.defineProperty(e,"getDefaultDependencyResolver",{value:function(){return c||(c=new u),c},enumerable:!0}),Object.defineProperty(e,"setDefaultDependencyResolver",{value:function(e){c=e},enumerable:!0}),Object.defineProperty(e,"isAutowired",{get:function(){return e.getDefaultDependencyResolver().isAutowired},enumerable:!0}),Object.defineProperty(e,"autowired",{value:function(t){return e.getDefaultDependencyResolver().autowired(t)},enumerable:!0}),Object.defineProperty(e,"register",{value:function(t){return e.getDefaultDependencyResolver().register(t)},enumerable:!0}),Object.defineProperty(e,"as",{value:function(t){return e.getDefaultDependencyResolver().as(t)},enumerable:!0}),Object.defineProperty(e,"instance",{value:function(t){return e.getDefaultDependencyResolver().instance(t)},enumerable:!0}),Object.defineProperty(e,"asSingleton",{value:function(){return e.getDefaultDependencyResolver().asSingleton()},enumerable:!0}),Object.defineProperty(e,"withConstructor",{value:function(){return e.getDefaultDependencyResolver().withConstructor()},enumerable:!0}),Object.defineProperty(e,"param",{value:function(t){return e.getDefaultDependencyResolver().param(t)},enumerable:!0}),Object.defineProperty(e,"withProperties",{value:function(){return e.getDefaultDependencyResolver().withProperties()},enumerable:!0}),Object.defineProperty(e,"prop",{value:function(t){return e.getDefaultDependencyResolver().prop(t)}}),Object.defineProperty(e,"func",{value:function(t){return e.getDefaultDependencyResolver().func(t)}}),Object.defineProperty(e,"val",{value:function(t){return e.getDefaultDependencyResolver().val(t)},enumerable:!0}),Object.defineProperty(e,"ref",{value:function(t){return e.getDefaultDependencyResolver().ref(t)},enumerable:!0}),Object.defineProperty(e,"setFactory",{value:function(t){return e.getDefaultDependencyResolver().setFactory(t)},enumerable:!0}),Object.defineProperty(e,"create",{value:function(){return e.getDefaultDependencyResolver().create()},enumerable:!0}),Object.defineProperty(e,"inject",{value:function(t,n){return e.getDefaultDependencyResolver().inject(t,n)},enumerable:!0}),Object.defineProperty(e,"contains",{value:function(t){return e.getDefaultDependencyResolver().contains(t)},enumerable:!0}),Object.defineProperty(e,"resolve",{value:function(t){return e.getDefaultDependencyResolver().resolve(t)},enumerable:!0}),Object.defineProperty(e,"getDefaultFactory",{value:function(){return e.getDefaultDependencyResolver().getDefaultFactory()},enumerable:!0}),Object.defineProperty(e,"setDefaultFactory",{value:function(t){return e.getDefaultDependencyResolver().setDefaultFactory(t)},enumerable:!0}),Object.defineProperty(e,"getNameTransformer",{value:function(){return e.getDefaultDependencyResolver().getNameTransformer()},enumerable:!0}),Object.defineProperty(e,"setNameTransformer",{value:function(t){return e.getDefaultDependencyResolver().setNameTransformer(t)},enumerable:!0}),Object.defineProperty(e,"getRegistration",{value:function(t){return e.getDefaultDependencyResolver().getRegistration(t)},enumerable:!0}),Object.defineProperty(e,"debug",{get:function(){return h},set:function(e){h=e},enumerable:!0}),Object.defineProperty(e,"dispose",{value:function(){return e.getDefaultDependencyResolver().dispose()},enumerable:!0})}(window.di),function(){"use strict";var e=function(){return new Promise(function(e){window.addEventListener("load",function(){xui.DependencyContainer=di,delete window.di,xui.DependencyContainer.register("app").as(xui.core.App).asSingleton().register("currentItem").as(xui.core.Item.getCurrentSource).register("currentScene").as(xui.core.Scene.get).register("mainView").instance(xui.core.View.MAIN).register("sourceWindow").as(xui.source.SourceWindow.getInstance).register("configWindow").as(xui.config.ConfigWindow.getInstance),e()})})},t=function(){var t=internal.initPromises;t.push(e()),Promise.all(t).then(function(){document.dispatchEvent(new CustomEvent("xui-ready",{bubbles:"true"}))})};t()}(),function(){"use strict";function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype,r=this,o=r.EventEmitter;i.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},i.addListener=function(e,n){var i,r=this.getListenersAsObject(e),o="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&-1===t(r[i],n)&&r[i].push(o?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,n){var i,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(i=t(o[r],n),-1!==i&&o[r].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):a.call(this,i,r));return this},i.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(e,t){var n,i,r,o,a=this.getListenersAsObject(e);for(r in a)if(a.hasOwnProperty(r))for(i=a[r].length;i--;)n=a[r][i],n.once===!0&&this.removeListener(e,n.listener),o=n.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=o,e},"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:r.EventEmitter=e}.call(this),function(){"use strict";var e,t=function(){window.SetConfiguration=function(t){try{var n=JSON.parse(t)}catch(i){return}e.emit("apply-config",n)},e=this};t.prototype=Object.create(EventEmitter.prototype),t.getInstance=function(){return void 0===e&&(e=new t),e},void 0===window.xui&&(window.xui={}),void 0===window.xui.source&&(window.xui.source={}),window.xui.source.SourceWindow=t}(),function(){"use strict";var e,t=function(){window.addEventListener("message",function(e){try{var t=JSON.parse(e.data)}catch(n){return}switch(t.event){case"set-language":case"set-selected-tab":this.emit(t.event,t.value);break;case"async-callback":this.emit(t.event,{asyncId:t.value.asyncId,result:t.value.result});break;case"config-load":this.emit(t.event)}}.bind(this)),e=this};t.prototype=Object.create(EventEmitter.prototype),t.getInstance=function(){return void 0===e&&(e=new t),e},t.RenderMode={HIDDEN:"hidden",EMBEDDED:"embedded",FULLSCREEN:"full"},t.prototype._notify=function(e){window.parent.postMessage(JSON.stringify(e),"*")},t.prototype.setRenderMode=function(e){this._notify({event:"set-mode",value:e})},t.prototype.setTabOrder=function(e){this._notify({event:"set-tab-order",value:JSON.stringify(e)})},t.prototype.declareCustomTabs=function(e){this._notify({event:"set-custom-tabs",value:JSON.stringify(e)})},t.prototype.resizeConfig=function(e,t){internal.exec("SetDialogSize",e,t),this._notify({event:"resize",value:JSON.stringify({width:e,height:t})})},t.prototype.closeConfig=function(){internal.exec("Close")},void 0===window.xui&&(window.xui={}),void 0===window.xui.config&&(window.xui.config={}),window.xui.config.ConfigWindow=t,window.addEventListener("load",function(){window.xui.config.ConfigWindow.getInstance()._notify({event:"load"})}),delete window.EventEmitter}();