var internal;!function(t){var e;!function(t){var e=function(){function t(t){void 0!==t&&(void 0!==t.rgb&&this.setRgb(t.rgb),void 0!==t.irgb&&this.setIrgb(t.irgb),void 0!==t.bgr&&this.setBgr(t.bgr),void 0!==t.ibgr&&this.setIbgr(t.ibgr))}return t.fromRGBString=function(e){return new t({rgb:e})},t.fromRGBInt=function(e){return new t({irgb:e})},t.fromBGRString=function(e){return new t({bgr:e})},t.fromBGRInt=function(e){return new t({ibgr:e})},t.prototype.getRgb=function(){return this.rgb},t.prototype.setRgb=function(t){this.rgb=t.replace(/^#/,""),this.irgb=parseInt(this.rgb,16),this.bgr=[this.rgb.substring(4,6),this.rgb.substring(2,4),this.rgb.substring(0,2)].join(""),this.ibgr=parseInt(this.bgr,16)},t.prototype.getBgr=function(){return this.bgr},t.prototype.setBgr=function(t){this.setRgb([t.substring(4,6),t.substring(2,4),t.substring(0,2)].join(""))},t.prototype.getIrgb=function(){return this.irgb},t.prototype.setIrgb=function(t){for(var e=t.toString(16);e.length<6;)e="0"+e;this.setRgb(e)},t.prototype.getIbgr=function(){return this.ibgr},t.prototype.setIbgr=function(t){for(var e=t.toString(16);e.length<6;)e="0"+e;this.setBgr(e)},t}();t.Color=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function t(t){this.setX(t.x),this.setY(t.y),this.setZ(t.z)}return t.prototype.getX=function(){return this.x},t.prototype.setX=function(t){this.x=t},t.prototype.getY=function(){return this.y},t.prototype.setY=function(t){this.y=t},t.prototype.getZ=function(){return this.z},t.prototype.setZ=function(t){this.z=t},t}();t.Point=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.getTop=function(){return this.top},t.prototype.setTop=function(t){this.top=t,void 0!==this.bottom?this.setHeight(Math.abs(this.top-this.bottom)):void 0!==this.height&&this.setBottom(this.top+this.height)},t.prototype.getLeft=function(){return this.left},t.prototype.setLeft=function(t){this.left=t,void 0!==this.right?this.setWidth(Math.abs(this.right-this.left)):void 0!==this.width&&this.setRight(this.left+this.width)},t.prototype.getRight=function(){return this.right},t.prototype.setRight=function(t){this.right=t,void 0!==this.left?this.setWidth(Math.abs(this.right-this.left)):void 0!==this.width&&this.setLeft(this.right-this.width)},t.prototype.getBottom=function(){return this.bottom},t.prototype.setBottom=function(t){this.bottom=t,void 0!==this.top?this.setHeight(Math.abs(this.top-this.bottom)):void 0!==this.height&&this.setTop(this.bottom-this.height)},t.prototype.getWidth=function(){return this.width},t.prototype.setWidth=function(t){this.width=t,void 0!==this.right?this.setLeft(this.right-this.width):void 0!==this.left&&this.setRight(this.left+this.width)},t.prototype.getHeight=function(){return this.height},t.prototype.setHeight=function(t){this.height=t,void 0!==this.top?this.setBottom(this.top+this.height):void 0!==this.bottom&&this.setTop(this.bottom-this.height)},t.parse=function(e){var n=e.split(","),i=new t;return 4===n.length&&(i.top=Number(n[0]),i.left=Number(n[1]),i.right=Number(n[2]),i.bottom=Number(n[3])),2===n.length&&(i.width=Number(n[0]),i.height=Number(n[1])),i},t.prototype.toString=function(t){var e=t||":left,:top,:right,:bottom";return e=e.replace(":left",String(this.left)),e=e.replace(":top",String(this.top)),e=e.replace(":right",String(this.right)),e=e.replace(":bottom",String(this.bottom)),e=e.replace(":width",String(this.width)),e=e.replace(":height",String(this.height))},t}();t.Rectangle=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function t(t){this.callbacks=t}return t.prototype.next=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(this.callbacks.length>0){var n=this.callbacks.shift();t.unshift(this.next.bind(this)),n.apply(this,t)}},t.sync=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var i=new t(e);return i.next(),i},t}();t.Thread=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function t(e){var n="";void 0===e.value&&(e.value="");for(var i in e)t.RESERVED_ATTRIBUTES.test(i)||void 0===e[i]||(n+=[" ",i,"='",e[i],"'"].join(""));void 0===e.children&&(e.children=[]);for(var r=0,o=e.children;r<o.length;r++){var a=o[r];e.value+=new t(a).toString()}this.xml=["<",e.tag,n,">",e.value,"</",e.tag,">"].join("")}return t.prototype.toString=function(){return this.xml},t.parseJSON=function(e){return new t(e)},t.encode=function(t){return t.replace(/[&<>'']/g,function(t){return"&"+{"&":"amp","<":"lt",">":"gt","'":"quot",'"':"#39"}[t]+";"})},t.RESERVED_ATTRIBUTES=/^(children|tag|value)$/i,t}();t.XML=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){var e=function(){function e(n){if(void 0!==n&&""!==n){var i=n;n instanceof t.XML&&(i=n.toString()),i=i.replace(/<([^\s>]+)([^>]+)\/>/g,function(t,e,n){return["<",e,n,"></",e,">"].join("")});var r=document.createElement("div");r.innerHTML=i;var o=function a(t){var n=new e;n.tag=t.tagName.toLowerCase();for(var i=0;i<t.attributes.length;i++){var r=t.attributes[i];n[r.name]=r.value}n.children=[];for(var o=0;o<t.childNodes.length;o++){var s=t.childNodes[o];s instanceof HTMLElement&&n.children.push(a(s))}return void 0===n.value&&0===n.children.length&&(delete n.children,n.value=t.textContent),n}(r);return o=o.children[0]}}return e.parse=function(t){return new e(t)},e}();t.JSON=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){var e;!function(t){function e(t,e){e.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(n){"constructor"!==n&&(t.prototype[n]=e.prototype[n])})})}t.applyMixins=e}(e=t.utils||(t.utils={}))}(internal||(internal={}));var internal;!function(t){function e(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var o=null,a=!1;return i.length>0&&(o=i[i.length-1],o instanceof Function?i.pop():o=null),t.DEBUG&&console.log(['internal.exec("',e,'") ',JSON.stringify(i)].join(" ")),window.external&&window.external[e]&&window.external[e]instanceof Function&&(a=window.external[e].apply(this,i)),null!==o&&(n[a]=o),a}var n={};t.DEBUG=!1,t.exec=e,window.OnAsyncCallback=function(t,e){var i=n[t];i instanceof Function&&i.call(this,decodeURIComponent(e))},window.OnSceneLoad=function(t,e){document.dispatchEvent(new CustomEvent("scene-load",{detail:{view:t,scene:e}}))},window.SetConfiguration=function(t){document.dispatchEvent(new CustomEvent("set-configuration",{config:t}))},window.SetBackGroundColor=function(t){document.dispatchEvent(new CustomEvent("set-background-color",{color:t}))},window.SetVolume=function(t){document.dispatchEvent(new CustomEvent("set-volume",{volume:t}))},window.OnDialogResult=function(t){document.dispatchEvent(new CustomEvent("dialog-result",{detail:{result:t}}))}}(internal||(internal={}));var internal;!function(t){var e=function(){function t(){}return t.initialize=function(){t._initialized||(t._isHtml=window.external&&void 0!==window.external.GetConfiguration,t._isConfig=window.external&&void 0===window.external.GetConfiguration&&void 0!==window.external.GetViewId&&void 0!==window.external.GetViewId(),t._isScript=window.external&&void 0===window.external.GetConfiguration&&void 0!==window.external.GetViewId&&void 0===window.external.GetViewId(),t._initialized=!0)},t.isSourceHtml=function(){return t._isHtml},t.isSourceConfig=function(){return t._isConfig},t.isScriptPlugin=function(){return t._isScript},t}();t.Environment=e,e.initialize()}(internal||(internal={}));var internal;!function(t){var e=t.utils,n=function(){function n(){}return n.get=function(e){return new Promise(function(n){t.exec("AppGetPropertyAsync",e,n)})},n.getAsList=function(t){return new Promise(function(i){n.get(t).then(function(t){var n=e.JSON.parse(t),r=[];n.children&&n.children.length>0&&(r=n.children),i(r)})})},n.getGlobalProperty=function(e){return t.exec("GetGlobalProperty",e)},n.set=function(e,n){return new Promise(function(i){t.exec("AppSetPropertyAsync",e,n,function(t){i("0"===t?!1:!0)})})},n.callDll=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=[].slice.call(arguments);return r.unshift("CallDll"),t.exec.apply(this,r)},n.callFunc=function(e,n){return new Promise(function(i){t.exec("AppCallFuncAsync",e,n,function(t){i(t)})})},n.postMessage=function(e){for(var n=this,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return new Promise(function(r){i.unshift(e),i.unshift("PostMessageToParent"),i.push(function(t){r(t)}),t.exec.apply(n,i)})},n.POSTMESSAGE_CLOSE="1",n.POSTMESSAGE_SIZE="2",n}();t.App=n}(internal||(internal={}));var internal;!function(t){var e=function(){function e(t){var t=t||{};this.name=t.name,this.value=t.item,this.id=t.id,this.sceneID=t.sceneID,this.viewID=t.viewID}return e.attach=function(n,i){return t.Environment.isScriptPlugin()?e.cacheItemID(n):e.cacheItemID(n,i)},e.cacheItemID=function(n,i){var r=e.itemSlotMap.indexOf(n);return-1===r&&(r=++e.lastSlot%e.MAX_SLOTS,e.islockedSourceSlot&&0===r&&++r,e.lastSlot=r,e.itemSlotMap[r]=n,void 0===i?t.exec("SearchVideoItem"+("0"===String(r)?"":r+1),n):t.exec("AttachVideoItem"+("0"===String(r)?"":r+1),n,String(i))),r},e.lockSourceSlot=function(t){void 0!==t?(e.islockedSourceSlot=!0,e.itemSlotMap[0]=t):(e.islockedSourceSlot=!1,e.itemSlotMap[0]="")},e.get=function(e,n){return void 0===n&&(n=0),new Promise(function(i){t.exec("GetLocalPropertyAsync"+("0"===String(n)?"":n+1),e,function(t){i(t)})})},e.set=function(e,n,i){void 0===i&&(i=0),t.exec("SetLocalPropertyAsync"+("0"===String(i)?"":i+1),e,n)},e.callFunc=function(e,n){t.exec("CallInner",e,n)},e.setBaseID=function(t){e.baseID=t},e.getBaseID=function(){return e.baseID},e.MAX_SLOTS=2,e.lastSlot=e.MAX_SLOTS-1,e.itemSlotMap=[],e.islockedSourceSlot=!1,e}();t.Item=e}(internal||(internal={}));var internal;!function(t){function e(e){t.persistedConfig=e}function n(t,e){if("http://"===t.substring(0,7)||"https://"===t.substring(0,8))return t;if("//"===t.substring(0,2))return e.split("://")[0]+t;if("../"===t.substring(0,3)){for(var n=0;"../"===t.substring(0,3);)t=t.substring(3),++n;var i=e.split("/");return i=i.slice(0,length-1-n),i.push(t),i.join("/")}"./"===t.substring(0,2)&&(t=t.substring(2));var r=e.split("/");return r[r.length-1]=t,r.join("/")}function i(){return new Promise(function(i){t.Environment.isSourceHtml()?t.exec("GetLocalPropertyAsync","prop:BrowserConfiguration",function(r){var o=JSON.parse(decodeURIComponent(r));null===o&&(o={});for(var a=document.getElementsByTagName("meta"),s=a.length-1;s>=0;s--)if("config-url"===a[s].name){var u=n(a[s].content,window.location.href);o.configUrl=u,t.exec("SetBrowserProperty","Configuration",JSON.stringify(o));var c={configUrl:u};e(c);break}i()}):i()})}function r(){return new Promise(function(e){t.Environment.isSourceHtml()||t.Environment.isSourceConfig()?t.exec("GetLocalPropertyAsync","prop:id",function(n){var i=decodeURIComponent(n);t.Item.setBaseID(i),t.Environment.isSourceHtml()&&t.Item.lockSourceSlot(i),e()}):e()})}function o(){var e=t.initPromises=[];e.push(i()),e.push(r())}t.persistConfig=e,t.init=o}(internal||(internal={})),internal.init();var xui;!function(t){var e;!function(t){var e=internal.utils,n=internal.App,i=function(){function t(t){this.defaultConsole=!1,this.defaultMultimedia=!1,this.defaultCommunication=!1,t=t||{},this.id=t.id,this.name=t.name,this.adapter=t.adapter,this.adapterdev=t.adapterdev,this.guid=t.guid,this.dataflow=t.dataflow,this.state=t.state,this.defaultConsole=t.defaultConsole,this.defaultMultimedia=t.defaultMultimedia,this.defaultCommunication=t.defaultCommunication,this.level=t.level,this.enable=t.enable,this.hwlevel=t.hwlevel}return t.prototype.getId=function(){return this.id},t.prototype.getName=function(){return this.name},t.prototype.getAdapterName=function(){return this.adapter},t.prototype.getAdapterDescription=function(){return this.adapterdev},t.prototype.getGuid=function(){return this.guid},t.prototype.getDataFlow=function(){return this.dataflow},t.prototype.getState=function(){return this.state},t.prototype.isDefaultConsole=function(){return this.defaultConsole},t.prototype.isDefaultMultimedia=function(){return this.defaultMultimedia},t.prototype.isDefaultCommunication=function(){return this.defaultCommunication},t.prototype.getLevel=function(){return this.level},t.prototype.setLevel=function(t){return this.level=t,this},t.prototype.isEnabled=function(){return this.enable},t.prototype.setEnabled=function(t){return this.enable=t,this},t.prototype.getSystemLevel=function(){return this.hwlevel},t.prototype.setSystemLevel=function(t){return this.hwlevel=t,this},t.prototype.isSystemEnabled=function(){return this.hwenable},t.prototype.setSystemEnabled=function(t){return this.hwenable=t,this},t.prototype.getDelay=function(){return this.delay},t.prototype.setDelay=function(t){return this.delay=t,this},t.prototype.toString=function(){var t=new e.JSON;return t.tag="dev",t.id=this.getId(),t.level=this.getLevel(),t.enable=this.isEnabled()?1:0,t.hwlevel=this.getSystemLevel(),t.hwenable=this.isSystemEnabled()?1:0,t.delay=this.getDelay(),e.XML.parseJSON(t).toString()},t.list=function(e){return e=e||{dataflow:"all",state:"all"},e.dataflow=e.dataflow||"all",e.state=e.state||"all",new Promise(function(i){n.getAsList("wasapienum").then(function(n){var r=[];n.map(function(n){var i=!/^all$/i.test(e.dataflow)&&e.dataflow!==n.dataflow,o=!/^all$/i.test(e.state)&&e.state!==n.state;i||o||r.push(t.parse(n))}),i(r)})})},t.parse=function(e){var n=new t({id:e.id,name:e.name,adapter:e.adapter,adapterdev:e.adapterdev,dataflow:e.dataflow,state:e.state,guid:e.dsoundguid,defaultCommunication:"1"===e.defaultcommunication,defaultConsole:"1"===e.defaultconsole,defaultMultimedia:"1"===e.defaultmultimedia});return n.setLevel(Number(e.level)).setEnabled("1"===e.enable).setSystemLevel(Number(e.hwlevel)).setSystemEnabled("1"===e.hwenable).setDelay(Number(e.delay)),n},t.STATE_ACTIVE="Active",t.DATAFLOW_RENDER="Render",t.DATAFLOW_CAPTURE="Capture",t}();t.AudioDevice=i}(e=t.system||(t.system={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.utils.JSON,n=internal.utils.XML,i=function(){function t(t){t=t||{},this.name=t.name,this.disp=t.disp}return t.parse=function(e){var n=new t({name:e.name,disp:e.disp});return n},t.prototype.toXML=function(){var t=new e;return t.tag="dev",t.name=this.name,t.disp=this.disp,n.parseJSON(t)},t}();t.VideoDevice=i}(e=t.system||(t.system={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.App,n=function(){function t(t){void 0!==t&&this.setPid(t)}return t.prototype.getPid=function(){return this.pid},t.prototype.setPid=function(t){this.pid=t;var n=t.toString();this.detail=e.callDll("xsplit.GetProcessDetails",n),this.modules=e.callDll("xsplit.GetProcessModules",n),this.hwnds=e.callDll("xsplit.GetProcessWindowsList",n)},t.prototype.getDetail=function(){return void 0===this.detail?"":this.detail},t.prototype.getHwnds=function(){return""===this.hwnds?[]:this.hwnds.split(",").map(function(t){return Number(t)})},t.prototype.getModules=function(){return void 0===this.modules?[]:this.modules.split(",").filter(function(t){return""!==t})},t}();t.Process=n}(e=t.system||(t.system={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.utils.Rectangle,n=internal.utils.JSON,i=internal.utils.XML,r=function(){function t(){}return t.prototype.getPid=function(){return this.pid},t.prototype.getHandle=function(){return this.handle},t.prototype.getWindowHandle=function(){return this.hwnd},t.prototype.getGapiType=function(){return this.gapitype},t.prototype.getResolution=function(){return e.parse(this.width+","+this.height)},t.prototype.getFlags=function(){return this.flags},t.prototype.getWindowName=function(){return this.wndname},t.prototype.getLastFrameTimestamp=function(){return this.lastframets},t.parse=function(e){var n=new t;return n.pid=void 0!==e.pid?parseInt(e.pid):void 0,n.handle=void 0!==e.handle?parseInt(e.handle):void 0,n.hwnd=void 0!==e.hwnd?parseInt(e.hwnd):void 0,n.gapitype=e.gapitype,n.width=void 0!==e.width?parseInt(e.width):void 0,n.height=void 0!==e.height?parseInt(e.height):void 0,n.flags=e.flags,n.wndname=e.wndname,n.lastframets=void 0!==e.lastframets?parseInt(e.lastframets):void 0,n},t.prototype.toXML=function(){var t=new n;return t.tag="src",t.pid=this.pid,t.handle=this.handle,t.hwnd=this.hwnd,t.gapitype=this.gapitype,t.width=this.width,t.height=this.height,t.flags=this.flags,t.wndname=this.wndname,t.lastframets=this.lastframets,i.parseJSON(t)},t}();t.Game=r}(e=t.system||(t.system={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.App;!function(t){t[t.HIDE=0]="HIDE",t[t.SHOWNORMAL=1]="SHOWNORMAL",t[t.SHOWMINIMIZED=2]="SHOWMINIMIZED",t[t.MAXIMIZE=3]="MAXIMIZE",t[t.SHOWNOACTIVATE=4]="SHOWNOACTIVATE",t[t.SHOW=5]="SHOW",t[t.MINIMIZE=6]="MINIMIZE",t[t.SHOWMINNOACTIVE=7]="SHOWMINNOACTIVE",t[t.SHOWNA=8]="SHOWNA",t[t.RESTORE=9]="RESTORE"}(t.WindowState||(t.WindowState={}));var n=(t.WindowState,function(){function t(){}return Object.defineProperty(t.prototype,"hwnd",{get:function(){return this._hwnd},set:function(t){this._hwnd=Number(t),this._pid=Number(e.callDll("xsplit.GetWindowProcessId",String(this._hwnd))),this._title=e.callDll("xsplit.GetWindowTitle",String(this._hwnd)),this._state=Number(e.callDll("xsplit.GetWindowState",String(this._hwnd))),this._detail=e.callDll("xsplit.GetProcessDetails",String(this._pid))},enumerable:!0,configurable:!0}),t.prototype.getPID=function(){return this._pid},t.prototype.getTitle=function(){return this._title},t.prototype.getState=function(){return this._state},t.prototype.getDetail=function(){return this._detail},t.parse=function(e){var n=new t;return e.hwnd&&(n.hwnd=e.hwnd),n},t}());t.Window=n}(e=t.system||(t.system={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.utils.Rectangle,n=internal.utils.JSON,i=internal.utils.XML,r=function(){function t(t){this.bounds=t}return t.prototype.needsSelector=function(){return void 0===this.bounds},t.prototype.isRegion=function(){return void 0!==this.bounds},t.regionSelect=function(){return new t},t.fromRectangle=function(n,i,r,o){var a=e.parse(i+","+n+","+(n+r)+","+(i+o));return new t(a)},t.prototype.toXML=function(){var t=new n;return t.tag="screen",t.module="",t.window="",t.hwnd="",t.wclient="0",this.isRegion()&&(t.left=this.bounds.getLeft(),t.top=this.bounds.getTop(),t.width=this.bounds.getRight()-this.bounds.getLeft(),t.height=this.bounds.getBottom()-this.bounds.getTop()),i.parseJSON(t)},t}();t.ScreenRegion=r}(e=t.system||(t.system={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=function(){function t(t){this.file=t}return t.prototype.toString=function(){return this.file},t}();t.File=e;var n=function(){function t(t){this.url=t}return t.prototype.toString=function(){return this.url},t}();t.URL=n}(e=t.system||(t.system={}))}(xui||(xui={}));var xui;!function(t){var e;!function(e){var n=internal.App,i=t.system.Window;!function(t){t[t.RENDER=1]="RENDER",t[t.CAPTURE=2]="CAPTURE",t[t.ALL=3]="ALL"}(e.AudioDeviceDataflow||(e.AudioDeviceDataflow={}));var r=e.AudioDeviceDataflow;!function(t){t[t.ACTIVE=1]="ACTIVE",t[t.DISABLED=2]="DISABLED",t[t.UNPLUGGED=4]="UNPLUGGED",t[t.NOTPRESENT=8]="NOTPRESENT",t[t.ALL=15]="ALL"}(e.AudioDeviceState||(e.AudioDeviceState={}));var o=e.AudioDeviceState,a=function(){function t(){}return t.getAudioDevices=function(t,i){return void 0===t&&(t=r.ALL),void 0===i&&(i=o.ALL),new Promise(function(a){n.getAsList("wasapienum").then(function(n){var s=[];if(void 0!==n)for(var u=0;u<n.length;u++){var c=n[u],h=o[String(c.state).toUpperCase().replace(/\s+/g,"")];if((h&i)===h){var l=r[String(c.dataflow).toUpperCase()];(l&t)===l&&s.push(e.AudioDevice.parse(c))}}a(s)})})},t.getVideoDevices=function(){return new Promise(function(t){n.getAsList("dshowenum:vsrc").then(function(n){var i=[];if(void 0!==n)for(var r=0;r<n.length;r++)/XSplit/gi.test(n[r].name)||i.push(e.VideoDevice.parse(n[r]));t(i)})})},t.getGames=function(){return new Promise(function(t){n.getAsList("gsenum").then(function(n){var i=[];if(void 0!==n)for(var r=0;r<n.length;r++)i.push(e.Game.parse(n[r]));t(i)})})},t.getProcesses=function(){return new Promise(function(t){for(var i=(n.callDll("xsplit.EnumProcesses")||"").split(","),r=[],o=0;o<i.length;o++)r.push(new e.Process(Number(i[o])));t(r)})},t.getVisibleWindows=function(){return new Promise(function(t){for(var e=(n.callDll("xsplit.EnumParentWindows")||"").split(","),r=[],o=0;o<e.length;o++)r.push(i.parse({hwnd:Number(e[o])}));t(r)})},t.getActiveWindow=function(){return Promise.resolve(i.parse({hwnd:Number(n.callDll("xsplit.GetForegroundWindow"))}))},t}();e.System=a}(e=t.system||(t.system={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item,n=internal.utils.JSON,i=internal.utils.XML,r=internal.Environment;!function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t.FILE=1]="FILE",t[t.LIVE=2]="LIVE",t[t.TEXT=3]="TEXT",t[t.BITMAP=4]="BITMAP",t[t.SCREEN=5]="SCREEN",t[t.FLASHFILE=6]="FLASHFILE",t[t.GAMESOURCE=7]="GAMESOURCE",t[t.HTML=8]="HTML"}(t.ItemTypes||(t.ItemTypes={}));var o=t.ItemTypes,a=function(){function a(t){t=t?t:{},this.name=t.name,this.id=t.id,this.sceneID=t.sceneID,this.viewID=t.viewID,this.value=t.value,this.keepLoaded=t.keeploaded,this.type=t.type,this.item=t.item}return a.prototype.setName=function(t){var n=e.attach(this.id,this.viewID);this.name=t,e.set("prop:name",this.name,n)},a.prototype.getName=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:name",i).then(function(e){t.name=e,n(e)})})},a.prototype.getValue=function(){var t=this;return new Promise(function(r){var o=e.attach(t.id,t.viewID);e.get("prop:item",o).then(function(e){e="null"===e?"":e,""===e&&(t.value="",r(e));try{t.value=i.parseJSON(n.parse(e)),r(t.value)}catch(o){t.value=e,r(e)}r(t.value)})})},a.prototype.setValue=function(t){var i=e.attach(this.id,this.viewID),r="string"==typeof t?t:t.toString();"string"!=typeof t&&(this.value=n.parse(r)),e.set("prop:item",r,i)},a.prototype.getKeepLoaded=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:keeploaded",i).then(function(e){t.keepLoaded="1"===e,n(t.keepLoaded)})})},a.prototype.setKeepLoaded=function(t){var n=e.attach(this.id,this.viewID);this.keepLoaded=t,e.set("prop:keeploaded",this.keepLoaded?"1":"0",n)},a.prototype.getType=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:type",i).then(function(e){t.type=o[o[Number(e)]],n(t.type)})})},a.prototype.getID=function(){var t=this;return new Promise(function(e){e(t.id)})},a.prototype.getSceneID=function(){var t=this;return new Promise(function(e){e(Number(t.sceneID)+1)})},a.prototype.getViewID=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:viewid",i).then(function(e){t.viewID=Number(e),n(t.viewID)})})},a.prototype.toXML=function(){var t=new n;return t.tag="item",void 0===this.position?(t.pos_left=t.pos_top=.25,t.pos_right=t.pos_bottom=.75):(t.pos_left=this.position.getLeft()||.25,t.pos_top=this.position.getTop()||.25,t.pos_right=this.position.getRight()||.25,t.pos_bottom=this.position.getBottom()||.25),t.name=this.name,t.item=this.value,t.type=this.type,i.parseJSON(t)},a.getCurrentSource=function(){if(r.isScriptPlugin())throw new Error("Script plugins do not have a source associated with them.");return r.isSourceHtml()||r.isSourceConfig()?new Promise(function(n){t.View.MAIN.searchItems(e.getBaseID()).then(function(t){n(t[0])})}):void 0},a}();t.Item=a}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item,n=internal.utils.Rectangle,i=function(){function t(){}return t.prototype.isKeepAspectRatio=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:keep_ar",i).then(function(t){n("1"===t)})})},t.prototype.setKeepAspectRatio=function(t){var n=e.attach(this.id,this.viewID);e.set("prop:keep_ar",t?"1":"0",n)},t.prototype.isPositionLocked=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:lockmove",i).then(function(t){n("1"===t)})})},t.prototype.setPositionLocked=function(t){var n=e.attach(this.id,this.viewID);e.set("prop:lockmove",t?"1":"0",n)},t.prototype.isEnhanceResizeEnabled=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:mipmaps",i).then(function(t){n("1"===t)})})},t.prototype.setEnhanceResizeEnabled=function(t){var n=e.attach(this.id,this.viewID);e.set("prop:mipmaps",t?"1":"0",n)},t.prototype.isPixelAlignmentEnabled=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:pixalign",i).then(function(t){n("1"===t)})})},t.prototype.setPixelAlignmentEnabled=function(t){var n=e.attach(this.id,this.viewID);e.set("prop:pixalign",t?"1":"0",n)},t.prototype.getPosition=function(){var t=this;return new Promise(function(i){var r=e.attach(t.id,t.viewID);e.get("prop:pos",r).then(function(e){t.position=n.parse(e),i(t.position)})})},t.prototype.setPosition=function(t){var n=e.attach(this.id,this.viewID);this.position=t,e.set("prop:pos",t.toString(),n)},t}();internal.utils.applyMixins(t.Item,[i])}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item,n=internal.utils.Color,i=function(){function t(){}return t.prototype.getTransparency=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:alpha",i).then(function(t){n(Number(t))})})},t.prototype.setTransparency=function(t){var n=e.attach(this.id,this.viewID);t=0>t?0:t>255?255:t,e.set("prop:alpha",String(t),n)},t.prototype.getBrightness=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:cc_brightness",i).then(function(t){n(Number(t))})})},t.prototype.setBrightness=function(t){var n=e.attach(this.id,this.viewID);t=-100>t?-100:t>100?100:t,e.set("prop:cc_brightness",String(t),n)},t.prototype.getContrast=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:cc_contrast",i).then(function(t){n(Number(t))})})},t.prototype.setContrast=function(t){var n=e.attach(this.id,this.viewID);t=-100>t?-100:t>100?100:t,e.set("prop:cc_contrast",String(t),n)},t.prototype.getHue=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:cc_hue",i).then(function(t){n(Number(t))})})},t.prototype.setHue=function(t){var n=e.attach(this.id,this.viewID);t=-180>t?-180:t>180?180:t,e.set("prop:cc_hue",String(t),n)},t.prototype.getSaturation=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:cc_saturation",i).then(function(t){n(Number(t))})})},t.prototype.setSaturation=function(t){var n=e.attach(this.id,this.viewID);t=-100>t?-100:t>100?100:t,e.set("prop:cc_saturation",String(t),n)},t.prototype.getBorderColor=function(){var t=this;return new Promise(function(i){var r=e.attach(t.id,t.viewID);e.get("prop:border",r).then(function(t){var e=Number(t)-2147483648,r=n.fromBGRInt(e);i(r)})})},t.prototype.setBorderColor=function(t){var n=e.attach(this.id,this.viewID);e.set("prop:border",String(t.getIbgr()-2147483648),n)},t}();internal.utils.applyMixins(t.Item,[i])}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item,n=function(){function t(){}return t.prototype.getVolume=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:volume",i).then(function(t){n(Number(t))})})},t.prototype.setVolume=function(t){var n=e.attach(this.id,this.viewID);t=0>t?0:t>100?100:t,e.set("prop:volume",String(t),n)},t.prototype.isMuted=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:mute",i).then(function(t){n("1"===t)})})},t.prototype.setMuted=function(t){var n=e.attach(this.id,this.viewID);e.set("prop:mute",t?"1":"0",n)},t}();internal.utils.applyMixins(t.Item,[n])}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item,n=function(){function t(){}return t.prototype.isWindowTracking=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:ScrCapTrackWindowTitle",i).then(function(t){n("0"===t)})})},t.prototype.setWindowTracking=function(t){var n=e.attach(this.id,this.viewID);e.set("prop:ScrCapTrackWindowTitle",t?"0":"1",n)},t}();internal.utils.applyMixins(t.Item,[n])}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item,n=function(){function t(){}return t.prototype.getCuePoints=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:CuePoints",i).then(function(t){var e,i;e=t.split(","),i=e.map(function(t){return Number(t)/10}),n(i)})})},t}();internal.utils.applyMixins(t.Item,[n])}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item,n=internal.utils.Color;!function(t){t[t.KEY=0]="KEY",t[t.COLOR=1]="COLOR",t[t.RGB=2]="RGB"}(t.ChromaTypes||(t.ChromaTypes={}));t.ChromaTypes;!function(t){t[t.RED=0]="RED",t[t.GREEN=1]="GREEN",t[t.BLUE=2]="BLUE"}(t.ChromaPrimaryColors||(t.ChromaPrimaryColors={}));t.ChromaPrimaryColors;!function(t){t[t.NONE=0]="NONE",t[t.LOW=1]="LOW",t[t.HIGH=2]="HIGH"}(t.ChromaAntiAlias||(t.ChromaAntiAlias={}));var i=(t.ChromaAntiAlias,function(){function t(){}return t.prototype.isChromaEnabled=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:key_chromakey",i).then(function(t){n("1"===t)})})},t.prototype.setChromaEnabled=function(t){var n=e.attach(this.id,this.viewID);e.set("prop:key_chromakey",t?"1":"0",n)},t.prototype.getChromaBrightness=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:key_chromabr",i).then(function(t){n(Number(t))})})},t.prototype.setChromaBrightness=function(t){var n=e.attach(this.id,this.viewID);t=0>t?0:t>255?255:t,e.set("prop:key_chromabr",String(t),n)},t.prototype.getChromaSaturation=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:key_chromasat",i).then(function(t){n(Number(t))})})},t.prototype.setChromaSaturation=function(t){var n=e.attach(this.id,this.viewID);t=0>t?0:t>255?255:t,e.set("prop:key_chromasat",String(t),n)},t.prototype.getChromaHue=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:key_chromahue",i).then(function(t){n(Number(t))})})},t.prototype.setChromaHue=function(t){var n=e.attach(this.id,this.viewID);t=-180>t?-180:t>180?180:t,e.set("prop:key_chromahue",String(t),n)},t.prototype.getChromaType=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:key_chromakeytype",i).then(function(t){n(Number(t))})})},t.prototype.setChromaType=function(t){var n=e.attach(this.id,this.viewID);t=0>t?0:t>2?2:t,e.set("prop:key_chromakeytype",String(t),n)},t.prototype.getChromaColor=function(){var t=this;return new Promise(function(i){var r=e.attach(t.id,t.viewID);e.get("prop:key_colorrgb",r).then(function(t){var e=n.fromBGRString(t);i(e)})})},t.prototype.setChromaColor=function(t){var n=e.attach(this.id,this.viewID);e.set("prop:key_colorrgb",t.getBgr(),n)},t.prototype.getChromaPrimaryColor=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:key_chromargbkeyprimary",i).then(function(t){n(Number(t))})})},t.prototype.setChromaPrimaryColor=function(t){var n=e.attach(this.id,this.viewID);t=0>t?0:t>2?2:t,e.set("prop:key_chromargbkeyprimary",String(t),n)},t.prototype.getChromaBalance=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:key_chromargbkeybalance",i).then(function(t){
n(Number(t))})})},t.prototype.setChromaBalance=function(t){var n=e.attach(this.id,this.viewID);t=0>t?0:t>255?255:t,e.set("prop:key_chromargbkeybalance",String(t),n)},t.prototype.getChromaAntiAlias=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:key_antialiasing",i).then(function(t){n(Number(t))})})},t.prototype.setChromaAntiAlias=function(t){var n=e.attach(this.id,this.viewID);t=0>t?0:t>2?2:t,e.set("prop:key_antialiasing",String(t),n)},t.prototype.getChromaThreshold=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:key_chromarang",i).then(function(t){n(Number(t))})})},t.prototype.setChromaThreshold=function(t){var n=e.attach(this.id,this.viewID);t=0>t?0:t>255?255:t,e.set("prop:key_chromarang",String(t),n)},t.prototype.getChromaThresholdAA=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:key_chromaranga",i).then(function(t){n(Number(t))})})},t.prototype.setChromaThresholdAA=function(t){var n=e.attach(this.id,this.viewID);t=0>t?0:t>255?255:t,e.set("prop:key_chromaranga",String(t),n)},t}());internal.utils.applyMixins(t.Item,[i])}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item;!function(t){t[t.NOTHING=0]="NOTHING",t[t.REWIND=1]="REWIND",t[t.LOOP=2]="LOOP",t[t.HIDE=3]="HIDE"}(t.PlaybackEndAction||(t.PlaybackEndAction={}));var n=(t.PlaybackEndAction,function(){function t(){}return t.prototype.getPlaybackStartPos=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:InPoint",i).then(function(t){n(Number(t)/10)})})},t.prototype.setPlaybackStartPos=function(t){var n=e.attach(this.id,this.viewID);t=0>t?0:t,e.set("prop:InPoint",String(10*t),n)},t.prototype.getPlaybackEndPos=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:OutPoint",i).then(function(t){n(Number(t)/10)})})},t.prototype.setPlaybackEndPos=function(t){var n=e.attach(this.id,this.viewID);t=0>t?0:t,e.set("prop:OutPoint",String(10*t),n)},t.prototype.getPlaybackEndAction=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("prop:OpWhenFinished",i).then(function(t){n(Number(t))})})},t.prototype.setPlaybackEndAction=function(t){var n=e.attach(this.id,this.viewID);e.set("prop:OpWhenFinished",String(t),n)},t.prototype.getPlaybackDuration=function(){var t=this;return new Promise(function(n){var i=e.attach(t.id,t.viewID);e.get("sync:duration",i).then(function(t){n(Number(t))})})},t.prototype.setPlaybackDuration=function(t){var n=e.attach(this.id,this.viewID);e.set("sync:duration",String(t),n)},t}());internal.utils.applyMixins(t.Item,[n])}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.Item,n=internal.Environment,i=function(){function t(){}return t.prototype.loadConfig=function(){var t=this;return new Promise(function(n){e.attach(t.id,t.viewID),e.get("prop:BrowserConfiguration").then(function(t){var e=window.JSON.parse(t),i=internal.persistedConfig;for(var r in i)delete e[r];n(e)})})},t.prototype.saveConfig=function(t){var e=internal.persistedConfig;for(var i in e)t[i]=e[i];if(!n.isSourceHtml())throw new Error("Only the source HTML itself may save configuration. Consider applyConfig() instead.");internal.exec("SetBrowserProperty","Configuration",window.JSON.stringify(t))},t.prototype.applyConfig=function(t){var n=e.attach(this.id,this.viewID);e.set("prop:BrowserConfiguration",window.JSON.stringify(t),n)},t}();internal.utils.applyMixins(t.Item,[i])}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(e){var n=internal.App,i=t.core.Item,r=internal.utils.JSON,o=internal.Item,a=internal.Environment,s=t.system.VideoDevice,u=t.system.Game,c=t.system.File,h=t.system.URL,l=t.system.ScreenRegion,p=internal.utils.XML,f=function(){function f(t){this.id=t.id,this.viewID=t.viewID}return f.prototype.getID=function(){var t=this;return new Promise(function(e){e(t.id)})},f.prototype.getViewID=function(){var t=this;return new Promise(function(e){e(t.viewID)})},f.prototype.getItems=function(){var t=this;return new Promise(function(e){n.getAsList("presetconfig:"+t.id).then(function(n){var r=[];if(Array.isArray(n))for(var o=0;o<n.length;o++){n[o].sceneID=t.id,n[o].viewID=t.viewID;var a=new i(n[o]);r.push(a)}e(r)})})},f.prototype.isEmpty=function(){var t=this;return new Promise(function(e){n.get("presetisempty:"+t.id).then(function(t){e("1"===t)})})},f.prototype.getName=function(){var t=this;return new Promise(function(e){n.get("presetname:"+t.id).then(function(t){e(t)})})},f.prototype.setName=function(t){if(a.isSourceHtml())throw new Error("Scene names are readonly for source plugins.");n.set("presetname:"+this.id,t)},f.get=function(e){return new Promise(function(s){var u,c=new i({id:o.getBaseID()});if(void 0===e)if(a.isSourceHtml()){var h;c.getViewID().then(function(t){return u=Number(t),n.get("presetconfig:-1")}).then(function(e){return h=r.parse(e),new t.core.View(u).getScenes(h.name)}).then(function(t){s(t[0])})}else t.core.View.MAIN.getActiveScene().then(function(t){s(t)});else a.isSourceHtml()?c.getViewID().then(function(n){return u=Number(n),new t.core.View(u).getScene(e)}).then(function(t){s(t)}):t.core.View.MAIN.getScene(e).then(function(t){s(t)})})},f.prototype.add=function(t){t instanceof s?this.addVideoDevice(t):t instanceof u?this.addGame(t):t instanceof c?this.addFile(t):t instanceof h?this.addUrl(t):t instanceof l&&this.addScreenRegion(t)},f.prototype.addVideoDevice=function(t){if(void 0!==t){var r=new i({value:p.encode(t.disp.toUpperCase()),name:t.name,type:e.ItemTypes.LIVE});n.callFunc("additem",r.toXML().toString())}},f.prototype.addGame=function(t){if(void 0!==t){var r=new i({name:t.getWindowName()+" ("+t.getGapiType()+")",value:p.encode(t.toXML().toString()),type:e.ItemTypes.GAMESOURCE});n.callFunc("additem",r.toXML().toString())}},f.prototype.addFile=function(t){if(void 0!==t){var r=new i({value:t.toString(),name:t.toString(),type:e.ItemTypes.FILE});n.callFunc("additem",r.toXML().toString())}},f.prototype.addScreenRegion=function(t){t.needsSelector()?n.callFunc("addscreen",""):n.callFunc("addscreen",t.toXML().toString())},f.prototype.addUrl=function(t){if(void 0!==t){var r=new i({value:t.toString(),name:t.toString(),type:e.ItemTypes.HTML});n.callFunc("additem",r.toXML().toString())}},f.prototype.removeSource=function(t){void 0!==t&&n.callFunc("removesrc",t.id)},f}();e.Scene=f}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(e){var n,i=internal.App,r=t.core.Scene;!function(t){t[t.MAIN=0]="MAIN",t[t.PREVIEW=1]="PREVIEW"}(n||(n={}));var o=function(){function t(t){this.id=t||0}return t.prototype.getViewID=function(){var t=this;return new Promise(function(e){e(t.id)})},t.prototype.getScenes=function(t){var e=this;return new Promise(function(n){var o=[],a="string"==typeof t?new RegExp(t,"gi"):new RegExp("");i.getAsList("presetconfig").then(function(i){for(var s=0;s<i.length;s++)if("global"!==i[s].tag){if("number"==typeof t&&s===t){o.push(new r({id:s,viewID:e.id}));break}(void 0===t||"string"==typeof t&&a.test(i[s].name))&&o.push(new r({id:s,viewID:e.id}))}n(o)})})},t.prototype.getScenesCount=function(){return new Promise(function(t){i.get("presetcount").then(function(e){t(e)})})},t.prototype.setActiveScene=function(t){"object"==typeof t?t.getID().then(function(t){i.set("preset",t.toString())}):"number"==typeof t&&i.set("preset",t.toString())},t.prototype.getActiveScene=function(){var t=this;return new Promise(function(e){i.get("preset:"+t.id).then(function(n){var i=new r({id:n,viewID:t.id});e(i)})})},t.prototype.getScene=function(t){var e=this;return new Promise(function(n){n(new r({id:t,viewID:e.id}))})},t.prototype.searchItems=function(t){var e=this,n=/^{[A-F0-9-]*}$/i.test(t),i=[];if(n){var r=!1;return new Promise(function(n){e.getScenes().then(function(e){e.forEach(function(e,o,a){r||e.getItems().then(function(e){r=e.some(function(e){return e.id===t?(i.push(e),n(i),!0):!1}),o===a.length-1&&n(i)})})})})}return new Promise(function(n){e.getScenes().then(function(e){return Promise.all(e.map(function(e){return new Promise(function(n){e.getItems().then(function(e){return 0!==e.length?Promise.all(e.map(function(e){return new Promise(function(n){e.getName().then(function(n){return n.match(t)?(i.push(e),""):e.getValue()}).then(function(r){r.toString().match(t)&&i.push(e),n()})})})).then(function(){n()}):void n()})})})).then(function(){n(i)})})})},t.MAIN=new t(n.MAIN),t.PREVIEW=new t(n.PREVIEW),t}();e.View=o}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(e){var n=t.core.Scene,i=internal.utils.JSON,r=internal.utils.XML,o=function(){function t(t){this.currentScene=new n({id:t.currentScene,viewID:"1"}),this.version=t.version,this.sceneDetails=t.placements,this.global=t.global}return t.prototype.toXML=function(){var t=new i;t.tag="configuration",t.cur=this.currentScene.getID(),t.Version=this.version,t.children=[];for(var e=0;e<this.sceneDetails.length;e++){var n=(this.sceneDetails[e],{});n.tag="placement",n.name=this.sceneDetails[e].name,n.defpos=this.sceneDetails[e].defpos;for(var o=this.sceneDetails[e].items,a=0;a<o.length;a++){var s=o[a].item;void 0!==s&&(o[a].item=r.encode(s)),o[a].name=r.encode(o[a].name)}n.children=o,t.children.push(n)}var u={};u.tag="global";var c=this.global.children;if(void 0!==c){for(var h=0;h<c.length;h++)c[h].id=r.encode(c[h].id);u.children=c,t.children.push(u)}return r.parseJSON(t)},t}();e.Presentation=o}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(e){function n(t){return new Promise(function(e){t.getID().then(function(n){a.get("presetconfig:"+n).then(function(t){return s.parse(t)}).then(function(e){return t.defpos=e.defpos,t.items=void 0!==e.children?e.children:[],t.getName()}).then(function(n){t.name=n,e(t)})})})}function i(){return new Promise(function(t){a.getAsList("presetconfig").then(function(e){t(e[e.length-1])})})}var r=internal.utils.Rectangle,o=t.system.AudioDevice,a=internal.App,s=internal.utils.JSON,u=internal.utils.XML,c=t.core.Presentation,h=t.core.View,l=function(){function t(){}return t.prototype.callDll=function(){return a.callDll.apply(this,arguments)},t.prototype.getFrametime=function(){return new Promise(function(t){a.get("frametime").then(function(e){t(e)})})},t.prototype.getResolution=function(){return new Promise(function(t){a.get("resolution").then(function(e){t(r.parse(e))})})},t.prototype.getViewport=function(){return new Promise(function(t){a.get("viewport").then(function(e){t(r.parse(e))})})},t.prototype.getVersion=function(){return new Promise(function(t){t(a.get("version"))})},t.prototype.getFramesRendered=function(){return new Promise(function(t){t(a.get("version"))})},t.prototype.getAudioDevices=function(){return new Promise(function(t){a.getAsList("microphonedev2").then(function(e){t(e.map(function(t){return o.parse(t)}))})})},t.prototype.setAudioDevices=function(t){var e="";if(Array.isArray(t))for(var n=0;n<t.length;++n)e+=t[n].toString();e="<devices>"+e+"</devices>",a.set("microphonedev2",e)},t.prototype.getAudioGain=function(){return new Promise(function(t){a.get("microphonegain").then(function(e){t(s.parse(e))})})},t.prototype.setAudioGain=function(t){t.tag="configuration",a.set("microphonegain",u.parseJSON(t).toString())},t.prototype.newDialog=function(t){void 0!==t&&""!==t&&a.callFunc("newdialog",t)},t.prototype.newAutoDialog=function(t){void 0!==t&&""!==t&&a.callFunc("newautodialog",t)},t.prototype.closeDialog=function(){internal.exec("CloseDialog")},t.prototype.getTransition=function(){return new Promise(function(t){a.get("transitionid").then(function(e){t(e)})})},t.prototype.setTransition=function(t){a.set("transitionid",t)},t.prototype.getTransitionTime=function(){return new Promise(function(t){a.get("transitiontime").then(function(e){t(Number(e))})})},t.prototype.setTransitionTime=function(t){a.set("transitiontime",t.toString())},t.prototype.getCurrentPresentation=function(){var t=this;return new Promise(function(e){var r,o,a,s,u;h.MAIN.getActiveScene().then(function(e){return r=e,t.getVersion()}).then(function(t){return o=t,h.MAIN.getScenes()}).then(function(t){return Promise.all(t.map(function(t,e,i){return e!==i.length?n(t):Promise.resolve(t)}))}).then(function(t){return s=t,i()}).then(function(t){u=t,a=new c({currentScene:r.getID(),version:o,placements:s,global:u}),e(a)})})},t.prototype.load=function(t){t instanceof c?a.callFunc("loadpresets",t.toXML().toString()):/\.bpres$/i.test(t)&&a.callFunc("loadpresets",t)},t.prototype.save=function(t){a.callFunc("savepresets",t)},t.prototype.clearPresentation=function(){a.callFunc("newpresets","")},t.TRANSITION_CLOCK="clock",t.TRANSITION_COLLAPSE="collapse",t.TRANSITION_MOVE_BOTTOM="move_bottom",t.TRANSITION_MOVE_LEFT="move_left",t.TRANSITION_MOVE_LEFT_RIGHT="move_left_right",t.TRANSITION_MOVE_RIGHT="move_right",t.TRANSITION_MOVE_TOP="move_top",t.TRANSITION_FAN="fan",t.TRANSITION_HOLE="hole",t.TRANSITION_WAVE="wave",t}();e.App=l}(e=t.core||(t.core={}))}(xui||(xui={}));var xui;!function(t){var e;!function(t){var e=internal.App,n=function(){function t(t){this.name=t.name,this.stat=t.stat,this.channel=t.channel}return t.prototype.getStreamDrops=function(){var t=this;return new Promise(function(n){e.get("streamdrops:"+t.name).then(function(t){var e=t.split(","),i=Number(e[0])||0,r=Number(e[1])||0;n({dropped:i,rendered:r})})})},t.prototype.getStreamTime=function(){var t=this;return new Promise(function(n){e.get("streamtime:"+t.name).then(function(t){var e=Number(t)/10;n(e)})})},t}();t.Channel=n}(e=t.core||(t.core={}))}(xui||(xui={})),function(t){"use strict";t=t||{},"function"==typeof define&&define.amd?define(function(){return t}):window.di=t,"version"in t||(t.version="1.1.3");var e=function(t){this.__name="DependencyResolverException",this.__stack=null,this.__message=t||"A dependency resolver exception has occurred.";var e,n,i;if("undefined"!=typeof navigator&&-1!==navigator.userAgent.indexOf("Chrome")||"undefined"==typeof navigator){if(e=(new Error).stack.split("\n"),e&&e.length>2){for(i=[],n=2;n<e.length;n++)e[n]&&i.push(e[n].trim());this.stack=i.join("\n")}}else if("undefined"!=typeof navigator&&-1!==navigator.userAgent.indexOf("Firefox")){if(e=(new Error).stack.split("\n"),e&&e.length>1){for(i=[],n=1;n<e.length;n++)e[n]&&i.push("at "+e[n].trim().replace("@"," (")+")");this.stack=i.join("\n")}}else if("undefined"!=typeof navigator&&-1!==navigator.userAgent.indexOf("Trident"))try{throw new Error}catch(r){if("stack"in r){if(e=r.stack.split("\n"),e&&e.length>2){for(i=[],n=2;n<e.length;n++)e[n]&&i.push(e[n].trim());this.stack=i.join("\n")}}else this.stack=""}else{var r=new Error;this.stack="stack"in r?r.stack:""}Object.defineProperty(this,"__name",{enumerable:!1}),Object.defineProperty(this,"__message",{enumerable:!1}),Object.defineProperty(this,"__stack",{enumerable:!1}),Object.seal(this)};e.prototype=Object.create(Object.prototype,{name:{get:function(){return this.__name},set:function(t){this.__name=t},enumerable:!0},message:{get:function(){return this.__message},set:function(t){this.__message=t},enumerable:!0},stack:{get:function(){return this.__stack},set:function(t){this.__stack=t},enumerable:!0},toString:{value:function(){var t=this.name+": "+this.message;return this.stack&&(t+="\n	"+this.stack.replace(/\n/g,"\n	")),t},enumerable:!0}}),Object.seal(e),Object.seal(e.prototype),t.DependencyResolverException=e;var n=function(t){if(this.__name=null,this.__type=null,this.__parameters=null,t)for(var n in t){if(!(n in this))throw new e("Class 'InstanceFactoryOptions' doesn't have a property '"+n+"'");this[n]=t[n]}Object.defineProperty(this,"__name",{enumerable:!1}),Object.defineProperty(this,"__type",{enumerable:!1}),Object.defineProperty(this,"__parameters",{enumerable:!1}),Object.seal(this)};n.prototype=Object.create(Object.prototype,{name:{get:function(){return this.__name},set:function(t){this.__name=t},enumerable:!0},type:{get:function(){return this.__type},set:function(t){this.__type=t},enumerable:!0},parameters:{get:function(){return this.__parameters},set:function(t){this.__parameters=t},enumerable:!0},toString:{value:function(){return"[object InstanceFactoryOptions]"},enumerable:!0}}),Object.seal(n),Object.seal(n.prototype),t.InstanceFactoryOptions=n;var i=Object.create(Object.prototype,{create:{value:function(t){},enumerable:!0},toString:{value:function(){return"[object IInstanceFactory]"},enumerable:!0}});Object.freeze(i),t.IInstanceFactory=i;var r=function(){Object.seal(this)};r.prototype=Object.create(Object.prototype,{create:{value:function(t){if(!t)throw new e("Parameter 'options' is not set");if("type"in t&&!t.type)throw new e("Factory can't create object, because type is not set");if("function"!=typeof t.type)throw new e("Factory can't create object, because given type is not a function");if(t.type===Number||t.type===Date||t.type===Boolean||t.type===String||t.type===Array||t.type===Function||t.type===RegExp)throw new e("Basic type can not be instantiated using a factory");var n=null;return t.parameters&&t.parameters.length>0?(n=Object.create(t.type.prototype),t.type.apply(n,t.parameters)):n=new t.type,n},enumerable:!0},toString:{value:function(){return"[object InstanceFactory]"},enumerable:!0}}),Object.seal(r),Object.seal(r.prototype),t.InstanceFactory=r;var o=Object.create(Object.prototype,{transform:{value:function(t){},enumerable:!0},toString:{value:function(){return"[object INameTransformer]"},enumerable:!0}});Object.freeze(o),t.INameTransformer=o;var a=function(){Object.seal(this)};a.prototype=Object.create(Object.prototype,{transform:{value:function(t){if(!t)throw new e("Parameter 'name' is not passed to the method 'transform'");return t},enumerable:!0},toString:{value:function(){return"[object NameTransformer]"},enumerable:!0}}),Object.seal(a),Object.seal(a.prototype),t.NameTransformer=a;var s=Object.create(Object.prototype,{isAutowired:{get:function(){},enumerable:!0},autowired:{value:function(t){},enumerable:!0},register:{value:function(t){},enumerable:!0},as:{value:function(t){},enumerable:!0},instance:{value:function(t){},enumerable:!0},asSingleton:{value:function(){},enumerable:!0},withConstructor:{value:function(){},enumerable:!0},param:{value:function(t){},enumerable:!0},withProperties:{value:function(t){},enumerable:!0},prop:{value:function(t){},enumerable:!0},val:{value:function(t){},enumerable:!0},ref:{value:function(t){},enumerable:!0},setFactory:{value:function(t){},enumerable:!0},create:{value:function(){},enumerable:!0},inject:{value:function(t,e){},enumerable:!0},contains:{value:function(t){},enumerable:!0},resolve:{value:function(t){},enumerable:!0},getDefaultFactory:{value:function(){},enumerable:!0},setDefaultFactory:{value:function(t){},enumerable:!0},getNameTransformer:{value:function(){},enumerable:!0},setNameTransformer:{value:function(t){},enumerable:!0},getRegistration:{value:function(t){},enumerable:!0},dispose:{value:function(){},enumerable:!0},toString:{value:function(){return"[object IDependencyResolver]"},enumerable:!0}});Object.freeze(s),t.IDependencyResolver=s;var u=function(t){this.__parent=t,this.__defaultFactory=null,this.__nameTransformer=null,this.__autowired=!1,this.__container=null,this.__registration=null,this.__withProperties=!1,this.__withConstructor=!1,this.__parameter=null,this.__property=null,this.__function=null,t&&(this.__autowired=t.isAutowired),Object.defineProperty(this,"__parent",{enumerable:!1}),Object.defineProperty(this,"__defaultFactory",{enumerable:!1}),Object.defineProperty(this,"__nameTransformer",{enumerable:!1}),Object.defineProperty(this,"__autowired",{enumerable:!1}),Object.defineProperty(this,"__container",{enumerable:!1}),Object.defineProperty(this,"__registration",{enumerable:!1}),Object.defineProperty(this,"__withProperties",{enumerable:!1}),Object.defineProperty(this,"__withConstructor",{enumerable:!1}),Object.defineProperty(this,"__parameter",{enumerable:!1}),Object.defineProperty(this,"__property",{enumerable:!1}),Object.defineProperty(this,"__function",{enumerable:!1}),Object.seal(this)};u.prototype=Object.create(Object.prototype,{isAutowired:{get:function(){return this.__autowired},enumerable:!0},autowired:{value:function(t){if((void 0===t||null===t)&&(t=!0),"boolean"!=typeof t)throw new e("Parameter 'value' passed to the method 'autowired' has to be a 'boolean'");return this.__autowired=t,this},enumerable:!0},register:{value:function(t){if(!t)throw new e("Parameter 'name' is not passed to the method 'register'");if("string"!=typeof t)throw new e("Parameter 'name' passed to the method 'register' has to be a 'string'");return this.__container||(this.__container=Object.create(null)),this.__registration={name:t,singleton:!1,type:null,instance:null,factory:null,dependencies:null},t in this.__container?(this.__container[t]instanceof Array||(this.__container[t]=[this.__container[t]]),this.__container[t].push(this.__registration)):this.__container[t]=this.__registration,this.__withConstructor=!1,this.__withProperties=!1,this.__parameter=null,this.__property=null,this},enumerable:!0},as:{value:function(t){if(!this.__registration)throw new e("Registration's name is not defined");if(!t)throw new e("Parameter 'type' is not passed to the method 'as' for registration '"+this.__registration.name+"'");if("function"!=typeof t)throw new e("Parameter 'type' passed to the method 'as' has to be a 'function' for registration '"+this.__registration.name+"'");return this.__registration.instance=null,this.__registration.type=t,this.__registration.singleton=!1,this.__registration.dependencies={parameters:[],properties:[],functions:[]},this.__withConstructor=!1,this.__withProperties=!1,this.__parameter=null,this.__property=null,this.__function=null,this},enumerable:!0},instance:{value:function(t){if(!this.__registration)throw new e("Registration's name is not defined");if(null===t||void 0===t)throw new e("Parameter 'instance' is not passed to the method 'instance' for registration '"+this.__registration.name+"'");return this.__registration.instance=t,this.__registration.type=null,this.__registration.factory=null,this.__registration.singleton=!0,this.__registration.dependencies=null,this.__withConstructor=!1,this.__withProperties=!1,this.__parameter=null,this.__property=null,this.__function=null,this},enumerable:!0},asSingleton:{value:function(){if(!this.__registration)throw new e("Registration's name is not defined");if(!this.__registration.type)throw new e("Type is not set for registration '"+this.__registration.name+"'");return this.__registration.singleton=!0,this.__withConstructor=!1,this.__withProperties=!1,this.__parameter=null,this.__property=null,this.__function=null,this},enumerable:!0},withConstructor:{value:function(){if(!this.__registration)throw new e("Registration's name is not defined");if(!this.__registration.type)throw new e("Type is not set for registration '"+this.__registration.name+"'");return this.__withConstructor=!0,this.__withProperties=!1,this.__parameter=null,this.__property=null,this.__function=null,this},enumerable:!0},param:{value:function(t){if(!this.__registration)throw new e("Registration's name is not defined");if(!this.__registration.type)throw new e("Type is not set for registration '"+this.__registration.name+"'");var n,i=null,r=null;if(this.__withConstructor){if(i=this.__registration.dependencies.parameters,this.__autowired&&(void 0===t||null===t))throw new e("Parameter 'name' has to be passed to the method, when dependency container has option 'autowired' enabled");r=this.__findParameter(t,i,this.__registration)}else{if(!this.__withProperties)throw new e("Invocation of method 'withConstructor' or 'withProperties' is missing for registration '"+this.__registration.name+"'");if(!this.__function)throw new e("Function is not defined");i=this.__function.parameters,r=this.__findParameter(t,this.__function.parameters,this.__registration)}return r||(r={index:n,name:t,value:void 0,reference:void 0},i.push(r)),this.__parameter=r,this.__property=null,this},enumerable:!0},withProperties:{value:function(){if(!this.__registration)throw new e("Registration's name is not defined");if(!this.__registration.type)throw new e("Type is not set for registration '"+this.__registration.name+"'");return this.__withProperties=!0,this.__withConstructor=!1,this.__parameter=null,this.__property=null,this.__function=null,this},enumerable:!0},prop:{value:function(t){if(!this.__registration)throw new e("Registration's name is not defined");if(!t)throw new e("Parameter 'name' is not passed to the method 'prop' for registration '"+this.__registration.name+"'");if("string"!=typeof t)throw new e("Parameter 'name' passed to the method 'prop' has to be a 'string' for registration '"+this.__registration.name+"'");if(!this.__registration.type)throw new e("Type is not set for registration '"+this.__registration.name+"'");if(!this.__withProperties)throw new e("Invocation of method 'withProperties' is missing for registration '"+this.__registration.name+"'");for(var n=this.__registration.dependencies.properties,i=null,r=0;r<n.length;r++)if(n[r].name===t){i=n[r];break}return i||(i={name:t,value:void 0,reference:void 0},n.push(i)),this.__parameter=null,this.__property=i,this.__function=null,this},enumerable:!0},func:{value:function(t){if(!this.__registration)throw new e("Registration's name is not defined");if(!t)throw new e("Parameter 'name' is not passed to the method 'func' for registration '"+this.__registration.name+"'");if("string"!=typeof t)throw new e("Parameter 'name' passed to the method 'func' has to be a 'string' for registration '"+this.__registration.name+"'");if(!this.__registration.type)throw new e("Type is not set for registration '"+this.__registration.name+"'");if(!this.__withProperties)throw new e("Invocation of method 'withProperties' is missing for registration '"+this.__registration.name+"'");for(var n=this.__registration.dependencies.functions,i=null,r=0;r<n.length;r++)if(n[r].name===t){i=n[r];break}return i||(i={name:t,parameters:[]},n.push(i)),this.__parameter=null,this.__property=null,this.__function=i,this},enumerable:!0},val:{value:function(t){if(!this.__registration)throw new e("Registration's name is not defined");if(null===t||void 0===t)throw new e("Parameter 'instance' is not passed to the method 'val'");if(!this.__withProperties&&!this.__withConstructor)throw new e("Invocation of method withConstructor' or 'withProperties' is missing");if(this.__withConstructor&&!this.__parameter)throw new e("Parameter is not defined");if(this.__withProperties&&!this.__parameter&&!this.__property)throw new e("Parameter or property is not defined");return this.__parameter?(this.__parameter.value=t,this.__parameter.reference=void 0):this.__property&&(this.__property.value=t,this.__property.reference=void 0),this},enumerable:!0},ref:{value:function(t){if(!this.__registration)throw new e("Registration's name is not defined");if(!t)throw new e("Parameter 'name' is not passed to the method 'ref' for registration '"+this.__registration.name+"'");if("string"!=typeof t)throw new e("Parameter 'name' passed to the method 'ref' has to be a 'string' for registration '"+this.__registration.name+"'");if(!this.__withProperties&&!this.__withConstructor)throw new e("Invocation of method 'withConstructor' or 'withProperties' is missing for registration '"+this.__registration.name+"'");if(this.__withConstructor&&!this.__parameter)throw new e("Parameter is not defined");if(this.__withProperties&&!this.__parameter&&!this.__property)throw new e("Parameter or property is not defined");if(!this.contains(t))throw new e("Type or instance is not registered with name '"+t+"'");return this.__parameter?(this.__parameter.value=void 0,this.__parameter.reference=t):this.__property&&(this.__property.value=void 0,this.__property.reference=t),this},enumerable:!0},setFactory:{value:function(t){if(!this.__registration)throw new e("Registration's name is not defined");if(!t)throw new e("Parameter 'factory' is not passed to the method 'setFactory");if("function"!=typeof t&&"object"!=typeof t)throw new e("Parameter 'factory' passed to the method 'setFactory' has to be a 'function' or 'object'");if("object"==typeof t&&!("create"in t))throw new e("Factory's instance passed to the method 'setFactory' has to have a method 'create'");if(!this.__registration.type)throw new e("Type is not set for registration '"+this.__registration.name);return this.__registration.factory=t,this.__withConstructor=!1,this.__withProperties=!1,this.__parameter=null,this.__property=null,this.__function=null,this},enumerable:!0},create:{value:function(){return new u(this)},enumerable:!0},inject:{value:function(t){if(!t)throw new e("Parameter 'func' is not passed to method 'inject'");var n,i=[],r={resolving:[]};if(t instanceof Array){if(0===t.length)throw new e("The array passed to the method 'inject' can't be empty");for(n=0;n<t.length-1;n++)i.push(t[n]);if(t=t[t.length-1],"function"!=typeof t)throw new e("The last item of the array passed to the method 'inject' has to be a 'function'");for(n=0;n<i.length;n++)"string"==typeof i[n]&&this.contains(i[n])&&(i[n]=this.__resolve(i[n],r));t.apply(null,i)}else{var o=null;if(2===arguments.length&&"string"==typeof arguments[1]){var a=arguments[1];if(!this.contains(a))throw new e("Type with name '"+a+"' is not registered");o=this.getRegistration(a)}var s;if("function"==typeof t){if(o)i=this.__getConstructorParameters(o,r);else{var u=this.__getFunctionArguments(t);for(n=0;n<u.length;n++)s=this.__resolveDependencyName(u[n]),i.push(this.contains(s)?this.__resolve(s,r):null)}t.apply(null,i)}else{if("object"!=typeof t)throw new e("Invalid parameter has been passed to the method 'inject'");if(o)this.__setProperties(t,o,r),this.__invokeFunctions(t,o,r);else{for(var c in t)s=this.__resolveDependencyName(c),this.contains(s)&&i.push({name:c,value:this.__resolve(s,r)});if(i.length>0)for(n=0;n<i.length;n++)t[i[n].name]=i[n].value}}}return this},enumerable:!0},contains:{value:function(t){if(!t)throw new e("Parameter 'name' is not passed to the method 'contains'");if("string"!=typeof t)throw new e("Parameter 'name' passed to the  has to be a 'string'");var n=!1;if(this.__container&&t in this.__container&&(n=!0),!n&&this.__parent){if(!("contains"in this.__parent))throw new e("Dependency resolver's parent doesn't have a method 'contains'");n=this.__parent.contains(t)}return n},enumerable:!0},resolve:{value:function(t){return this.__resolve(t,{resolving:[]})},enumerable:!0},getDefaultFactory:{value:function(){var t=null;if(this.__defaultFactory)t=this.__defaultFactory;else if(this.__parent){if(!("getDefaultFactory"in this.__parent))throw new e("Dependency resolver's parent doesn't have a method 'getDefaultFactory'");t=this.__parent.getDefaultFactory()}else t=new r;return t},enumerable:!0},setDefaultFactory:{value:function(t){if(!t)throw new e("Parameter 'factory' is not passed to the method 'setDefaultFactory");if("function"!=typeof t&&"object"!=typeof t)throw new e("Parameter 'factory' passed to the method 'setDefaultFactory' has  to be a 'function' or 'object'");if("object"==typeof t&&!("create"in t))throw new e("Factory's instance passed to the method 'setDefaultFactory' has to have a method 'create'");return this.__defaultFactory=t,this},enumerable:!0},getNameTransformer:{value:function(){var t=null;if(this.__nameTransformer)t=this.__nameTransformer;else if(this.__parent){if(!("getNameTransformer"in this.__parent))throw new e("Dependency resolver's parent doesn't have a method 'getNameTransformer'");t=this.__parent.getNameTransformer()}else t=new a;return t},enumerable:!0},setNameTransformer:{value:function(t){if(!t)throw new e("Parameter 'transformer' is not passed to the method 'setNameTransformer'");if("function"!=typeof t&&"object"!=typeof t)throw new e("Parameter 'transformer' passed to the method 'setNameTransformer' has to be a 'function' or 'object'");

if("object"==typeof t&&!("transform"in t))throw new e("Trabsformers's instance passed to the method 'setNameTransformer' has to have a method 'transform'");return this.__nameTransformer=t,this},enumerable:!0},getRegistration:{value:function(t){var n=null;if(this.__container&&t in this.__container)n=this.__container[t];else if(this.__parent){if(!("getRegistration"in this.__parent))throw new e("Dependency resolver's parent doesn't have a method 'getRegistration'");n=this.__parent.getRegistration(t)}return n},enumerable:!0},dispose:{value:function(){var t=null,e=0;if(this.__container)for(var n in this.__container)if(this.__container[n]instanceof Array){var i=this.__container[n];for(e=0;e<i.length;e++)t=i[e],t.instance&&"dispose"in t.instance&&t.instance.dispose(),t.instance=null,t.factory=null}else t=this.__container[n],t.instance&&"dispose"in t.instance&&t.instance.dispose(),t.instance=null,t.factory=null;this.__parent=null,this.__defaultFactory=null,this.__nameTransformer=null,this.__autowired=!1,this.__container=null,this.__registration=null,this.__withProperties=!1,this.__withConstructor=!1,this.__parameter=null,this.__property=null,this.__function=null},enumerable:!0},toString:{value:function(){return"[object DependencyResolver]"},enumerable:!0},__getFunctionArguments:{value:function(t){if(t&&"function"==typeof t&&"toString"in t){var e=null,n=t.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/);if(n&&n.length>1&&(e=n[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"")),e)return e.split(",")}return[]}},__resolve:{value:function(t,n){if(!t)throw new e("Parameter 'name' is not passed to the method 'resolve'");if("string"!=typeof t)throw new e("Parameter 'name' passed to the method 'resolve' has to be a 'string'");if(h&&console&&"log"in console){for(var i="-> '"+t+"'",r=0;r<n.resolving.length;r++)i="  "+i;console.log(i)}if(!this.contains(t))throw new e("Type or instance with name '"+t+"' is not registered");var o=n.resolving.indexOf(t);if(-1!==o)throw new e("Can not resolve circular dependency '"+t+"'");n.resolving.push(t);var a=null,s=this.getRegistration(t);if(s instanceof Array){a=[];for(var u=0;u<s.length;u++)a.push(this.__resolveInstance(s[u],n))}else a=this.__resolveInstance(s,n);return o=n.resolving.indexOf(t),o>-1&&n.resolving.splice(o,1),a}},__resolveInstance:{value:function(t,n){var i=null;if(null!==t.instance&&void 0!==t.instance)i=t.instance;else if(i=this.__createInstance(t,n),this.__setProperties(i,t,n),this.__invokeFunctions(i,t,n),i&&t.singleton&&(t.instance=i),!i)throw new e("Failed to resolve instance by name '"+t.name+"'");return i}},__resolveDependencyName:{value:function(t){var n=this.getNameTransformer();if(t="function"==typeof n?n(t):n.transform(t),!t)throw new e("Failed to resolve dependency name");return t}},__createInstance:{value:function(t,i){var r,o=this.__getConstructorParameters(t,i),a=new n({name:t.name,type:t.type,parameters:o}),s=null;if(s=t.factory?t.factory:this.getDefaultFactory(),!s)throw new e("Default factory is not defined");return r="function"==typeof s?s.call(null,a):s.create(a)}},__getConstructorParameters:{value:function(t,n){var i=[];if(t&&t.dependencies){var r,o,a,s,u;if(this.__autowired){s=this.__getFunctionArguments(t.type);var c;for(r=0;r<s.length;r++)c=this.__resolveDependencyName(s[r]),i.push(this.contains(c)?this.__resolve(c,n):null)}for(r=0;r<t.dependencies.parameters.length;r++)if(o=t.dependencies.parameters[r],a=void 0!==o.value?o.value:void 0!==o.reference?this.__resolve(o.reference,n):null,void 0!==o.index&&null!==o.index)i[o.index]=a;else if(o.name){if(s||(s=this.__getFunctionArguments(t.type)),u=s.indexOf(o.name),-1===u)throw new e("Constructor in registration '"+t.name+"' doesn't have defined parameter '"+o.name+"'");i[u]=a}else i.push(a)}return i}},__hasProperty:{value:function(t,e){var n=!1;if(t.dependencies)for(var i,r=0;r<t.dependencies.properties.length;r++)if(i=t.dependencies.properties[r],i.name===e){n=!0;break}return n}},__findParameter:{value:function(t,n,i){var r=null;if(null!==t&&void 0!==t&&null!==i)if("number"==typeof t){if(index=t,t=void 0,index<0)throw new e("Parameter 'name' passed to the method 'param' is out of range for registration '"+i.name+"'");index<n.length&&(r=n[index])}else{if("string"!=typeof t)throw new e("Parameter 'name' passed to the method 'param' has to be a 'number' or a 'string' for registration '"+i.name+"'");for(var o=0;o<n.length;o++)if(n[o].name===t){r=n[o];break}}return r}},__setProperties:{value:function(t,n,i){if(n.dependencies){if(this.__autowired)for(var r in t){var o=this.__resolveDependencyName(r);!this.__hasProperty(n,r)&&this.contains(o)&&(t[r]=this.__resolve(o,i))}for(var a=0;a<n.dependencies.properties.length;a++){var s=n.dependencies.properties[a];if(!(s.name in t))throw new e("Resolved object '"+n.name+"' doesn't have property '"+s.name+"'");void 0!==s.value?t[s.name]=s.value:void 0!==s.reference&&(t[s.name]=this.__resolve(s.reference,i))}}}},__invokeFunctions:{value:function(t,n,i){if(n.dependencies){var r,o,a,s;for(r=0;r<n.dependencies.functions.length;r++){var u=n.dependencies.functions[r];if(!(u.name in t))throw new e("Resolved object '"+n.name+"' doesn't have function '"+u.name+"'");var c=[];for(o=0;o<u.parameters.length;o++)if(a=u.parameters[o],s=void 0!==a.value?a.value:void 0!==a.reference?this.__resolve(a.reference,i):null,void 0!==a.index&&null!==a.index)c[a.index]=s;else if(a.name){if(args||(args=this.__getFunctionArguments(t[u.name])),index=args.indexOf(a.name),-1===index)throw new e("Function doesn't have defined parameter '"+a.name+"'");c[index]=s}else c.push(s);t[u.name].apply(t,c)}}}}}),Object.seal(u),Object.seal(u.prototype),t.DependencyResolver=u;var c=null,h=!1;Object.defineProperty(t,"getDefaultDependencyResolver",{value:function(){return c||(c=new u),c},enumerable:!0}),Object.defineProperty(t,"setDefaultDependencyResolver",{value:function(t){c=t},enumerable:!0}),Object.defineProperty(t,"isAutowired",{get:function(){return t.getDefaultDependencyResolver().isAutowired},enumerable:!0}),Object.defineProperty(t,"autowired",{value:function(e){return t.getDefaultDependencyResolver().autowired(e)},enumerable:!0}),Object.defineProperty(t,"register",{value:function(e){return t.getDefaultDependencyResolver().register(e)},enumerable:!0}),Object.defineProperty(t,"as",{value:function(e){return t.getDefaultDependencyResolver().as(e)},enumerable:!0}),Object.defineProperty(t,"instance",{value:function(e){return t.getDefaultDependencyResolver().instance(e)},enumerable:!0}),Object.defineProperty(t,"asSingleton",{value:function(){return t.getDefaultDependencyResolver().asSingleton()},enumerable:!0}),Object.defineProperty(t,"withConstructor",{value:function(){return t.getDefaultDependencyResolver().withConstructor()},enumerable:!0}),Object.defineProperty(t,"param",{value:function(e){return t.getDefaultDependencyResolver().param(e)},enumerable:!0}),Object.defineProperty(t,"withProperties",{value:function(){return t.getDefaultDependencyResolver().withProperties()},enumerable:!0}),Object.defineProperty(t,"prop",{value:function(e){return t.getDefaultDependencyResolver().prop(e)}}),Object.defineProperty(t,"func",{value:function(e){return t.getDefaultDependencyResolver().func(e)}}),Object.defineProperty(t,"val",{value:function(e){return t.getDefaultDependencyResolver().val(e)},enumerable:!0}),Object.defineProperty(t,"ref",{value:function(e){return t.getDefaultDependencyResolver().ref(e)},enumerable:!0}),Object.defineProperty(t,"setFactory",{value:function(e){return t.getDefaultDependencyResolver().setFactory(e)},enumerable:!0}),Object.defineProperty(t,"create",{value:function(){return t.getDefaultDependencyResolver().create()},enumerable:!0}),Object.defineProperty(t,"inject",{value:function(e,n){return t.getDefaultDependencyResolver().inject(e,n)},enumerable:!0}),Object.defineProperty(t,"contains",{value:function(e){return t.getDefaultDependencyResolver().contains(e)},enumerable:!0}),Object.defineProperty(t,"resolve",{value:function(e){return t.getDefaultDependencyResolver().resolve(e)},enumerable:!0}),Object.defineProperty(t,"getDefaultFactory",{value:function(){return t.getDefaultDependencyResolver().getDefaultFactory()},enumerable:!0}),Object.defineProperty(t,"setDefaultFactory",{value:function(e){return t.getDefaultDependencyResolver().setDefaultFactory(e)},enumerable:!0}),Object.defineProperty(t,"getNameTransformer",{value:function(){return t.getDefaultDependencyResolver().getNameTransformer()},enumerable:!0}),Object.defineProperty(t,"setNameTransformer",{value:function(e){return t.getDefaultDependencyResolver().setNameTransformer(e)},enumerable:!0}),Object.defineProperty(t,"getRegistration",{value:function(e){return t.getDefaultDependencyResolver().getRegistration(e)},enumerable:!0}),Object.defineProperty(t,"debug",{get:function(){return h},set:function(t){h=t},enumerable:!0}),Object.defineProperty(t,"dispose",{value:function(){return t.getDefaultDependencyResolver().dispose()},enumerable:!0})}(window.di),function(){"use strict";var t=function(){return new Promise(function(t){window.addEventListener("load",function(){xui.DependencyContainer=di,delete window.di,xui.DependencyContainer.register("app").as(xui.core.App).asSingleton().register("currentItem").as(xui.core.Item.getCurrentSource).register("currentScene").as(xui.core.Scene.get).register("mainView").instance(xui.core.View.MAIN).register("sourceWindow").as(xui.source.SourceWindow.getInstance).register("configWindow").as(xui.config.ConfigWindow.getInstance),t()})})},e=function(){var e=internal.initPromises;e.push(t()),Promise.all(e).then(function(){document.dispatchEvent(new CustomEvent("xui-ready",{bubbles:"true"}))})};e()}(),function(){"use strict";function t(){}function e(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function n(t){return function(){return this[t].apply(this,arguments)}}var i=t.prototype,r=this,o=r.EventEmitter;i.getListeners=function(t){var e,n,i=this._getEvents();if(t instanceof RegExp){e={};for(n in i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n])}else e=i[t]||(i[t]=[]);return e},i.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},i.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},i.addListener=function(t,n){var i,r=this.getListenersAsObject(t),o="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&-1===e(r[i],n)&&r[i].push(o?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,n){var i,r,o=this.getListenersAsObject(t);for(r in o)o.hasOwnProperty(r)&&(i=e(o[r],n),-1!==i&&o[r].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,n){var i,r,o=t?this.removeListener:this.addListener,a=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)o.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(r=e[i])&&("function"==typeof r?o.call(this,i,r):a.call(this,i,r));return this},i.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if(t instanceof RegExp)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(t,e){var n,i,r,o,a=this.getListenersAsObject(t);for(r in a)if(a.hasOwnProperty(r))for(i=a[r].length;i--;)n=a[r][i],n.once===!0&&this.removeListener(t,n.listener),o=n.listener.apply(this,e||[]),o===this._getOnceReturnValue()&&this.removeListener(t,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},i.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return r.EventEmitter=o,t},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:r.EventEmitter=t}.call(this),function(){"use strict";var t,e=function(){window.SetConfiguration=function(e){try{var n=JSON.parse(e)}catch(i){return}t.emit("apply-config",n)},t=this};e.prototype=Object.create(EventEmitter.prototype),e.getInstance=function(){return void 0===t&&(t=new e),t},void 0===window.xui&&(window.xui={}),void 0===window.xui.source&&(window.xui.source={}),window.xui.source.SourceWindow=e}(),function(){"use strict";var t,e=function(){window.addEventListener("message",function(t){try{var e=JSON.parse(t.data)}catch(n){return}switch(e.event){case"set-language":case"set-selected-tab":this.emit(e.event,e.value);break;case"async-callback":this.emit(e.event,{asyncId:e.value.asyncId,result:e.value.result});break;case"config-load":this.emit(e.event)}}.bind(this)),t=this};e.prototype=Object.create(EventEmitter.prototype),e.getInstance=function(){return void 0===t&&(t=new e),t},e.RenderMode={HIDDEN:"hidden",EMBEDDED:"embedded",FULLSCREEN:"full"},e.prototype._notify=function(t){window.parent.postMessage(JSON.stringify(t),"*")},e.prototype.setRenderMode=function(t){this._notify({event:"set-mode",value:t})},e.prototype.setTabOrder=function(t){this._notify({event:"set-tab-order",value:JSON.stringify(t)})},e.prototype.declareCustomTabs=function(t){this._notify({event:"set-custom-tabs",value:JSON.stringify(t)})},e.prototype.resizeConfig=function(t,e){internal.exec("SetDialogSize",t,e),this._notify({event:"resize",value:JSON.stringify({width:t,height:e})})},e.prototype.closeConfig=function(){internal.exec("Close")},void 0===window.xui&&(window.xui={}),void 0===window.xui.config&&(window.xui.config={}),window.xui.config.ConfigWindow=e,window.addEventListener("load",function(){window.xui.config.ConfigWindow.getInstance()._notify({event:"load"})}),delete window.EventEmitter}();